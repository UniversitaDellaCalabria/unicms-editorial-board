(function(t){function e(e){for(var s,o,n=e[0],l=e[1],d=e[2],u=0,m=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(m.length)m.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={app:0},r=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/static/unicms_editorial_board_vue/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var d=0;d<n.length;d++)e(n[d]);var c=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},4456:function(t,e,a){"use strict";a("bb99")},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=a("cee4"),r=a("130e"),o=a("5f5b"),n=a("b1e0"),l=a("4a7a"),d=a.n(l),c=a("0561"),u=a.n(c),m=a("8c4f"),h=function(){var t=this,e=t._self._c;return e("div",{class:{"nav-open":t.$sidebar.showSidebar}},[e("notifications"),e("router-view")],1)},p=[],_={},b=_,f=(a("7f9f"),a("2877")),g=Object(f["a"])(b,h,p,!1,null,null,null),v=g.exports,w=(a("f9e3"),a("2dd8"),function(){var t=this,e=t._self._c;return e(t.tag,{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeDropDown,expression:"closeDropDown"}],tag:"li",staticClass:"dropdown nav-item",class:{show:t.isOpen},attrs:{"aria-haspopup":"true","aria-expanded":t.isOpen},on:{click:t.toggleDropDown}},[e("a",{staticClass:"nav-link dropdown-toggle",attrs:{"data-toggle":"dropdown"}},[t._t("title",(function(){return[e("i",{class:t.icon}),e("span",{staticClass:"no-icon"},[t._v(t._s(t.title))]),e("b",{staticClass:"caret"})]}))],2),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"dropdown-menu show"},[t._t("default")],2)])}),k=[],C={name:"base-dropdown",props:{title:String,icon:String,tag:{type:String,default:"li"}},data(){return{isOpen:!1}},methods:{toggleDropDown(){this.isOpen=!this.isOpen,this.$emit("change",this.isOpen)},closeDropDown(){this.isOpen=!1,this.$emit("change",this.isOpen)}}},$=C,y=(a("7d9a"),Object(f["a"])($,w,k,!1,null,"1b11b073",null)),x=y.exports,S=function(){var t=this,e=t._self._c;return e("div",[e("div",[t.redis_alert?e("b-alert",{attrs:{dismissible:!!t.redis_alert.dismissable,show:"",variant:t.redis_alert.variant}},[t._v(" "+t._s(t.redis_alert.message)+" "),e("b-icon",{staticClass:"ml-2",attrs:{icon:"pencil-fill",animation:"cylon","font-scale":"1"}})],1):t._e(),t._l(t.alerts,(function(a){return e("b-alert",{attrs:{dismissible:!!a.dismissable,show:a.ttl||10,variant:a.variant}},[t._v(" "+t._s(a.message)+" ")])}))],2)])},j=[],L={name:"stacked-alerts",props:["alerts","redis_alert"]},O=L,N=Object(f["a"])(O,S,j,!1,null,null,null),M=N.exports,z=function(){var t=this,e=t._self._c;return t.loading?e("b-alert",{attrs:{variant:"info",show:""}},[e("b-spinner",{staticClass:"mr-3",attrs:{small:"",type:"grow",label:"Loading...",variant:"info"}}),t._v(" saving your data... please wait ")],1):e("b-form",{on:{submit:t.submit}},[t._l(this.fields,(function(a){return e("b-form-group",{key:a.id,attrs:{id:"input-group-"+a.id,label:a.required?a.label+" *":a.label,"label-class":a.required?"font-weight-bold":"","label-for":a.id,description:a.help_text}},["checkbox"==a.type?e("b-form-checkbox",{attrs:{id:a.id,name:a.id,required:!!a.required},model:{value:t.form[a.id],callback:function(e){t.$set(t.form,a.id,e)},expression:"form[field.id]"}}):"select"==a.type?e("div",[a.api_source?e("v-select",{attrs:{label:"text",reduce:t=>t.value,options:t.options[a.id],filterable:!1,id:a.id,multiple:!!a.multiple,required:!!a.required},on:{search:function(e){return t.fetchOptions(a.id,a.api_source,e)},"option:selected":function(e){return t.setSelected(a.id,e)}},scopedSlots:t._u([{key:"no-options",fn:function({search:a,searching:s,loading:i}){return[e("span",a?[t._v("No results for "),e("b",[t._v(t._s(a))])]:[t._v("This field is actually empty")])]}},{key:"list-footer",fn:function(){return[e("hr"),e("li",{staticStyle:{"text-align":"center",opacity:".8"}},[t._v(" Type to search... ")])]},proxy:!0}],null,!0),model:{value:t.form[a.id],callback:function(e){t.$set(t.form,a.id,e)},expression:"form[field.id]"}}):e("v-select",{attrs:{label:"text",reduce:t=>t.value,options:a.options,id:a.id,multiple:!!a.multiple,required:!!a.required},model:{value:t.form[a.id],callback:function(e){t.$set(t.form,a.id,e)},expression:"form[field.id]"}}),a.id in t.add_modal_fields?e("a",{staticClass:"btn btn-success btn-sm mt-2",on:{click:function(e){return t.openPopup(a.id)}}},[t._v(" Add new ")]):t._e(),a.id in t.files&&t.files[a.id]?e("div",{staticClass:"mt-3"},[e("p",[t._v("Selected")]),t.$is_image(t.files[a.id])?e("b-img",{staticClass:"w-25",attrs:{src:t.files[a.id],fluid:"",alt:a.label}}):e("p",[e("a",{attrs:{href:t.files[a.id]}},[t._v(" "+t._s(t.files[a.id])+" ")])])],1):t._e()],1):"textarea"==a.type&&t.rich_text_fields.includes(a.id)?e("ckeditor",{attrs:{editor:t.editor,id:a.id,config:t.editorConfig,required:!!a.required},model:{value:t.form[a.id],callback:function(e){t.$set(t.form,a.id,e)},expression:"form[field.id]"}}):"textarea"==a.type?e("b-form-textarea",{attrs:{id:a.id,rows:"1","max-rows":"25",required:!!a.required},model:{value:t.form[a.id],callback:function(e){t.$set(t.form,a.id,e)},expression:"form[field.id]"}}):"file"==a.type?e("div",[e("b-form-file",{attrs:{placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:t.form[a.id],callback:function(e){t.$set(t.form,a.id,e)},expression:"form[field.id]"}}),a.id in t.files&&t.files[a.id]?e("div",{staticClass:"mt-3"},[e("p",[t._v("Selected file")]),t.$is_image(t.files[a.id])?e("b-img",{staticClass:"w-25",attrs:{src:t.files[a.id],fluid:"",alt:a.label}}):e("p",[e("a",{attrs:{href:t.files[a.id]}},[t._v(" "+t._s(t.files[a.id])+" ")])])],1):t._e()],1):"datetime"==a.type?e("datetime",{staticClass:"form-control",attrs:{firstDayOfWeek:"1",format:"YYYY-MM-DD H:i",id:a.id,required:!!a.required},model:{value:t.form[a.id],callback:function(e){t.$set(t.form,a.id,e)},expression:"form[field.id]"}}):e("div",[t.tag_fields.includes(a.id)?e("b-form-tags",{attrs:{type:a.type,id:a.id,required:!!a.required},model:{value:t.form[a.id],callback:function(e){t.$set(t.form,a.id,e)},expression:"form[field.id]"}}):e("b-form-input",{attrs:{type:a.type,id:a.id,required:!!a.required},model:{value:t.form[a.id],callback:function(e){t.$set(t.form,a.id,e)},expression:"form[field.id]"}})],1)],1)})),e("b-button",{attrs:{type:"submit",block:"",variant:"success"}},[t._v("Save")]),e("b-modal",{attrs:{id:"modal-1",title:"BootstrapVue"}},[e("router-view",{attrs:{name:t.MediaNew}})],1)],2)},T=[],P=a("6930"),D=a.n(P),I=a("7891"),E={name:"django-form",components:{ckeditor:D.a.component,datetime:I["a"]},props:{form:String,submit:String,form_source:String,files:{default:{}},add_modal_fields:{default:{}},rich_text_fields:{default:[]},tag_fields:{default:[]}},data(){return{loading:!1,initial:{},options:{},selected:{},editor:ClassicEditor,alignment:{options:["left","right","center","justify"]},editorConfig:{isReadOnly:!1,toolbar:{items:["heading","|","bold","italic","link","|","bulletedList","numberedList","|","alignment","indent","outdent","|","blockQuote","|","insertTable","undo","redo"]}},fields:[]}},methods:{getForm(){this.axios.get(this.form_source).then(t=>{this.fields=t.data})},fetchOptions(t,e,a){if(""!=a){let s=e.includes("?")?"&":"?";this.axios.get(e+s+"search="+a).then(e=>{this.$set(this.options,t,e.data.results)})}else this.selected[t]?this.$set(this.options,t,[this.selected[t]]):this.$set(this.options,t,this.initial[t])},setSelected(t,e){this.$set(this.selected,t,e)},getOptionsFromParent(t,e){this.$set(this.initial,t,e),this.$set(this.options,t,e)},openPopup(t){window.open(document.location.origin+"/editorial-board/"+this.add_modal_fields[t]+"?mode=raw",t,"directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=no,width=800,height=600")}},mounted(){this.getForm()}},F=E,R=Object(f["a"])(F,z,T,!1,null,null,null),W=R.exports;const B={install(t){t.component(x.name,x),t.component(W.name,W),t.component(M.name,M)}};var A=B,X={bind:function(t,e,a){t.clickOutsideEvent=function(s){t==s.target||t.contains(s.target)||a.context[e.expression](s)},document.body.addEventListener("click",t.clickOutsideEvent)},unbind:function(t){document.body.removeEventListener("click",t.clickOutsideEvent)}};const H={install(t){t.directive("click-outside",X)}};var q=H,Y=function(){var t=this,e=t._self._c;return"raw"!=t.mode?e("div",{staticClass:"sidebar",style:t.sidebarStyle,attrs:{"data-color":t.backgroundColor,"data-image":t.backgroundImage}},[e("div",{staticClass:"sidebar-wrapper"},[t._m(0),t._t("content"),e("ul",{staticClass:"nav nav-main__links"},[t._t("default",(function(){return t._l(t.sidebarLinks,(function(a,s){return e("sidebar-link",{key:a.name+s,attrs:{to:a.path,link:a},on:{click:t.closeNavbar}},[e("i",{class:a.icon}),e("p",[t._v(t._s(a.name))])])}))}))],2),t.$slots["bottom-links"]?e("ul",{staticClass:"nav nav-bottom"},[t._t("bottom-links")],2):t._e()],2)]):t._e()},V=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"logo"},[e("a",{staticClass:"simple-text logo__container",attrs:{href:"#"}},[t._v(" uniCMS ")])])}],G=function(){var t=this,e=t._self._c;return e(t.tag,t._b({tag:"component",attrs:{tag:"li"},nativeOn:{click:function(e){return t.hideSidebar.apply(null,arguments)}}},"component",t.$attrs,!1),[e("a",t._b({staticClass:"nav-link"},"a",t.$attrs,!1),[t._t("default",(function(){return[t.link.icon?e("i",{class:t.link.icon}):t._e(),e("p",[t._v(t._s(t.link.name))])]}))],2)])},U=[],J={inheritAttrs:!1,inject:{autoClose:{default:!0}},props:{link:{type:[String,Object],default:()=>({name:"",path:"",icon:""})},tag:{type:String,default:"router-link"}},methods:{hideSidebar(){this.autoClose&&this.$sidebar&&!0===this.$sidebar.showSidebar&&this.$sidebar.displaySidebar(!1)}}},Q=J,K=Object(f["a"])(Q,G,U,!1,null,null,null),Z=K.exports,tt={components:{SidebarLink:Z},data(){return{mode:""}},props:{title:{type:String,default:"Vue LBD"},backgroundColor:{type:String,default:"black",validator:t=>{let e=["","blue","azure","green","orange","red","purple","black"];return-1!==e.indexOf(t)}},backgroundImage:{type:String,default:"/static/unicms_editorial_board_vue/img/sidebar-5.jpg"},activeColor:{type:String,default:"success",validator:t=>{let e=["primary","info","success","warning","danger"];return-1!==e.indexOf(t)}},sidebarLinks:{type:Array,default:()=>[]},autoClose:{type:Boolean,default:!0}},provide(){return{autoClose:this.autoClose}},computed:{sidebarStyle(){return{backgroundImage:`url(${this.backgroundImage})`}}},mounted(){this.mode=this.$route.query.mode}},et=tt,at=(a("4456"),Object(f["a"])(et,Y,V,!1,null,null,null)),st=at.exports;const it={showSidebar:!1,sidebarLinks:[{name:"Dashboard",icon:"ti-panel",path:"/overview"}],displaySidebar(t){this.showSidebar=t}},rt={install(t){t.mixin({data(){return{sidebarStore:it}}}),Object.defineProperty(t.prototype,"$sidebar",{get(){return this.$root.sidebarStore}}),t.component("side-bar",st),t.component("sidebar-link",Z)}};var ot=rt,nt=(a("e1b9"),a("c6e3"),{install(t){t.use(A),t.use(q),t.use(ot)}}),lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},["raw"!=t.mode?e("side-bar",[e("mobile-menu",{attrs:{slot:"content"},slot:"content"}),e("sidebar-link",{attrs:{to:"/dashboard"}},[e("b-icon",{staticClass:"mr-4 ml-1",attrs:{icon:"graph-up",variant:"white",scale:"1.9"}}),e("p",[t._v("Dashboard")])],1),e("sidebar-link",{attrs:{to:"/blocks"}},[e("b-icon",{staticClass:"mr-4 ml-1",attrs:{icon:"bricks",variant:"white",scale:"1.9"}}),e("p",[t._v("Blocks")])],1),e("sidebar-link",{attrs:{to:"/calendars"}},[e("b-icon",{staticClass:"mr-4 ml-1",attrs:{icon:"calendar2-date",variant:"white",scale:"1.9"}}),e("p",[t._v("Calendars")])],1),e("sidebar-link",{attrs:{to:"/carousels"}},[e("b-icon",{staticClass:"mr-4 ml-1",attrs:{icon:"collection-play",variant:"white",scale:"1.9"}}),e("p",[t._v("Carousels")])],1),e("sidebar-link",{attrs:{to:"/contacts"}},[e("b-icon",{staticClass:"mr-4 ml-1",attrs:{icon:"person-lines-fill",variant:"white",scale:"1.9"}}),e("p",[t._v("Contacts")])],1),e("sidebar-link",{attrs:{to:"/events"}},[e("b-icon",{staticClass:"mr-4 ml-1",attrs:{icon:"calendar2-event",variant:"white",scale:"1.9"}}),e("p",[t._v("Events")])],1),e("sidebar-link",{attrs:{to:"/media"}},[e("b-icon",{staticClass:"mr-4 ml-1",attrs:{icon:"folder",variant:"white",scale:"1.9"}}),e("p",[t._v("Media")])],1),e("sidebar-link",{attrs:{to:"/media-collections"}},[e("b-icon",{staticClass:"mr-4 ml-1",attrs:{icon:"folder-check",variant:"white",scale:"1.9"}}),e("p",[t._v("Media collections")])],1),e("sidebar-link",{attrs:{to:"/menus"}},[e("b-icon",{staticClass:"mr-4 ml-1",attrs:{icon:"menu-button-wide-fill",variant:"white",scale:"1.9"}}),e("p",[t._v("Menus")])],1),e("sidebar-link",{attrs:{to:"/newsletters"}},[e("b-icon",{staticClass:"mr-4 ml-1",attrs:{icon:"mailbox",variant:"white",scale:"1.9"}}),e("p",[t._v("Newsletters")])],1),e("sidebar-link",{attrs:{to:"/publications"}},[e("b-icon",{staticClass:"mr-4 ml-1",attrs:{icon:"file-earmark-text",variant:"white",scale:"1.9"}}),e("p",[t._v("Publications")])],1),e("sidebar-link",{attrs:{to:"/websites"}},[e("b-icon",{staticClass:"mr-4 ml-1",attrs:{icon:"globe",variant:"white",scale:"1.9"}}),e("p",[t._v("Websites")])],1)],1):t._e(),e("div",{staticClass:"main-panel"},[e("top-navbar"),e("dashboard-content",{on:{click:t.toggleSidebar}}),e("content-footer")],1)],1)},dt=[],ct=function(){var t=this,e=t._self._c;return"raw"!=t.mode?e("nav",{staticClass:"navbar navbar-expand-lg"},[e("div",{staticClass:"container-fluid"},[e("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("Editorial Board")]),e("button",{staticClass:"navbar-toggler navbar-toggler-right",class:{toggled:t.$sidebar.showSidebar},attrs:{type:"button","aria-controls":"navigation-index","aria-expanded":"false","aria-label":"Toggle navigation"},on:{click:t.toggleSidebar}},[e("span",{staticClass:"navbar-toggler-bar burger-lines"}),e("span",{staticClass:"navbar-toggler-bar burger-lines"}),e("span",{staticClass:"navbar-toggler-bar burger-lines"})]),t._m(0)])]):t._e()},ut=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"collapse navbar-collapse justify-content-end"},[e("ul",{staticClass:"navbar-nav ml-auto"},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"/"}},[t._v(" Live site ")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"/saml2/logout"}},[t._v(" Logout ")])])])])}],mt={computed:{routeName(){const{name:t}=this.$route;return this.capitalizeFirstLetter(t)}},data(){return{activeNotifications:!1,mode:""}},methods:{capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)},toggleNotificationDropDown(){this.activeNotifications=!this.activeNotifications},closeDropDown(){this.activeNotifications=!1},toggleSidebar(){this.$sidebar.displaySidebar(!this.$sidebar.showSidebar)},hideSidebar(){this.$sidebar.displaySidebar(!1)}},mounted(){this.mode=this.$route.query.mode}},ht=mt,pt=Object(f["a"])(ht,ct,ut,!1,null,null,null),_t=pt.exports,bt=function(){var t=this,e=t._self._c;return"raw"!=t.mode?e("footer",{staticClass:"footer"},[e("div",{staticClass:"container-fluid"},[e("nav",[e("ul",{staticClass:"footer-menu"},[e("li",[e("router-link",{attrs:{to:{path:"/"}}},[t._v("Dashboard")])],1)])]),e("div",{staticClass:"copyright text-center"},[e("b-icon",{attrs:{icon:"github"}}),t._v(" Contribute to: "),e("a",{attrs:{href:"https://github.com/UniversitaDellaCalabria/uniCMS",target:"_blank"}},[t._v(" uniCMS ")]),t._v(" / "),e("a",{attrs:{href:"https://github.com/UniversitaDellaCalabria/unicms-editorial-board",target:"_blank"}},[t._v(" uniCMS editorial board ")])],1)])]):t._e()},ft=[],gt={data(){return{mode:""}},mounted(){this.mode=this.$route.query.mode}},vt=gt,wt=Object(f["a"])(vt,bt,ft,!1,null,null,null),kt=wt.exports,Ct=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view")],1)},$t=[],yt={},xt=yt,St=(a("ca41"),Object(f["a"])(xt,Ct,$t,!1,null,null,null)),jt=St.exports,Lt=function(){var t=this;t._self._c;return t._m(0)},Ot=[function(){var t=this,e=t._self._c;return e("ul",{staticClass:"nav nav-mobile-menu"},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"/"}},[e("span",{staticClass:"no-icon"},[t._v("Live site")])])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"/saml2/logout"}},[e("span",{staticClass:"no-icon"},[t._v("Log out")])])])])}],Nt={name:"mobile-menu"},Mt=Nt,zt=Object(f["a"])(Mt,Lt,Ot,!1,null,null,null),Tt=zt.exports,Pt={components:{TopNavbar:_t,ContentFooter:kt,DashboardContent:jt,MobileMenu:Tt},data(){return{mode:""}},methods:{toggleSidebar(){this.$sidebar.showSidebar&&this.$sidebar.displaySidebar(!1)}},mounted(){this.mode=this.$route.query.mode}},Dt=Pt,It=Object(f["a"])(Dt,lt,dt,!1,null,null,null),Et=It.exports,Ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-12"},[e("b-card",{attrs:{title:"404 Not Found"}},[e("b-card-text",{staticClass:"mt-4"},[e("p",[t._v("The page you are trying to access does not exist")])])],1)],1)])])])},Rt=[],Wt={},Bt=Object(f["a"])(Wt,Ft,Rt,!1,null,null,null),At=Bt.exports,Xt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-3 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{attrs:{to:"#"}},[t._v(" Manage ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"globe",scale:"0.8"}}),t._v(" Nome ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t._v("xxx")])])],1)],1),e("div",{staticClass:"col-lg-3 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{attrs:{to:"#"}},[t._v(" Manage ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"globe",scale:"0.8"}}),t._v(" Nome ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t._v("xxx")])])],1)],1),e("div",{staticClass:"col-lg-3 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{attrs:{to:"#"}},[t._v(" Manage ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"globe",scale:"0.8"}}),t._v(" Nome ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t._v("xxx")])])],1)],1),e("div",{staticClass:"col-lg-3 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{attrs:{to:"#"}},[t._v(" Manage ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"globe",scale:"0.8"}}),t._v(" Nome ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t._v("xxx")])])],1)],1),e("div",{staticClass:"col-lg-3 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{attrs:{to:"#"}},[t._v(" Manage ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"globe",scale:"0.8"}}),t._v(" Nome ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t._v("xxx")])])],1)],1),e("div",{staticClass:"col-lg-3 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{attrs:{to:"#"}},[t._v(" Manage ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"globe",scale:"0.8"}}),t._v(" Nome ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t._v("xxx")])])],1)],1)])])])},Ht=[],qt={},Yt=Object(f["a"])(qt,Xt,Ht,!1,null,null,null),Vt=(Yt.exports,function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"CalendarNew"}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"childs",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"CalendarEvents",params:{calendar_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"list-ul",variant:"secondary"}}),t._v(" Events ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"CalendarLocalizations",params:{calendar_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1)]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"CalendarEdit",params:{calendar_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-secondary",attrs:{to:{name:"CalendarLocks",params:{calendar_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"lock",variant:"white"}}),t._v(" Allowed users ")],1)]}}])})}),Gt=[],Ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:t.page_title}},[e("b-card-text",[t._t("text"),e("div",{staticClass:"text-right mb-3"},[t._t("add_new")],2),e("div",{staticClass:"row pt-3"},[e("div",{staticClass:"col col-12 col-sm"},[e("b-form-input",{staticClass:"mb-3",attrs:{placeholder:"Search...",type:"search"},on:{input:function(e){return t.callApi(null,1)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t.showIsActive?e("div",{staticClass:"col col-12 col-sm"},[e("IsActiveFilter",{attrs:{is_active:t.is_active},on:{updateIsActive:function(e){t.is_active=e},callApi:function(e){return t.callApi(null,1)}}})],1):t._e(),t.showCreatedBy?e("div",{staticClass:"col col-12 col-sm"},[e("CreatedByFilter",{attrs:{created_by:t.created_by,created_by_list:t.created_by_list},on:{updateCreatedBy:function(e){t.created_by=e},callApi:function(e){return t.callApi(null,1)}}})],1):t._e(),t._t("custom_filter"),e("div",{staticClass:"col col-12 col-md-4"},[e("OrderingFilter",{attrs:{ordering:t.ordering,ordering_list:t.ordering_list,sortDesc:t.sortDesc},on:{updateOrdering:function(e){t.ordering=e},updateSortDesc:function(e){t.sortDesc=e},callApi:function(e){return t.callApi(null,t.page)}}})],1)],2),t.isBusy?t._e():e("b-pagination",{attrs:{"total-rows":t.total_rows,"per-page":t.per_page,"first-number":"","last-number":"",align:"right","aria-controls":"my-table"},on:{change:t.changePage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),e("b-table",{ref:"table",attrs:{id:"my-table",striped:"",hover:"",responsive:"",busy:t.isBusy,fields:t.fields,items:t.items,"current-page":t.page},scopedSlots:t._u([{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center text-danger my-2"},[e("b-spinner",{staticClass:"align-middle mr-3",attrs:{small:"",type:"grow"}}),e("strong",[t._v("loading data...")])],1)]},proxy:!0},{key:"cell(state)",fn:function(e){return[t._t("state",null,{data:e})]}},{key:"cell(group_by_categories)",fn:function(e){return[t._t("group_by_categories",null,{data:e})]}},{key:"cell(discard_sent_news)",fn:function(e){return[t._t("discard_sent_news",null,{data:e})]}},{key:"cell(sending)",fn:function(e){return[t._t("sending",null,{data:e})]}},{key:"cell(queued)",fn:function(e){return[t._t("queued",null,{data:e})]}},{key:"cell(sending_test)",fn:function(e){return[t._t("sending_test",null,{data:e})]}},{key:"cell(queued_test)",fn:function(e){return[t._t("queued_test",null,{data:e})]}},{key:"cell(attachment)",fn:function(e){return[t._t("attachment",null,{data:e})]}},{key:"cell(html)",fn:function(e){return[t._t("html",null,{data:e})]}},{key:"cell(html_file)",fn:function(e){return[t._t("html_file",null,{data:e})]}},{key:"cell(static_path)",fn:function(e){return[t._t("static_path",null,{data:e})]}},{key:"cell(is_active)",fn:function(a){return[t._t("activation",(function(){return[a.value?e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"check-circle-fill",variant:"success"},on:{click:function(e){return t.changeStatus(a.item)}}}):e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"dash-circle-fill",variant:"danger"},on:{click:function(e){return t.changeStatus(a.item)}}})]}),{data:a})]}},{key:"cell(childs)",fn:function(e){return[t._t("childs",null,{item:e.item})]}},{key:"cell(actions)",fn:function(a){return[t._t("actions",null,{item:a.item}),t.allow_delete?e("b-button",{staticClass:"btn-block",attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.deleteModal(a.item)}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1):t._e()]}},{key:"cell()",fn:function(a){return[t.files&&t.isFile(a.field.key)&&a.value?e("div",[Object.keys(a.value).includes("file")&&!a.value.file?e("span",[t._v(" - ")]):t.$is_image(a.value)?e("b-img",{staticStyle:{"max-width":"220px"},attrs:{src:a.value.file||a.value,alt:"Responsive image"}}):e("a",{attrs:{href:a.value.file||a.value,title:a.value.file||a.value}},[e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"file-text"}})],1)],1):t.arrays&&t.isArray(a.field.key)&&a.value?e("span",t._l(a.value,(function(s){return e("div",[t._v(" "+t._s(s[t.getArrayMap(a.field.key)])+" ")])})),0):t.dates&&t.isDate(a.field.key)&&a.value?e("span",[t._v(" "+t._s(t.$date_formatter(a.value))+" ")]):e("span",[t._v(t._s(a.value||"-"))])]}}],null,!0)}),t.isBusy?t._e():e("b-pagination",{attrs:{"total-rows":t.total_rows,"per-page":t.per_page,"first-number":"","last-number":"",align:"right"},on:{change:t.changePage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],2)],1)],1)])],1)])},Jt=[],Qt=function(){var t=this,e=t._self._c;return e("b-input-group",[e("b-form-select",{staticClass:"mb-3",attrs:{id:"created-by-select",options:t.created_by_list,"aria-describedby":t.ariaDescribedby},on:{change:function(e){return t.updateCreatedBy()}},model:{value:t.created_by,callback:function(e){t.created_by=e},expression:"created_by"}})],1)},Kt=[],Zt={name:"CreatedByFilter",props:{created_by:{type:String},created_by_list:{type:Array}},methods:{updateCreatedBy(){this.$emit("updateCreatedBy",this.created_by),this.$emit("callApi")}}},te=Zt,ee=Object(f["a"])(te,Qt,Kt,!1,null,null,null),ae=ee.exports,se=function(){var t=this,e=t._self._c;return e("b-input-group",[e("b-form-select",{staticClass:"mb-3",attrs:{id:"created-by-select",options:t.state_list,"aria-describedby":t.ariaDescribedby},on:{change:function(e){return t.updateIsActive()}},model:{value:t.is_active,callback:function(e){t.is_active=e},expression:"is_active"}})],1)},ie=[],re={name:"CreatedByFilter",props:{is_active:{type:String}},data(){return{state_list:[{text:"Show all items",value:""},{text:"Only active",value:1},{text:"Only inactive",value:0}]}},methods:{updateIsActive(){this.$emit("updateIsActive",this.is_active),this.$emit("callApi")}}},oe=re,ne=Object(f["a"])(oe,se,ie,!1,null,null,null),le=ne.exports,de=function(){var t=this,e=t._self._c;return e("b-input-group",[e("b-form-select",{staticClass:"w-75 mb-3",attrs:{id:"sort-by-select",options:t.ordering_list,"aria-describedby":t.ariaDescribedby},on:{change:function(e){return t.updateOrderedBy()}},model:{value:t.ordering,callback:function(e){t.ordering=e},expression:"ordering"}}),e("b-form-select",{staticClass:"w-25",attrs:{"aria-describedby":t.ariaDescribedby},on:{change:function(e){return t.updateOrderedBy()}},model:{value:t.sortDesc,callback:function(e){t.sortDesc=e},expression:"sortDesc"}},[e("option",{attrs:{value:""}},[t._v("Asc")]),e("option",{attrs:{value:"-"}},[t._v("Desc")])])],1)},ce=[],ue={name:"OrderingFilter",props:{ordering_list:{type:Array},sortDesc:{type:String},ordering:{type:String}},methods:{updateOrderedBy(){this.$emit("updateOrdering",this.ordering),this.$emit("updateSortDesc",this.sortDesc),this.$emit("callApi")}}},me=ue,he=Object(f["a"])(me,de,ce,!1,null,null,null),pe=he.exports,_e={name:"CompleteTable",components:{CreatedByFilter:ae,IsActiveFilter:le,OrderingFilter:pe},props:{allow_delete:{type:Boolean,default:!0},api_source:{type:String},arrays:{type:Array},arrays_map:{type:Array},dates:{type:Array},fields:{type:Array},files:{type:Array},images:{type:Array},mainMethod:{type:Function},ordering:{type:String,default:"id"},ordering_list:{type:Array},page_title:{type:String},showCreatedBy:{type:Boolean,default:!0},showIsActive:{type:Boolean,default:!0},sortDesc:{type:String,default:""}},data(){return{alerts:this.$route.params.alerts||[],isBusy:!0,items:[],page:1,per_page:0,total_rows:0,next:"",parent_name:this.$parent.api_source,prev:"",search:"",sortDesc:"",is_active:"",created_by:"",created_by_list:[{text:"Only items created by me",value:""},{text:"Show all items",value:""}],custom_filters:{}}},methods:{isDate(t){return 0!==this.dates.filter(e=>e===t).length},isFile(t){return 0!==this.files.filter(e=>e===t).length},isArray(t){return 0!==this.arrays.filter(e=>e===t).length},getArrayMap(t){for(let e=0;e<this.arrays_map.length;e++)if(this.arrays_map[e][t])return this.arrays_map[e][t]},getCurrentUserID(t=!0){this.axios.get("/api/editorial-board/users/current/").then(e=>{sessionStorage.getItem(this.parent_name)||(this.created_by=e.data[0]),this.$set(this.created_by_list[0],"value",e.data[0]),t&&this.callApi(null)})},callApi(t=null,e=null){if(this.mainMethod)this.mainMethod(t,e);else{let a=e||this.page,s=this.api_source+"?page="+a+"&search="+this.search+"&ordering="+this.sortDesc+this.ordering+"&created_by="+this.created_by+"&is_active="+this.is_active;for(let[t,e]of Object.entries(this.custom_filters)){let a="&"+t+"="+e;s=s.concat(a)}t&&(s=t),this.axios.get(s).then(t=>{this.items=t.data.results,this.per_page=t.data.per_page,this.prev=t.data.previous,this.next=t.data.next,this.total_rows=t.data.count,this.page=t.data.page,this.isBusy=!1;let e={page:this.page,is_active:this.is_active,search:this.search,ordering:this.ordering,sortDesc:this.sortDesc,created_by:this.created_by};for(let[a,s]of Object.entries(this.custom_filters))e[a]=s;sessionStorage.setItem(this.parent_name,JSON.stringify(e))})}},changeStatus(t){this.axios.patch(this.api_source+t.id+"/",{is_active:!t.is_active},{headers:{"X-CSRFToken":this.$csrftoken}}).then(e=>{t.is_active=e.data.is_active,this.alerts.push({variant:"success",message:"item status changed successfully",dismissable:!0})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},remove(t){this.axios.delete(this.api_source+t+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(e=>{this.items.splice(this.items.findIndex(e=>e.id===t),1),this.alerts.push({variant:"success",message:"item removed successfully",dismissable:!0})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(t){this.$bvModal.msgBoxConfirm("Do you want really delete item?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(e=>{e&&this.remove(t.id)})},changePage(t){this.page=t,this.isBusy=!0,this.callApi(null)}},mounted(){if(sessionStorage.getItem(this.parent_name)){let t=JSON.parse(sessionStorage.getItem(this.parent_name));this.is_active=t["is_active"],delete t["is_active"],this.page=t["page"],delete t["page"],this.search=t["search"],delete t["search"],this.ordering=t["ordering"],delete t["ordering"],this.created_by=t["created_by"],delete t["created_by"],this.sortDesc=t["sortDesc"],delete t["sortDesc"];for(let[e,a]of Object.entries(t))this.custom_filters[e]=a}this.showCreatedBy?this.getCurrentUserID():this.callApi(null)}},be=_e,fe=Object(f["a"])(be,Ut,Jt,!1,null,null,null),ge=fe.exports,ve={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/calendars/",fields:["id","name","description",{key:"is_active",label:"Active"},{key:"childs",label:"Related"},"actions"],ordering:"name",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"Description",value:"description"}],page_title:"Calendars"}}},we=ve,ke=Object(f["a"])(we,Vt,Gt,!1,null,null,null),Ce=ke.exports,$e=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},["raw"!=t.$route.query.mode?e("Breadcrumbs"):t._e(),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New calendar"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},ye=[],xe={data(){return{alerts:[],form:{},form_source:"/api/editorial-board/calendars/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/calendars/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"calendar added successfully",dismissable:!0}),"raw"!=this.$route.query.mode&&this.$router.push({name:"Calendars",params:{alerts:this.alerts}}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Se=xe,je=Object(f["a"])(Se,$e,ye,!1,null,null,null),Le=je.exports,Oe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CalendarLogs",params:{calendar_id:t.calendar_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CalendarEvents",params:{calendar_id:t.calendar_id}}}},[e("b-icon",{attrs:{icon:"list-ul",variant:"secondary"}}),t._v(" Events ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CalendarLocalizations",params:{calendar_id:t.calendar_id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:this.form,submit:t.onSubmit,form_source:this.form_source}})],1)],1)],1)])],1)])},Ne=[],Me={data(){return{alerts:[],calendar_id:this.$route.params.calendar_id,form:{},form_source:"/api/editorial-board/calendars/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.name},getItem(){let t="/api/editorial-board/calendars/"+this.calendar_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.calendar_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.calendar_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/calendars/"+this.calendar_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"calendar edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/calendars/"+this.calendar_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"calendar removed successfully",dismissable:!0}),this.$router.push({name:"Calendars",params:{alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete calendar?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},ze=Me,Te=Object(f["a"])(ze,Oe,Ne,!1,null,null,null),Pe=Te.exports,De=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Ie=[],Ee=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering_list:t.ordering_list,page_title:t.page_title,dates:t.dates,showCreatedBy:!1}})},Fe=[],Re={components:{CompleteTable:ge},props:{api_source:{type:String},page_title:{type:String}},data(){return{fields:["id","user",{key:"change_message",label:"Action"},{key:"action_time",label:"Date"}],dates:["action_time"],ordering_list:[{text:"Id",value:"id"},{text:"User",value:"user"},{text:"Date",value:"action_time"}]}}},We=Re,Be=Object(f["a"])(We,Ee,Fe,!1,null,null,null),Ae=Be.exports,Xe={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/calendars/"+this.$route.params.calendar_id+"/logs/",page_title:"Calendar logs"}}},He=Xe,qe=Object(f["a"])(He,De,Ie,!1,null,null,null),Ye=qe.exports,Ve=function(){var t=this,e=t._self._c;return e("ObjectLocks",{attrs:{object_api:t.object_api,object_id:t.object_id,page_title:t.page_title,addNewClass:t.addNewClass}})},Ge=[],Ue=function(){var t=this,e=t._self._c;return e("CompleteTable",{ref:"completeTable",attrs:{api_source:t.api_source,fields:t.fields,dates:t.dates,ordering_list:t.ordering_list,page_title:t.page_title,mainMethod:t.callApi,showCreatedBy:!1,showIsActive:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:t.addNewClass,params:{object_id:t.object_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0}])})},Je=[],Qe={name:"ObjectLocks",components:{CompleteTable:ge},props:{object_id:{type:String},object_api:{type:String},page_title:{type:String},addNewClass:{type:String}},data(){return{api_source:"",content_type:"",fields:["id","user",,{key:"lock.locked_time",label:"Lock date"},{key:"created",label:"Created"},"actions"],dates:["lock.locked_time","created"],ordering_list:[{text:"Id",value:"id"},{text:"User",value:"user"}],page_title:"Menu locks"}},methods:{callApi(t,e=null){let a=e||this.$refs.completeTable.page,s=this.object_api;t&&(s=t),this.axios.get(s).then(t=>{this.content_type=t.data.object_content_type,this.api_source="/api/editorial-board/locks/"+this.content_type+"/"+this.object_id+"/";let e=this.api_source+"?page="+a+"&search="+this.$refs.completeTable.search+"&ordering="+this.$refs.completeTable.sortDesc+this.$refs.completeTable.ordering;this.axios.get(e).then(t=>{this.$refs.completeTable.items=t.data.results,this.$refs.completeTable.per_page=t.data.per_page,this.$refs.completeTable.prev=t.data.previous,this.$refs.completeTable.next=t.data.next,this.$refs.completeTable.total_rows=t.data.count,this.$refs.completeTable.page=t.data.page,this.$refs.completeTable.isBusy=!1;let e={is_active:this.$refs.completeTable.is_active,page:this.$refs.completeTable.page,search:this.$refs.completeTable.search,ordering:this.$refs.completeTable.ordering,sortDesc:this.$refs.completeTable.sortDesc,created_by:this.$refs.completeTable.created_by};sessionStorage.setItem(this.$refs.completeTable.parent_name,JSON.stringify(e))})})}}},Ke=Qe,Ze=Object(f["a"])(Ke,Ue,Je,!1,null,null,null),ta=Ze.exports,ea={components:{ObjectLocks:ta},data(){return{addNewClass:"CalendarLockNew",object_api:"/api/editorial-board/calendars/"+this.$route.params.calendar_id+"/",object_id:this.$route.params.calendar_id,page_title:"Calendar locks"}}},aa=ea,sa=Object(f["a"])(aa,Ve,Ge,!1,null,null,null),ia=sa.exports,ra=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},oa=[],na={data(){return{alerts:[],calendar_id:this.$route.params.calendar_id,form:{},form_source:"/api/editorial-board/users/form/"}},methods:{retrieveObject(){let t="/api/editorial-board/calendars/"+this.calendar_id+"/";this.axios.get(t).then(t=>{this.content_type=t.data.object_content_type}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/locks/"+this.content_type+"/"+this.calendar_id+"/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"lock added successfully",dismissable:!0}),this.$router.push({name:"CalendarLocks",params:{calendar_id:this.calendar_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},mounted(){this.retrieveObject()}},la=na,da=Object(f["a"])(la,ra,oa,!1,null,null,null),ca=da.exports,ua=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"CalendarEventNew",params:{calendar_id:t.calendar_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"EventEdit",params:{event_id:a.item.event.id}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to event ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"CalendarEventEdit",params:{calendar_id:t.calendar_id,calendar_event_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},ma=[],ha={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/calendars/"+this.$route.params.calendar_id+"/events/",calendar_id:this.$route.params.calendar_id,fields:["id",{key:"event.publication_data.preview_image",label:"Preview image",thClass:"w-25"},{key:"event.publication_data.presentation_image",label:"Image",tthClass:"w-25"},{key:"event.publication_data.name",label:"Name"},{key:"event.publication_data.title",label:"Title"},"order",{key:"is_active",label:"Active"},"actions"],files:["event.publication_data.preview_image","event.publication_data.presentation_image"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"event__publication__name"},{text:"Title",value:"event__publication__title"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Calendar events"}}},pa=ha,_a=Object(f["a"])(pa,ua,ma,!1,null,null,null),ba=_a.exports,fa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},ga=[],va={data(){return{alerts:[],calendar_id:this.$route.params.calendar_id,form:{calendar:parseInt(this.$route.params.calendar_id)},form_source:"/api/editorial-board/calendars/"+this.$route.params.calendar_id+"/events/form/",add_modal_fields:{publication:this.$router.resolve({name:"PublicationNew"}).href}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/calendars/"+this.calendar_id+"/events/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"calendar event added successfully",dismissable:!0}),this.$router.push({name:"CalendarEvents",params:{calendar_id:this.calendar_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},wa=va,ka=Object(f["a"])(wa,fa,ga,!1,null,null,null),Ca=ka.exports,$a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CalendarEventLogs",params:{calendar_id:t.calendar_id,calendar_event_id:t.calendar_event_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},ya=[],xa={data(){return{alerts:[],calendar_id:this.$route.params.calendar_id,calendar_event_id:this.$route.params.calendar_event_id,form:{},form_source:"/api/editorial-board/calendars/"+this.$route.params.calendar_id+"/events/form/",add_modal_fields:{event:this.$router.resolve({name:"EventNew"}).href},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"calendar"==e||"event"==e?this.$set(this.form,e,a.id):this.$set(this.form,e,a);this.page_title=t.event.publication_data.title,this.$refs.form.getOptionsFromParent("event",[{text:t.event.publication_data.name+" ["+this.$date_formatter(t.event.date_start)+"  -  "+this.$date_formatter(t.event.date_end)+"]",value:t.event.id}])},getItem(){let t="/api/editorial-board/calendars/"+this.calendar_id+"/events/"+this.calendar_event_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.calendar_event_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.calendar_event_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/calendars/"+this.calendar_id+"/events/"+this.calendar_event_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"calendar event edited successfully",dismissable:!0}),this.page_title=t.data.event.publication_data.title,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/calendars/"+this.calendar_id+"/events/"+this.calendar_event_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"calendar event removed successfully",dismissable:!0}),this.$router.push({name:"CalendarEvents",params:{calendar_id:this.calendar_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete calendar event?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Sa=xa,ja=Object(f["a"])(Sa,$a,ya,!1,null,null,null),La=ja.exports,Oa=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Na=[],Ma={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/calendars/"+this.$route.params.calendar_id+"/events/"+this.$route.params.calendar_event_id+"/logs/",page_title:"Calendar event logs"}}},za=Ma,Ta=Object(f["a"])(za,Oa,Na,!1,null,null,null),Pa=Ta.exports,Da=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"CalendarLocalizationNew",params:{calendar_id:t.calendar_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"CalendarLocalizationEdit",params:{calendar_id:t.calendar_id,calendar_localization_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Ia=[],Ea={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/calendars/"+this.$route.params.calendar_id+"/localizations/",calendar_id:this.$route.params.calendar_id,fields:["id","language","name","description","order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Language",value:"language"},{text:"Name",value:"name"},{text:"Description",value:"description"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Calendar localizations"}}},Fa=Ea,Ra=Object(f["a"])(Fa,Da,Ia,!1,null,null,null),Wa=Ra.exports,Ba=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"Edit"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Aa=[],Xa={data(){return{alerts:[],calendar_id:this.$route.params.calendar_id,form:{calendar:parseInt(this.$route.params.calendar_id)},form_source:"/api/editorial-board/calendars/"+this.$route.params.calendar_id+"/localizations/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/calendars/"+this.calendar_id+"/localizations/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"calendar localization added successfully",dismissable:!0}),this.$router.push({name:"CalendarLocalizations",params:{calendar_id:this.calendar_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Ha=Xa,qa=Object(f["a"])(Ha,Ba,Aa,!1,null,null,null),Ya=qa.exports,Va=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CalendarLocalizationLogs",params:{calendar_id:t.calendar_id,calendar_localization_id:t.calendar_localization_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Ga=[],Ua={data(){return{alerts:[],calendar_id:this.$route.params.calendar_id,calendar_localization_id:this.$route.params.calendar_localization_id,form:{},form_source:"/api/editorial-board/calendars/"+this.$route.params.calendar_id+"/localizations/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.name},getItem(){let t="/api/editorial-board/calendars/"+this.$route.params.calendar_id+"/localizations/"+this.calendar_localization_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.calendar_localization_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.calendar_localization_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/calendars/"+this.$route.params.calendar_id+"/localizations/"+this.calendar_localization_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.pre_heading+" "+t.data.heading,this.alerts.push({variant:"success",message:"calendar localization edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/calendars/"+this.calendar_id+"/localizations/"+this.calendar_localization_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"calendar localization removed successfully",dismissable:!0}),this.$router.push({name:"CalendarLocalizations",params:{calendar_id:this.calendar_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete calendar localization?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Ja=Ua,Qa=Object(f["a"])(Ja,Va,Ga,!1,null,null,null),Ka=Qa.exports,Za=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},ts=[],es={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/calendars/"+this.$route.params.calendar_id+"/localizations/"+this.$route.params.calendar_localization_id+"/logs/",page_title:"Calendar localization logs"}}},as=es,ss=Object(f["a"])(as,Za,ts,!1,null,null,null),is=ss.exports,rs=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,dates:t.dates,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"EventNew"}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"PublicationEdit",params:{publication_id:a.item.publication}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to publication ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"EventEdit",params:{event_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-secondary",attrs:{to:{name:"EventLocks",params:{event_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"lock",variant:"white"}}),t._v(" Allowed users ")],1)]}}])})},os=[],ns={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/events/",fields:["id",{key:"publication_data.name",label:"Name"},{key:"publication_data.title",label:"Title"},{key:"publication_data.preview_image",label:"Preview image",thClass:"w-25"},{key:"publication_data.presentation_image",label:"Image",tthClass:"w-25"},{key:"date_start",label:"Start"},{key:"date_end",label:"End"},{key:"order",label:"Order"},{key:"is_active",label:"Active"},"actions"],dates:["date_start","date_end"],files:["publication_data.preview_image","publication_data.presentation_image"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"publication__name"},{text:"Title",value:"publication__title"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Events"}}},ls=ns,ds=Object(f["a"])(ls,rs,os,!1,null,null,null),cs=ds.exports,us=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},["raw"!=t.$route.query.mode?e("Breadcrumbs"):t._e(),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New event"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,add_modal_fields:t.add_modal_fields,form_source:t.form_source}})],1)],1)],1)])],1)])},ms=[],hs={data(){return{alerts:[],form:{},form_source:"/api/editorial-board/events/form/",add_modal_fields:{publication:this.$router.resolve({name:"PublicationNew"}).href}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/events/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"event added successfully",dismissable:!0}),"raw"!=this.$route.query.mode&&this.$router.push({name:"Events",params:{alerts:this.alerts}}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},ps=hs,_s=Object(f["a"])(ps,us,ms,!1,null,null,null),bs=_s.exports,fs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"EventLogs",params:{event_id:t.event_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-sm btn-outline-secondary",attrs:{to:{name:"PublicationEdit",params:{publication_id:t.publication_ref}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to publication ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:this.form,submit:t.onSubmit,add_modal_fields:t.add_modal_fields,form_source:this.form_source}})],1)],1)],1)])],1)])},gs=[],vs={data(){return{alerts:[],event_id:this.$route.params.event_id,form:{},form_source:"/api/editorial-board/events/form/",page_title:"",publication_ref:"",redis_alert:null,interval:null,date_fields:["date_start","date_end"],add_modal_fields:{publication:this.$router.resolve({name:"PublicationNew"}).href}}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.date_fields.includes(e)&&a?this.$set(this.form,e,a.substr(0,16).replace("T"," ")):this.$set(this.form,e,a);this.page_title=t.publication_data.title,this.publication_ref=t.publication_data.id,this.$refs.form.getOptionsFromParent("publication",[{text:t.publication_data.title,value:t.publication}])},getItem(){let t="/api/editorial-board/events/"+this.event_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.event_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.event_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/events/"+this.event_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"event edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/events/"+this.event_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"event removed successfully",dismissable:!0}),this.$router.push({name:"Events",params:{alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete event?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},ws=vs,ks=Object(f["a"])(ws,fs,gs,!1,null,null,null),Cs=ks.exports,$s=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},ys=[],xs={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/events/"+this.$route.params.event_id+"/logs/",page_title:"Event logs"}}},Ss=xs,js=Object(f["a"])(Ss,$s,ys,!1,null,null,null),Ls=js.exports,Os=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Ns=[],Ms={data(){return{alerts:[],event_id:this.$route.params.event_id,form:{},form_source:"/api/editorial-board/users/form/"}},methods:{retrieveObject(){let t="/api/editorial-board/events/"+this.event_id+"/";this.axios.get(t).then(t=>{this.content_type=t.data.object_content_type}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/locks/"+this.content_type+"/"+this.event_id+"/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"lock added successfully",dismissable:!0}),this.$router.push({name:"EventLocks",params:{event_id:this.event_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},mounted(){this.retrieveObject()}},zs=Ms,Ts=Object(f["a"])(zs,Os,Ns,!1,null,null,null),Ps=Ts.exports,Ds=function(){var t=this,e=t._self._c;return e("ObjectLocks",{attrs:{object_api:t.object_api,object_id:t.object_id,page_title:t.page_title,addNewClass:t.addNewClass}})},Is=[],Es={components:{ObjectLocks:ta},data(){return{addNewClass:"EventLockNew",object_api:"/api/editorial-board/events/"+this.$route.params.event_id+"/",object_id:this.$route.params.event_id,page_title:"Event locks"}}},Fs=Es,Rs=Object(f["a"])(Fs,Ds,Is,!1,null,null,null),Ws=Rs.exports,Bs=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"CarouselNew"}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"childs",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"CarouselItems",params:{carousel_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"list-ul",variant:"secondary"}}),t._v(" Items ")],1)]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"CarouselEdit",params:{carousel_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-secondary",attrs:{to:{name:"CarouselLocks",params:{carousel_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"lock",variant:"white"}}),t._v(" Allowed users ")],1)]}}])})},As=[],Xs={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/carousels/",fields:["id","name","description",{key:"is_active",label:"Active"},{key:"childs",label:"Related"},"actions"],ordering:"name",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"Description",value:"description"}],page_title:"Carousels"}}},Hs=Xs,qs=Object(f["a"])(Hs,Bs,As,!1,null,null,null),Ys=qs.exports,Vs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},["raw"!=t.$route.query.mode?e("Breadcrumbs"):t._e(),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New carousel"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Gs=[],Us={data(){return{alerts:[],form:{},form_source:"/api/editorial-board/carousels/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/carousels/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"carousel added successfully",dismissable:!0}),"raw"!=this.$route.query.mode&&this.$router.push({name:"Carousels",params:{alerts:this.alerts}}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Js=Us,Qs=Object(f["a"])(Js,Vs,Gs,!1,null,null,null),Ks=Qs.exports,Zs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CarouselLogs",params:{carousel_id:t.carousel_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CarouselItems",params:{carousel_id:t.carousel_id}}}},[e("b-icon",{attrs:{icon:"list-ul",variant:"secondary"}}),t._v(" Items ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:this.form,submit:t.onSubmit,form_source:this.form_source}})],1)],1)],1)])],1)])},ti=[],ei={data(){return{alerts:[],carousel_id:this.$route.params.carousel_id,form:{},form_source:"/api/editorial-board/carousels/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.name},getItem(){let t="/api/editorial-board/carousels/"+this.carousel_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.carousel_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.carousel_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/carousels/"+this.carousel_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"carousel edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/carousels/"+this.carousel_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"carousel removed successfully",dismissable:!0}),this.$router.push({name:"Carousels",params:{alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete carousel?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},ai=ei,si=Object(f["a"])(ai,Zs,ti,!1,null,null,null),ii=si.exports,ri=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},oi=[],ni={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/logs/",page_title:"Carousel logs"}}},li=ni,di=Object(f["a"])(li,ri,oi,!1,null,null,null),ci=di.exports,ui=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,dates:t.dates,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"CarouselItemNew",params:{carousel_id:t.carousel_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"childs",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"CarouselItemLinks",params:{carousel_id:t.carousel_id,carousel_item_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"link45deg",variant:"secondary"}}),t._v(" Links ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"CarouselItemLocalizations",params:{carousel_id:t.carousel_id,carousel_item_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1)]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"CarouselItemEdit",params:{carousel_id:t.carousel_id,carousel_item_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},mi=[],hi={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/",carousel_id:this.$route.params.carousel_id,fields:["id",{key:"image",thClass:"w-25"},{key:"mobile_image",thClass:"w-25"},"heading",{key:"date_start",label:"Date start"},{key:"date_end",label:"Date end"},"order",{key:"is_active",label:"Active"},{key:"childs",label:"Related"},"actions"],files:["image","mobile_image"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Heading",value:"heading"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],dates:["date_start","date_end"],page_title:"Carousel items"}}},pi=hi,_i=Object(f["a"])(pi,ui,mi,!1,null,null,null),bi=_i.exports,fi=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},gi=[],vi={data(){return{alerts:[],carousel_id:this.$route.params.carousel_id,form:{carousel:parseInt(this.$route.params.carousel_id)},form_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/form/",add_modal_fields:{image:this.$router.resolve({name:"MediaNew"}).href,mobile_image:this.$router.resolve({name:"MediaNew"}).href},files:{image:"",mobile_image:""}}},methods:{updateMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.$set(this.files,"image",t.data.file)})},updateMobileMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.$set(this.files,"mobile_image",t.data.file)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/carousels/"+this.carousel_id+"/items/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"carousel item added successfully",dismissable:!0}),this.$router.push({name:"CarouselItems",params:{carousel_id:this.carousel_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},watch:{"form.image":function(t,e){this.updateMedia(t)},"form.mobile_image":function(t,e){this.updateMobileMedia(t)}}},wi=vi,ki=Object(f["a"])(wi,fi,gi,!1,null,null,null),Ci=ki.exports,$i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CarouselItemLogs",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CarouselItemLinks",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id}}}},[e("b-icon",{attrs:{icon:"link45deg",variant:"secondary"}}),t._v(" Links ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CarouselItemLocalizations",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},yi=[],xi={data(){return{alerts:[],carousel_id:this.$route.params.carousel_id,carousel_item_id:this.$route.params.carousel_item_id,form:{},form_source:"/api/editorial-board/carousels/items/form/",add_modal_fields:{image:this.$router.resolve({name:"MediaNew"}).href,mobile_image:this.$router.resolve({name:"MediaNew"}).href},files:{image:"",mobile_image:""},date_fields:["date_start","date_end"],page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"image"==e&&a?(this.$set(this.form,e,a.id),this.$set(this.files,"image",t.image.file)):"mobile_image"==e&&a?(this.$set(this.form,e,a.id),this.$set(this.files,"mobile_image",t.mobile_image.file)):this.date_fields.includes(e)&&a?this.$set(this.form,e,a.substr(0,16).replace("T"," ")):this.$set(this.form,e,a);t.image&&this.$refs.form.getOptionsFromParent("image",[{text:t.image.title,value:t.image.id}]),t.mobile_image&&this.$refs.form.getOptionsFromParent("mobile_image",[{text:t.mobile_image.title,value:t.mobile_image.id}]),this.page_title=t.pre_heading+" "+t.heading},getItem(){let t="/api/editorial-board/carousels/"+this.carousel_id+"/items/"+this.carousel_item_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.carousel_item_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.carousel_item_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},updateMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.files.image=t.data.file})},updateMobileMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.files.mobile_image=t.data.file})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/carousels/"+this.carousel_id+"/items/"+this.carousel_item_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"carousel item edited successfully",dismissable:!0}),this.page_title=t.data.pre_heading+" "+t.data.heading,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/carousels/"+this.carousel_id+"/items/"+this.carousel_item_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"carousel item removed successfully",dismissable:!0}),this.$router.push({name:"CarouselItems",params:{carousel_id:this.carousel_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete carousel item?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)},watch:{"form.image":function(t,e){t&&t!=e&&this.updateMedia(t),t||(this.files.image="")},"form.mobile_image":function(t,e){t&&t!=e&&this.updateMobileMedia(t),t||(this.files.mobile_image="")}}},Si=xi,ji=Object(f["a"])(Si,$i,yi,!1,null,null,null),Li=ji.exports,Oi=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Ni=[],Mi={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/logs/",page_title:"Carousel item logs"}}},zi=Mi,Ti=Object(f["a"])(zi,Oi,Ni,!1,null,null,null),Pi=Ti.exports,Di=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"CarouselItemLinkNew",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"childs",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"CarouselItemLinkLocalizations",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id,carousel_item_link_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1)]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"CarouselItemLinkEdit",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id,carousel_item_link_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Ii=[],Ei={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/links/",carousel_id:this.$route.params.carousel_id,carousel_item_id:this.$route.params.carousel_item_id,fields:["id","title","title_preset","url","order",{key:"is_active",label:"Active"},{key:"childs",label:"Related"},"actions"],ordering_list:[{text:"Id",value:"id"},{text:"Title",value:"title"},{text:"URL",value:"url"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Carousel item links"}}},Fi=Ei,Ri=Object(f["a"])(Fi,Di,Ii,!1,null,null,null),Wi=Ri.exports,Bi=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("b-card-title",[t._v("New carousel item link")]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Ai=[],Xi={data(){return{alerts:[],carousel_id:this.$route.params.carousel_id,carousel_item_id:this.$route.params.carousel_item_id,form:{carousel_item:parseInt(this.$route.params.carousel_item_id)},form_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/links/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/carousels/"+this.carousel_id+"/items/"+this.carousel_item_id+"/links/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"carousel item link added successfully",dismissable:!0}),this.$router.push({name:"CarouselItemLinks",params:{carousel_id:this.carousel_id,carousel_item_id:this.carousel_item_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Hi=Xi,qi=Object(f["a"])(Hi,Bi,Ai,!1,null,null,null),Yi=qi.exports,Vi=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CarouselItemLinkLogs",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id,carousel_item_link_id:t.carousel_item_link_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CarouselItemLinkLocalizations",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id,carousel_item_link_id:t.carousel_item_link_id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{fields:t.fields,form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Gi=[],Ui={data(){return{alerts:[],carousel_id:this.$route.params.carousel_id,carousel_item_id:this.$route.params.carousel_item_id,carousel_item_link_id:this.$route.params.carousel_item_link_id,form:{},form_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/links/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.title},getItem(){let t="/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/links/"+this.carousel_item_link_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.carousel_item_link_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.carousel_item_link_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/links/"+this.carousel_item_link_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.title,this.alerts.push({variant:"success",message:"carousel item link edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/carousels/"+this.carousel_id+"/items/"+this.carousel_item_id+"/links/"+this.carousel_item_link_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"carousel item link removed successfully",dismissable:!0}),this.$router.push({name:"CarouselItemLinks",params:{carousel_id:this.carousel_id,carousel_item_id:this.carousel_item_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete carousel item link?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Ji=Ui,Qi=Object(f["a"])(Ji,Vi,Gi,!1,null,null,null),Ki=Qi.exports,Zi=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},tr=[],er={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/links/"+this.$route.params.carousel_item_link_id+"/logs/",page_title:"Carousel item link logs"}}},ar=er,sr=Object(f["a"])(ar,Zi,tr,!1,null,null,null),ir=sr.exports,rr=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"CarouselItemLocalizationNew",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"CarouselItemLocalizationEdit",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id,carousel_item_localization_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},or=[],nr={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/localizations/",carousel_id:this.$route.params.carousel_id,carousel_item_id:this.$route.params.carousel_item_id,fields:["id",{key:"image",thClass:"w-25"},{key:"mobile_image",thClass:"w-25"},"language","pre_heading","heading",,"description","order",{key:"is_active",label:"Active"},"actions"],files:["image","mobile_image"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Language",value:"language"},{text:"Pre-Heading",value:"pre_heading"},{text:"Heading",value:"heading"},{text:"Description",value:"description"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Carousel item localizations"}}},lr=nr,dr=Object(f["a"])(lr,rr,or,!1,null,null,null),cr=dr.exports,ur=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"Edit"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},mr=[],hr={data(){return{alerts:[],carousel_id:this.$route.params.carousel_id,carousel_item_id:this.$route.params.carousel_item_id,form:{carousel_item:parseInt(this.$route.params.carousel_item_id)},form_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/localizations/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/carousels/"+this.carousel_id+"/items/"+this.carousel_item_id+"/localizations/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"carousel item localization added successfully",dismissable:!0}),this.$router.push({name:"CarouselItemLocalizations",params:{carousel_id:this.carousel_id,carousel_item_id:this.carousel_item_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},pr=hr,_r=Object(f["a"])(pr,ur,mr,!1,null,null,null),br=_r.exports,fr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CarouselItemLocalizationLogs",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id,carousel_item_localization_id:t.carousel_item_localization_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},gr=[],vr={data(){return{alerts:[],carousel_id:this.$route.params.carousel_id,carousel_item_id:this.$route.params.carousel_item_id,carousel_item_localization_id:this.$route.params.carousel_item_localization_id,form:{},form_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/localizations/form/",add_modal_fields:{image:this.$router.resolve({name:"MediaNew"}).href,mobile_image:this.$router.resolve({name:"MediaNew"}).href},files:{image:"",mobile_image:""},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"image"==e&&a?(this.$set(this.form,e,a.id),this.$set(this.files,"image",t.image.file)):"mobile_image"==e&&a?(this.$set(this.form,e,a.id),this.$set(this.files,"mobile_image",t.mobile_image.file)):this.$set(this.form,e,a);t.image&&this.$refs.form.getOptionsFromParent("image",[{text:t.image.title,value:t.image.id}]),t.mobile_image&&this.$refs.form.getOptionsFromParent("mobile_image",[{text:t.mobile_image.title,value:t.mobile_image.id}]),this.page_title=t.pre_heading+" "+t.heading},getItem(){let t="/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/localizations/"+this.carousel_item_localization_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.carousel_item_localization_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.carousel_item_localization_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},updateMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.files.image=t.data.file})},updateMobileMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.files.mobile_image=t.data.file})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/localizations/"+this.carousel_item_localization_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.pre_heading+" "+t.data.heading,this.alerts.push({variant:"success",message:"carousel item localization edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/carousels/"+this.carousel_id+"/items/"+this.carousel_item_id+"/localizations/"+this.carousel_item_localization_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"carousel item localization removed successfully",dismissable:!0}),this.$router.push({name:"CarouselItemLocalizations",params:{carousel_id:this.carousel_id,carousel_item_id:this.carousel_item_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete carousel item localization?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)},watch:{"form.image":function(t,e){t&&t!=e&&this.updateMedia(t),t||(this.files.image="")},"form.mobile_image":function(t,e){t&&t!=e&&this.updateMobileMedia(t),t||(this.files.mobile_image="")}}},wr=vr,kr=Object(f["a"])(wr,fr,gr,!1,null,null,null),Cr=kr.exports,$r=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},yr=[],xr={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/localizations/"+this.$route.params.carousel_item_localization_id+"/logs/",page_title:"Carousel item localization logs"}}},Sr=xr,jr=Object(f["a"])(Sr,$r,yr,!1,null,null,null),Lr=jr.exports,Or=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"CarouselItemLinkLocalizationNew",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id,carousel_item_link_id:t.carousel_item_link_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"CarouselItemLinkLocalizationEdit",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id,carousel_item_link_id:t.carousel_item_link_id,carousel_item_link_localization_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Nr=[],Mr={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/links/"+this.$route.params.carousel_item_link_id+"/localizations/",carousel_id:this.$route.params.carousel_id,carousel_item_id:this.$route.params.carousel_item_id,carousel_item_link_id:this.$route.params.carousel_item_link_id,fields:["id","language","title","order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Title",value:"title"},{text:"Language",value:"language"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Carousel item link localizations"}}},zr=Mr,Tr=Object(f["a"])(zr,Or,Nr,!1,null,null,null),Pr=Tr.exports,Dr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"Edit"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Ir=[],Er={data(){return{alerts:[],carousel_id:this.$route.params.carousel_id,carousel_item_id:this.$route.params.carousel_item_id,carousel_item_link_id:this.$route.params.carousel_item_link_id,form:{carousel_item_link:parseInt(this.$route.params.carousel_item_link_id)},form_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/links/"+this.$route.params.carousel_item_link_id+"/localizations/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/carousels/"+this.carousel_id+"/items/"+this.carousel_item_id+"/links/"+this.carousel_item_link_id+"/localizations/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"carousel item link localization added successfully",dismissable:!0}),this.$router.push({name:"CarouselItemLinkLocalizations",params:{carousel_id:this.carousel_id,carousel_item_id:this.carousel_item_id,carousel_item_link_id:this.carousel_item_link_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Fr=Er,Rr=Object(f["a"])(Fr,Dr,Ir,!1,null,null,null),Wr=Rr.exports,Br=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"CarouselItemLinkLocalizationLogs",params:{carousel_id:t.carousel_id,carousel_item_id:t.carousel_item_id,carousel_item_link_id:t.carousel_item_link_id,carousel_item_link_localization_id:t.carousel_item_link_localization_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Ar=[],Xr={data(){return{alerts:[],carousel_id:this.$route.params.carousel_id,carousel_item_id:this.$route.params.carousel_item_id,carousel_item_link_id:this.$route.params.carousel_item_link_id,carousel_item_link_localization_id:this.$route.params.carousel_item_link_localization_id,form:{},form_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/links/"+this.$route.params.carousel_item_link_id+"/localizations/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.title},getItem(){let t="/api/editorial-board/carousels/"+this.carousel_id+"/items/"+this.carousel_item_id+"/links/"+this.carousel_item_link_id+"/localizations/"+this.carousel_item_link_localization_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.carousel_item_link_localization_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.carousel_item_link_localization_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/carousels/"+this.carousel_id+"/items/"+this.carousel_item_id+"/links/"+this.carousel_item_link_id+"/localizations/"+this.carousel_item_link_localization_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.title,this.alerts.push({variant:"success",message:"carousel item localization edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/carousels/"+this.carousel_id+"/items/"+this.carousel_item_id+"/links/"+this.carousel_item_link_id+"/localizations/"+this.carousel_item_link_localization_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"carousel item localization removed successfully",dismissable:!0}),this.$router.push({name:"CarouselItemLinkLocalizations",params:{carousel_id:this.carousel_id,carousel_item_id:this.carousel_item_id,carousel_item_link_id:this.carousel_item_link_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete carousel item link localization?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Hr=Xr,qr=Object(f["a"])(Hr,Br,Ar,!1,null,null,null),Yr=qr.exports,Vr=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Gr=[],Ur={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/items/"+this.$route.params.carousel_item_id+"/links/"+this.$route.params.carousel_item_link_id+"/localizations/"+this.$route.params.carousel_item_link_localization_id+"/logs/",page_title:"Carousel item link localization logs"}}},Jr=Ur,Qr=Object(f["a"])(Jr,Vr,Gr,!1,null,null,null),Kr=Qr.exports,Zr=function(){var t=this,e=t._self._c;return e("ObjectLocks",{attrs:{object_api:t.object_api,object_id:t.object_id,page_title:t.page_title,addNewClass:t.addNewClass}})},to=[],eo={components:{ObjectLocks:ta},data(){return{addNewClass:"CarouselLockNew",object_api:"/api/editorial-board/carousels/"+this.$route.params.carousel_id+"/",object_id:this.$route.params.carousel_id,page_title:"Carousel locks"}}},ao=eo,so=Object(f["a"])(ao,Zr,to,!1,null,null,null),io=so.exports,ro=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},oo=[],no={data(){return{alerts:[],carousel_id:this.$route.params.carousel_id,form:{},form_source:"/api/editorial-board/users/form/"}},methods:{retrieveObject(){let t="/api/editorial-board/carousels/"+this.carousel_id+"/";this.axios.get(t).then(t=>{this.content_type=t.data.object_content_type}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/locks/"+this.content_type+"/"+this.carousel_id+"/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"lock added successfully",dismissable:!0}),this.$router.push({name:"CarouselLocks",params:{carousel_id:this.carousel_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},mounted(){this.retrieveObject()}},lo=no,co=Object(f["a"])(lo,ro,oo,!1,null,null,null),uo=co.exports,mo=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"ContactNew"}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"childs",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"ContactInfos",params:{contact_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"list-ul",variant:"secondary"}}),t._v(" Informations ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"ContactLocalizations",params:{contact_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1)]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"ContactEdit",params:{contact_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-secondary",attrs:{to:{name:"ContactLocks",params:{contact_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"lock",variant:"white"}}),t._v(" Allowed users ")],1)]}}])})},ho=[],po={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/contacts/",fields:["id","name","description",{key:"contact_type",label:"Type"},{key:"is_active",label:"Active"},{key:"childs",label:"Related"},"actions"],ordering:"name",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"Description",value:"description"},{text:"Type",value:"contact_type"}],page_title:"Contacts"}}},_o=po,bo=Object(f["a"])(_o,mo,ho,!1,null,null,null),fo=bo.exports,go=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},["raw"!=t.$route.query.mode?e("Breadcrumbs"):t._e(),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New contact"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},vo=[],wo={data(){return{alerts:[],files:{image:""},form:{},form_source:"/api/editorial-board/contacts/form/",add_modal_fields:{image:this.$router.resolve({name:"MediaNew"}).href}}},methods:{updateMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.$set(this.files,"image",t.data.file)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/contacts/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"carousel added successfully",dismissable:!0}),"raw"!=this.$route.query.mode&&this.$router.push({name:"Contacts",params:{alerts:this.alerts}}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},watch:{"form.image":function(t,e){this.updateMedia(t)}}},ko=wo,Co=Object(f["a"])(ko,go,vo,!1,null,null,null),$o=Co.exports,yo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"ContactLogs",params:{contact_id:t.contact_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"ContactInfos",params:{contact_id:t.contact_id}}}},[e("b-icon",{attrs:{icon:"info-circle",variant:"secondary"}}),t._v(" Informations ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"ContactLocalizations",params:{carousel_id:t.carousel_id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},xo=[],So={data(){return{alerts:[],contact_id:this.$route.params.contact_id,form:{},form_source:"/api/editorial-board/contacts/form/",add_modal_fields:{image:this.$router.resolve({name:"MediaNew"}).href},files:{image:""},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"image"==e&&a?(this.$set(this.form,e,a.id),this.$set(this.files,"image",t.image.file)):this.$set(this.form,e,a);this.page_title=t.name,t.image&&this.$refs.form.getOptionsFromParent("image",[{text:t.image.title,value:t.image.id}])},getItem(){let t="/api/editorial-board/contacts/"+this.contact_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.contact_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.contact_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},updateMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.$set(this.files,"image",t.data.file)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/contacts/"+this.contact_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"contact edited successfully",dismissable:!0}),this.page_title=t.data.image.title,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/contacts/"+this.contact_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"contact removed successfully",dismissable:!0}),this.$router.push({name:"Contacts",params:{contact_id:this.contact_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete contact?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)},watch:{"form.image":function(t,e){t&&t!=e&&this.updateMedia(t),t||(this.files.image="")}}},jo=So,Lo=Object(f["a"])(jo,yo,xo,!1,null,null,null),Oo=Lo.exports,No=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Mo=[],zo={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/contacts/"+this.$route.params.contact_id+"/logs/",page_title:"Contact logs"}}},To=zo,Po=Object(f["a"])(To,No,Mo,!1,null,null,null),Do=Po.exports,Io=function(){var t=this,e=t._self._c;return e("ObjectLocks",{attrs:{object_api:t.object_api,object_id:t.object_id,page_title:t.page_title,addNewClass:t.addNewClass}})},Eo=[],Fo={components:{ObjectLocks:ta},data(){return{addNewClass:"ContactLockNew",object_api:"/api/editorial-board/contacts/"+this.$route.params.contact_id+"/",object_id:this.$route.params.contact_id,page_title:"Contact locks"}}},Ro=Fo,Wo=Object(f["a"])(Ro,Io,Eo,!1,null,null,null),Bo=Wo.exports,Ao=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Xo=[],Ho={data(){return{alerts:[],contact_id:this.$route.params.contact_id,form:{},form_source:"/api/editorial-board/users/form/"}},methods:{retrieveObject(){let t="/api/editorial-board/contacts/"+this.contact_id+"/";this.axios.get(t).then(t=>{this.content_type=t.data.object_content_type}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/locks/"+this.content_type+"/"+this.contact_id+"/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"lock added successfully",dismissable:!0}),this.$router.push({name:"ContactLocks",params:{contact_id:this.contact_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},mounted(){this.retrieveObject()}},qo=Ho,Yo=Object(f["a"])(qo,Ao,Xo,!1,null,null,null),Vo=Yo.exports,Go=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"ContactInfoNew",params:{contact_id:t.contact_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"childs",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"ContactInfoLocalizations",params:{contact_id:t.contact_id,contact_info_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1)]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"ContactInfoEdit",params:{contact_id:t.contact_id,contact_info_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Uo=[],Jo={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/contacts/"+this.$route.params.contact_id+"/infos/",contact_id:this.$route.params.contact_id,fields:["id","label","value",{key:"info_type",label:"Type"},"order",{key:"is_active",label:"Active"},{key:"childs",label:"Related"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Label",value:"label"},{text:"Type",value:"info_type"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Contact informations"}}},Qo=Jo,Ko=Object(f["a"])(Qo,Go,Uo,!1,null,null,null),Zo=Ko.exports,tn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},en=[],an={data(){return{alerts:[],contact_id:this.$route.params.contact_id,form:{contact:parseInt(this.$route.params.contact_id)},form_source:"/api/editorial-board/contacts/"+this.$route.params.contact_id+"/infos/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/contacts/"+this.contact_id+"/infos/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"contact information added successfully",dismissable:!0}),this.$router.push({name:"ContactInfos",params:{contact_id:this.contact_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},sn=an,rn=Object(f["a"])(sn,tn,en,!1,null,null,null),on=rn.exports,nn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"ContactInfoLogs",params:{contact_id:t.contact_id,contact_info_id:t.contact_info_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"ContactInfoLocalizations",params:{contact_id:t.contact_id,contact_info_id:t.contact_info_id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},ln=[],dn={data(){return{alerts:[],contact_id:this.$route.params.contact_id,contact_info_id:this.$route.params.contact_info_id,form:{},form_source:"/api/editorial-board/contacts/infos/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.label},getItem(){let t="/api/editorial-board/contacts/"+this.contact_id+"/infos/"+this.contact_info_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.contact_info_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.contact_info_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/contacts/"+this.contact_id+"/infos/"+this.contact_info_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"contact information edited successfully",dismissable:!0}),this.page_title=t.data.label,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/contacts/"+this.contact_id+"/infos/"+this.contact_info_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"contact information removed successfully",dismissable:!0}),this.$router.push({name:"ContactInfos",params:{contact_id:this.contact_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete contact information?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},cn=dn,un=Object(f["a"])(cn,nn,ln,!1,null,null,null),mn=un.exports,hn=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},pn=[],_n={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/contacts/"+this.$route.params.contact_id+"/infos/"+this.$route.params.contact_info_id+"/logs/",page_title:"Contact information logs"}}},bn=_n,fn=Object(f["a"])(bn,hn,pn,!1,null,null,null),gn=fn.exports,vn=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"ContactLocalizationNew",params:{contact_id:t.contact_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"ContactLocalizationEdit",params:{contact_id:t.contact_id,localization_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},wn=[],kn={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/contacts/"+this.$route.params.contact_id+"/localizations/",contact_id:this.$route.params.contact_id,fields:["id","language","name","description","order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Language",value:"language"},{text:"Name",value:"pre_heading"},{text:"Description",value:"description"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Contact localizations"}}},Cn=kn,$n=Object(f["a"])(Cn,vn,wn,!1,null,null,null),yn=$n.exports,xn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"Edit"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Sn=[],jn={data(){return{alerts:[],contact_id:this.$route.params.contact_id,form:{contact:parseInt(this.$route.params.contact_id)},form_source:"/api/editorial-board/contacts/"+this.$route.params.contact_id+"/localizations/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/contacts/"+this.contact_id+"/localizations/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"contact localization added successfully",dismissable:!0}),this.$router.push({name:"ContactLocalizations",params:{contact_id:this.contact_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Ln=jn,On=Object(f["a"])(Ln,xn,Sn,!1,null,null,null),Nn=On.exports,Mn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"ContactLocalizationLogs",params:{contact_id:t.contact_id,localization_id:t.localization_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},zn=[],Tn={data(){return{alerts:[],contact_id:this.$route.params.contact_id,localization_id:this.$route.params.localization_id,form:{},form_source:"/api/editorial-board/contacts/"+this.$route.params.contact_id+"/localizations/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.name},getItem(){let t="/api/editorial-board/contacts/"+this.$route.params.contact_id+"/localizations/"+this.localization_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.localization_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.localization_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/contacts/"+this.$route.params.contact_id+"/localizations/"+this.localization_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"contact localization edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/contacts/"+this.contact_id+"/localizations/"+this.localization_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"contact localization removed successfully",dismissable:!0}),this.$router.push({name:"ContactLocalizations",params:{contact_id:this.contact_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete contact localization?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Pn=Tn,Dn=Object(f["a"])(Pn,Mn,zn,!1,null,null,null),In=Dn.exports,En=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Fn=[],Rn={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/contacts/"+this.$route.params.contact_id+"/localizations/"+this.$route.params.localization_id+"/logs/",page_title:"Contact localization logs"}}},Wn=Rn,Bn=Object(f["a"])(Wn,En,Fn,!1,null,null,null),An=Bn.exports,Xn=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"ContactInfoLocalizationNew",params:{contact_id:t.contact_id,contact_info_id:t.contact_info_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"ContactInfoLocalizationEdit",params:{contact_id:t.contact_id,contact_info_id:t.contact_info_id,localization_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Hn=[],qn={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/contacts/"+this.$route.params.contact_id+"/infos/"+this.$route.params.contact_info_id+"/localizations/",contact_id:this.$route.params.contact_id,contact_info_id:this.$route.params.contact_info_id,fields:["id","language","label","value",,"order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Language",value:"language"},{text:"Label",value:"label"},{text:"Value",value:"value"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Contact information localizations"}}},Yn=qn,Vn=Object(f["a"])(Yn,Xn,Hn,!1,null,null,null),Gn=Vn.exports,Un=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"Edit"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Jn=[],Qn={data(){return{alerts:[],contact_id:this.$route.params.contact_id,contact_info_id:this.$route.params.contact_info_id,form:{contact_info:parseInt(this.$route.params.contact_info_id)},form_source:"/api/editorial-board/contacts/"+this.$route.params.contact_id+"/infos/"+this.$route.params.contact_info_id+"/localizations/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/contacts/"+this.contact_id+"/infos/"+this.contact_info_id+"/localizations/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"contact information localization added successfully",dismissable:!0}),this.$router.push({name:"ContactInfoLocalizations",params:{contact_id:this.contact_id,contact_info_id:this.contact_info_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Kn=Qn,Zn=Object(f["a"])(Kn,Un,Jn,!1,null,null,null),tl=Zn.exports,el=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"ContactInfoLocalizationLogs",params:{contact_id:t.contact_id,contact_info_id:t.contact_info_id,localization_id:t.localization_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},al=[],sl={data(){return{alerts:[],contact_id:this.$route.params.contact_id,contact_info_id:this.$route.params.contact_info_id,localization_id:this.$route.params.localization_id,form:{},form_source:"/api/editorial-board/contacts/"+this.$route.params.contact_id+"/infos/"+this.$route.params.contact_info_id+"/localizations/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.label},getItem(){let t="/api/editorial-board/contacts/"+this.$route.params.contact_id+"/infos/"+this.$route.params.contact_info_id+"/localizations/"+this.localization_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.localization_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.localization_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/contacts/"+this.$route.params.contact_id+"/infos/"+this.$route.params.contact_info_id+"/localizations/"+this.localization_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.label,this.alerts.push({variant:"success",message:"contact information localization edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/contacts/"+this.contact_id+"/infos/"+this.contact_info_id+"/localizations/"+this.localization_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"contact information localization removed successfully",dismissable:!0}),this.$router.push({name:"ContactInfoLocalizations",params:{contact_id:this.contact_id,contact_info_id:this.contact_info_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete contact information localization?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},il=sl,rl=Object(f["a"])(il,el,al,!1,null,null,null),ol=rl.exports,nl=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},ll=[],dl={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/contacts/"+this.$route.params.contact_id+"/infos/"+this.$route.params.contact_info_id+"/localizations/"+this.$route.params.localization_id+"/logs/",page_title:"Contact information localization logs"}}},cl=dl,ul=Object(f["a"])(cl,nl,ll,!1,null,null,null),ml=ul.exports,hl=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-4 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"CalendarNew"}}},[t._v(" Add new calendar now ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"calendar2-date",scale:"0.8"}}),t._v(" Calendars ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t.calendars.count?e("ul",t._l(t.calendars.results.slice(0,5),(function(a){return e("li",[e("router-link",{attrs:{to:{name:"CalendarEdit",params:{calendar_id:a.id}}}},[t._v(" "+t._s(a.name)+" ")]),e("br"),e("small",[t._v(t._s(t.$date_formatter(a.created)))])],1)})),0):e("span",[t._v("-")])])])],1)],1),e("div",{staticClass:"col-lg-4 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"ContactNew"}}},[t._v(" Add new contact now ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"person-lines-fill",scale:"0.8"}}),t._v(" Contacts ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t.contacts.count?e("ul",t._l(t.contacts.results.slice(0,5),(function(a){return e("li",[e("router-link",{attrs:{to:{name:"ContactEdit",params:{contact_id:a.id}}}},[t._v(" "+t._s(a.name)+" ")]),e("br"),e("small",[t._v(t._s(t.$date_formatter(a.created)))])],1)})),0):e("span",[t._v("-")])])])],1)],1),e("div",{staticClass:"col-lg-4 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"CarouselNew"}}},[t._v(" Add new carousel now ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"collection-play",scale:"0.8"}}),t._v(" Carousels ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t.carousels.count?e("ul",t._l(t.carousels.results.slice(0,5),(function(a){return e("li",[e("router-link",{attrs:{to:{name:"CarouselEdit",params:{carousel_id:a.id}}}},[t._v(" "+t._s(a.name)+" ")]),e("br"),e("small",[t._v(t._s(t.$date_formatter(a.created)))])],1)})),0):e("span",[t._v("-")])])])],1)],1),e("div",{staticClass:"col-lg-4 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"EventNew"}}},[t._v(" Add new event now ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"calendar2-event",scale:"0.8"}}),t._v(" Events ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t.events.count?e("ul",t._l(t.events.results.slice(0,5),(function(a){return e("li",[e("router-link",{attrs:{to:{name:"EventEdit",params:{event_id:a.id}}}},[t._v(" "+t._s(a.publication_data.title)+" ")]),e("br"),e("small",[t._v(t._s(t.$date_formatter(a.created)))])],1)})),0):e("span",[t._v("-")])])])],1)],1),e("div",{staticClass:"col-lg-4 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"MediaNew"}}},[t._v(" Add new media now ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"folder",scale:"0.8"}}),t._v(" Media ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t.media.count?e("ul",t._l(t.media.results.slice(0,5),(function(a){return e("li",[e("router-link",{attrs:{to:{name:"MediaEdit",params:{media_id:a.id}}}},[t._v(" "+t._s(a.title)+" ")]),e("br"),e("small",[t._v(t._s(t.$date_formatter(a.created)))])],1)})),0):e("span",[t._v("-")])])])],1)],1),e("div",{staticClass:"col-lg-4 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"MenuNew"}}},[t._v(" Add new menu now ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"menu-button-wide-fill",scale:"0.8"}}),t._v(" Menu ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t.menus.count?e("ul",t._l(t.menus.results.slice(0,5),(function(a){return e("li",[e("router-link",{attrs:{to:{name:"MenuEdit",params:{menu_id:a.id}}}},[t._v(" "+t._s(a.name)+" ")]),a.is_active?e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.6",variant:"success",title:"active"}}):e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.6",variant:"danger",title:"not active"}}),e("br"),e("small",[t._v(t._s(t.$date_formatter(a.created)))])],1)})),0):e("span",[t._v("-")])])])],1)],1),e("div",{staticClass:"col-lg-4 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{staticClass:"btn btn-info",attrs:{to:{name:"Websites"}}},[t._v(" Go to websites ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"columns-gap",scale:"0.8"}}),t._v(" Pages ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t.pages.count?e("ul",t._l(t.pages.results.slice(0,5),(function(a){return e("li",[e("router-link",{attrs:{to:{name:"WebpathPageEdit",params:{site_id:a.webpath.site,webpath_id:a.webpath.id,page_id:a.id}}}},[t._v(" "+t._s(a.name)+" ")]),a.is_active?e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.6",variant:"success",title:"active"}}):e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.6",variant:"danger",title:"not active"}}),(a.state="published")?e("b-icon",{staticClass:"ml-1",attrs:{icon:"circle-fill","font-scale":"0.6",variant:"success",title:"published"}}):e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.6",variant:"warning",title:"draft"}}),e("br"),t._v(" Webpath: "+t._s(a.webpath.full_name)+" "),e("br"),e("small",[t._v(t._s(t.$date_formatter(a.created)))])],1)})),0):e("span",[t._v("-")])])])],1)],1),e("div",{staticClass:"col-lg-4 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"PublicationNew"}}},[t._v(" Add new publication now ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"file-earmark-text",scale:"0.8"}}),t._v(" Publications ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t.publications.count?e("ul",t._l(t.publications.results.slice(0,5),(function(a){return e("li",[e("router-link",{attrs:{to:{name:"PublicationEdit",params:{publication_id:a.id}}}},[t._v(" "+t._s(a.full_name)+" ")]),a.is_active?e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.6",variant:"success",title:"active"}}):e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.6",variant:"danger",title:"not active"}}),e("br"),e("small",[t._v(t._s(t.$date_formatter(a.created)))])],1)})),0):e("span",[t._v("-")])])])],1)],1),e("div",{staticClass:"col-lg-4 col-md-6 col-sm-12 mb-3"},[e("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[e("router-link",{staticClass:"btn btn-info",attrs:{to:{name:"Websites"}}},[t._v(" Go to websites ")])]},proxy:!0}])},[e("b-card-text",[e("h4",{staticClass:"mt-2 mb-3"},[e("b-icon",{attrs:{icon:"globe",scale:"0.8"}}),t._v(" Webpaths ")],1),e("hr"),e("p",{staticClass:"mt-3"},[t.webpaths.count?e("ul",t._l(t.webpaths.results.slice(0,5),(function(a){return e("li",[e("router-link",{attrs:{to:{name:"WebpathEdit",params:{site_id:a.site,webpath_id:a.id}}}},[t._v(" "+t._s(a.full_name)+" ")]),a.is_active?e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.6",variant:"success",title:"active"}}):e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.6",variant:"danger",title:"not active"}}),e("br"),e("small",[t._v(t._s(t.$date_formatter(a.created)))])],1)})),0):e("span",[t._v("-")])])])],1)],1)])])])},pl=[],_l={data(){return{current_user:"",calendars:[],carousels:[],contacts:[],events:[],media:[],menus:[],pages:[],publications:[],webpaths:[],api_calendar:"/api/editorial-board/calendars/",api_carousel:"/api/editorial-board/carousels/",api_contact:"/api/editorial-board/contacts/",api_event:"/api/editorial-board/events/",api_media:"/api/editorial-board/medias/",api_menu:"/api/editorial-board/menus/",api_page:"/api/editorial-board/pages/",api_publication:"/api/editorial-board/publications/",api_page:"/api/editorial-board/sites/webpaths/pages/",api_webpath:"/api/editorial-board/sites/webpaths/"}},methods:{getCurrentUserID(){this.axios.get("/api/editorial-board/users/current/").then(t=>{this.current_user=t.data[0],this.callApis()})},callCalendarApi(t=""){this.axios.get(this.api_calendar+t).then(t=>{this.calendars=t.data})},callCarouselApi(t=""){this.axios.get(this.api_carousel+t).then(t=>{this.carousels=t.data})},callContactApi(t=""){this.axios.get(this.api_contact+t).then(t=>{this.contacts=t.data})},callEventApi(t=""){this.axios.get(this.api_event+t).then(t=>{this.events=t.data})},callMediaApi(t=""){this.axios.get(this.api_media+t).then(t=>{this.media=t.data})},callMenuApi(t=""){this.axios.get(this.api_menu+t).then(t=>{this.menus=t.data})},callPageApi(t=""){this.axios.get(this.api_page+t).then(t=>{this.pages=t.data})},callPublicationApi(t=""){this.axios.get(this.api_publication+t).then(t=>{this.publications=t.data})},callWebpathApi(t=""){this.axios.get(this.api_webpath+t).then(t=>{this.webpaths=t.data})},callApis(){let t="?created_by="+this.current_user+"&ordering=-created";this.callCalendarApi(t),this.callCarouselApi(t),this.callContactApi(t),this.callEventApi(t),this.callMediaApi(t),this.callMenuApi(t),this.callPageApi(t),this.callPublicationApi(t),this.callWebpathApi(t)}},mounted(){this.getCurrentUserID()}},bl=_l,fl=Object(f["a"])(bl,hl,pl,!1,null,null,null),gl=fl.exports,vl=function(){var t=this,e=t._self._c;return e("CompleteTable",{ref:"completeTable",attrs:{api_source:t.api_source,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showIsActive:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"MediaNew"}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"static_path",fn:function(t){return[e("a",{attrs:{href:t.data.value,title:t.data.value}},[e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"link45deg"}})],1)]}},{key:"custom_filter",fn:function(){return[e("div",{staticClass:"col col-12 col-sm"},[e("b-input-group",[e("b-form-select",{staticClass:"mb-3",attrs:{id:"media-filetype-select","aria-describedby":t.ariaDescribedby},on:{change:function(e){return t.updateMediaType(e)}},model:{value:t.file_type,callback:function(e){t.file_type=e},expression:"file_type"}},[e("b-form-select-option",{attrs:{selected:""}},[t._v(" - All file types - ")]),t._l(t.types_list,(function(a){return e("b-form-select-option",{attrs:{value:a}},[t._v(" "+t._s(a)+" ")])}))],2)],1)],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn-block btn btn-sm btn-info",attrs:{to:{name:"MediaEdit",params:{media_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-secondary",attrs:{to:{name:"MediaLocks",params:{media_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"lock",variant:"white"}}),t._v(" Allowed users ")],1)]}}])})},wl=[],kl=function(){var t=this,e=t._self._c;return e("b-input-group",[e("b-form-select",{staticClass:"mb-3",attrs:{id:"media-filetype-select",options:t.type_list,"aria-describedby":t.ariaDescribedby},on:{change:function(e){return t.updateMediaType()}},model:{value:t.media_type,callback:function(e){t.media_type=e},expression:"media_type"}})],1)},Cl=[],$l={name:"MediaTypeFilter",props:{media_type:{type:String}},data(){return{types_list:[]}},methods:{callMediaFiltersApi(){let t="/api/editorial-board/medias/allowed-filetypes/";this.axios.get(t).then(t=>{this.types_list=t,console.log(this.types_list)})},updateMediaTypeFilter(){this.$emit("updateMediaTypeFilter",this.media_type),this.$emit("callApi")}},mounted(){this.callMediaFiltersApi()}},yl=$l,xl=Object(f["a"])(yl,kl,Cl,!1,null,null,null),Sl=(xl.exports,{components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/medias/",collection_id:this.$route.params.collection_id,fields:["id","title",{key:"file",thClass:"w-25"},"description",{key:"file_type",label:"Type"},{key:"file_size",label:"Size (kb)"},{key:"file_dimensions",label:"Dimensions"},{key:"static_path",label:"Static path"},"actions"],files:["file"],ordering:"title",ordering_list:[{text:"Id",value:"id"},{text:"Title",value:"title"},{text:"Description",value:"description"},{text:"File type",value:"file_type"}],file_type:"",types_list:[],page_title:"Media"}},methods:{callMediaFiltersApi(){let t="/api/editorial-board/medias/allowed-filetypes/";this.axios.get(t).then(t=>{this.types_list=t.data})},updateMediaType(t=""){this.$refs.completeTable.custom_filters.file_type=t,this.$refs.completeTable.callApi(null,1)}},mounted(){this.file_type=this.$refs.completeTable.custom_filters.file_type,this.callMediaFiltersApi()}}),jl=Sl,Ll=Object(f["a"])(jl,vl,wl,!1,null,null,null),Ol=Ll.exports,Nl=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"MediaLogs",params:{media_id:t.media_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("p",[e("a",{attrs:{href:t.page_subtitle,target:"_blank"}},[t._v(" "+t._s(t.page_subtitle)+" ")])]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},Ml=[],zl={data(){return{alerts:[],media_id:this.$route.params.media_id,form:{},form_source:"/api/editorial-board/medias/form/",files:{},page_title:"",page_subtitle:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.title,this.page_subtitle=t.static_path,this.$set(this.files,"file",t.file),this.$delete(this.form,"file")},getItem(){let t="/api/editorial-board/medias/"+this.media_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.media_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.media_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/medias/"+this.media_id+"/";t.preventDefault();const a=new FormData;for(var s in this.form)this.form[s]||0==this.form[s]?a.append(s,this.form[s]):a.append(s,"");this.axios.patch(e,a,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.title,this.alerts.push({variant:"success",message:"media edited successfully",dismissable:!0}),this.$refs.form.loading=!1,this.$set(this.files,"file",t.data.file)}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/medias/"+this.media_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"media removed successfully",dismissable:!0}),this.$router.push({name:"Media",params:{alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete this media?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Tl=zl,Pl=Object(f["a"])(Tl,Nl,Ml,!1,null,null,null),Dl=Pl.exports,Il=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},["raw"!=t.$route.query.mode?e("Breadcrumbs"):t._e(),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New Media"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},El=[],Fl={data(){return{alerts:[],form:{},form_source:"/api/editorial-board/medias/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/medias/";t.preventDefault();const a=new FormData;for(var s in this.form)this.form[s]||0==this.form[s]?a.append(s,this.form[s]):a.append(s,"");this.axios.post(e,a,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"item added successfully",dismissable:!0}),"raw"!=this.$route.query.mode&&this.$router.push({name:"Media",params:{alerts:this.alerts}}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Rl=Fl,Wl=Object(f["a"])(Rl,Il,El,!1,null,null,null),Bl=Wl.exports,Al=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Xl=[],Hl={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/medias/"+this.$route.params.media_id+"/logs/",page_title:"Media logs"}}},ql=Hl,Yl=Object(f["a"])(ql,Al,Xl,!1,null,null,null),Vl=Yl.exports,Gl=function(){var t=this,e=t._self._c;return e("ObjectLocks",{attrs:{object_api:t.object_api,object_id:t.object_id,page_title:t.page_title,addNewClass:t.addNewClass}})},Ul=[],Jl={components:{ObjectLocks:ta},data(){return{addNewClass:"MediaLockNew",object_api:"/api/editorial-board/medias/"+this.$route.params.media_id+"/",object_id:this.$route.params.media_id,page_title:"Media locks"}}},Ql=Jl,Kl=Object(f["a"])(Ql,Gl,Ul,!1,null,null,null),Zl=Kl.exports,td=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},ed=[],ad={data(){return{alerts:[],media_id:this.$route.params.media_id,form:{},form_source:"/api/editorial-board/users/form/"}},methods:{retrieveObject(){let t="/api/editorial-board/medias/"+this.media_id+"/";this.axios.get(t).then(t=>{this.content_type=t.data.object_content_type}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/locks/"+this.content_type+"/"+this.media_id+"/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"lock added successfully",dismissable:!0}),this.$router.push({name:"MediaLocks",params:{media_id:this.media_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},mounted(){this.retrieveObject()}},sd=ad,id=Object(f["a"])(sd,td,ed,!1,null,null,null),rd=id.exports,od=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"MediaCollectionNew"}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"childs",fn:function(a){return[e("router-link",{staticClass:"mr-3 btn btn-sm btn-outline-secondary",attrs:{to:{name:"MediaCollectionItems",params:{collection_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"list-ul",variant:"secondary"}}),t._v(" Items ")],1)]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"mr-3 btn btn-block btn-sm btn-info",attrs:{to:{name:"MediaCollectionEdit",params:{collection_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-secondary",attrs:{to:{name:"MediaCollectionLocks",params:{collection_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"lock",variant:"white"}}),t._v(" Allowed users ")],1)]}}])})},nd=[],ld={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/media-collections/",fields:["id","name","description","tags",{key:"is_active",label:"Active"},{key:"childs",label:"Related"},"actions"],ordering:"name",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"Description",value:"description"},{text:"State",value:"is_active"}],page_title:"Media collections"}}},dd=ld,cd=Object(f["a"])(dd,od,nd,!1,null,null,null),ud=cd.exports,md=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},["raw"!=t.$route.query.mode?e("Breadcrumbs"):t._e(),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New Media collection"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,tag_fields:t.tag_fields}})],1)],1)],1)])],1)])},hd=[],pd={data(){return{alerts:[],form:{},form_source:"/api/editorial-board/media-collections/form/",tag_fields:["tags"]}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/media-collections/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"item added successfully",dismissable:!0}),"raw"!=this.$route.query.mode&&this.$router.push({name:"MediaCollections",params:{alerts:this.alerts}}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},_d=pd,bd=Object(f["a"])(_d,md,hd,!1,null,null,null),fd=bd.exports,gd=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"MediaCollectionLogs",params:{collection_id:t.collection_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{to:{name:"MediaCollectionItems",params:{collection_id:t.collection_id}}}},[e("b-icon",{attrs:{icon:"list-ul",variant:"secondary"}}),t._v(" Items ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,tag_fields:t.tag_fields}})],1)],1)],1)])],1)])},vd=[],wd={data(){return{alerts:[],collection_id:this.$route.params.collection_id,form:{},form_source:"/api/editorial-board/media-collections/form/",tag_fields:["tags"],page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.name},getItem(){let t="/api/editorial-board/media-collections/"+this.collection_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.collection_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.collection_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/media-collections/"+this.collection_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"media collection edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/media-collections/"+this.collection_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"media collection removed successfully",dismissable:!0}),this.$router.push({name:"MediaCollections",params:{alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete media collection?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},kd=wd,Cd=Object(f["a"])(kd,gd,vd,!1,null,null,null),$d=Cd.exports,yd=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},xd=[],Sd={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/media-collections/"+this.$route.params.collection_id+"/logs/",page_title:"Media Collection logs"}}},jd=Sd,Ld=Object(f["a"])(jd,yd,xd,!1,null,null,null),Od=Ld.exports,Nd=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"MediaCollectionItemNew",params:{collection_id:t.collection_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"MediaCollectionItemEdit",params:{collection_id:t.collection_id,collection_item_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Md=[],zd={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/media-collections/"+this.$route.params.collection_id+"/items/",collection_id:this.$route.params.collection_id,fields:["id",{key:"media.title",label:"Media"},{key:"media.file",label:"File",thClass:"w-25"},"order",{key:"is_active",label:"Active"},"actions"],files:["media.file"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Media collection items"}}},Td=zd,Pd=Object(f["a"])(Td,Nd,Md,!1,null,null,null),Dd=Pd.exports,Id=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"Edit"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields,files:t.files}})],1)],1)],1)])],1)])},Ed=[],Fd={data(){return{alerts:[],collection_id:this.$route.params.collection_id,form:{collection:parseInt(this.$route.params.collection_id)},form_source:"/api/editorial-board/media-collections/"+this.$route.params.collection_id+"/items/form/",add_modal_fields:{media:this.$router.resolve({name:"MediaNew"}).href},files:{media:""}}},methods:{updateMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.$set(this.files,"media",t.data.file)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/media-collections/"+this.collection_id+"/items/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"media collection item added successfully",dismissable:!0}),this.$router.push({name:"MediaCollectionItems",params:{collection_id:this.collection_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},watch:{"form.media":function(t,e){this.updateMedia(t)}}},Rd=Fd,Wd=Object(f["a"])(Rd,Id,Ed,!1,null,null,null),Bd=Wd.exports,Ad=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"MediaCollectionItemLogs",params:{collection_id:t.collection_id,collection_item_id:t.collection_item_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields,files:t.files}})],1)],1)],1)])],1)])},Xd=[],Hd={data(){return{alerts:[],collection_id:this.$route.params.collection_id,collection_item_id:this.$route.params.collection_item_id,form:{},form_source:"/api/editorial-board/media-collections/"+this.$route.params.collection_id+"/items/form/",add_modal_fields:{media:this.$router.resolve({name:"MediaNew"}).href},files:{media:""},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"media"==e&&a?(this.$set(this.form,e,a.id),this.$set(this.files,"media",t.media.file)):this.$set(this.form,e,a);t.media&&(this.page_title=t.media.title,this.$refs.form.getOptionsFromParent("media",[{text:t.media.title,value:t.media.id}]))},getItem(){let t="/api/editorial-board/media-collections/"+this.collection_id+"/items/"+this.collection_item_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.collection_item_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.collection_item_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},updateMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.$set(this.files,"media",t.data.file)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/media-collections/"+this.collection_id+"/items/"+this.collection_item_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"media collection item edited successfully",dismissable:!0}),this.page_title=t.data.media.title,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/media-collections/"+this.collection_id+"/items/"+this.collection_item_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"media collection item removed successfully",dismissable:!0}),this.$router.push({name:"MediaCollectionItems",params:{collection_id:this.collection_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete media collection item?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)},watch:{"form.media":function(t,e){t&&t!=e&&this.updateMedia(t),t||(this.files.media="")}}},qd=Hd,Yd=Object(f["a"])(qd,Ad,Xd,!1,null,null,null),Vd=Yd.exports,Gd=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Ud=[],Jd={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/media-collections/"+this.$route.params.collection_id+"/items/"+this.$route.params.collection_item_id+"/logs/",page_title:"Media Collection item logs"}}},Qd=Jd,Kd=Object(f["a"])(Qd,Gd,Ud,!1,null,null,null),Zd=Kd.exports,tc=function(){var t=this,e=t._self._c;return e("ObjectLocks",{attrs:{object_api:t.object_api,object_id:t.object_id,page_title:t.page_title,addNewClass:t.addNewClass}})},ec=[],ac={components:{ObjectLocks:ta},data(){return{addNewClass:"MediaCollectionLockNew",object_api:"/api/editorial-board/media-collections/"+this.$route.params.collection_id+"/",object_id:this.$route.params.collection_id,page_title:"Media collection locks"}}},sc=ac,ic=Object(f["a"])(sc,tc,ec,!1,null,null,null),rc=ic.exports,oc=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},nc=[],lc={data(){return{alerts:[],collection_id:this.$route.params.collection_id,form:{},form_source:"/api/editorial-board/users/form/"}},methods:{retrieveObject(){let t="/api/editorial-board/media-collections/"+this.collection_id+"/";this.axios.get(t).then(t=>{this.content_type=t.data.object_content_type}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/locks/"+this.content_type+"/"+this.collection_id+"/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"lock added successfully",dismissable:!0}),this.$router.push({name:"MediaCollectionLocks",params:{media_id:this.collection_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},mounted(){this.retrieveObject()}},dc=lc,cc=Object(f["a"])(dc,oc,nc,!1,null,null,null),uc=cc.exports,mc=function(){var t=this,e=t._self._c;return e("CompleteTable",{ref:"completeTable",attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"MenuNew"}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"childs",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"MenuItems",params:{menu_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"list-ul",variant:"secondary"}}),t._v(" Items ")],1)]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"MenuEdit",params:{menu_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1),e("b-button",{staticClass:"btn-block text-white",attrs:{size:"sm",variant:"warning"},on:{click:function(e){return t.cloneModal(a.item)}}},[e("b-icon",{attrs:{icon:"files",variant:"white"}}),t._v(" Clone ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-secondary",attrs:{to:{name:"MenuLocks",params:{menu_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"lock",variant:"white"}}),t._v(" Allowed users ")],1)]}}])})},hc=[],pc={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/menus/",fields:["id","name",{key:"is_active",label:"Active"},{key:"childs",label:"Related"},"actions"],ordering:"name",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"State",value:"is_active"}],page_title:"Menus"}},methods:{clone(t){this.axios.get(this.api_source+t+"/clone/").then(t=>{this.$refs.completeTable.alerts.push({variant:"success",message:"item cloned successfully",dismissable:!0}),this.$refs.completeTable.callApi()}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},cloneModal(t){this.$bvModal.msgBoxConfirm("Do you want really clone item?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"success",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(e=>{e&&this.clone(t.id)})}}},_c=pc,bc=Object(f["a"])(_c,mc,hc,!1,null,null,null),fc=bc.exports,gc=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"MenuLogs",params:{menu_id:t.menu_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-sm btn-outline-secondary",attrs:{to:{name:"MenuItems",params:{menu_id:t.menu_id}}}},[e("b-icon",{attrs:{icon:"list-ul",variant:"secondary"}}),t._v(" Items ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"text-white mx-md-1",attrs:{size:"sm",variant:"warning"},on:{click:function(e){return t.cloneModal()}}},[e("b-icon",{attrs:{icon:"files",variant:"white"}}),t._v(" Clone ")],1),e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:this.form,submit:t.onSubmit,form_source:this.form_source}})],1)],1)],1)])],1)])},vc=[],wc={data(){return{alerts:[],menu_id:this.$route.params.menu_id,form:{},form_source:"/api/editorial-board/menus/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.name},getItem(){let t="/api/editorial-board/menus/"+this.menu_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.menu_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.menu_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/menus/"+this.menu_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"menu edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},clone(){this.axios.get("/api/editorial-board/menus/"+this.menu_id+"/clone/").then(t=>{this.alerts.push({variant:"success",message:"menu cloned successfully",dismissable:!0}),this.$router.push({name:"MenuEdit",params:{menu_id:t.data.id,alerts:this.alerts}}).catch(()=>{}),this.menu_id=t.data.id,this.page_title=t.data.name}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},cloneModal(){this.$bvModal.msgBoxConfirm("Do you want really clone item?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"success",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.clone()})},remove(){this.axios.delete("/api/editorial-board/menus/"+this.menu_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"menu removed successfully",dismissable:!0}),this.$router.push({name:"Menus",params:{alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete menu?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},kc=wc,Cc=Object(f["a"])(kc,gc,vc,!1,null,null,null),$c=Cc.exports,yc=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},["raw"!=t.$route.query.mode?e("Breadcrumbs"):t._e(),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New menu"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},xc=[],Sc={data(){return{alerts:[],form:{},form_source:"/api/editorial-board/menus/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/menus/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"menu added successfully",dismissable:!0}),"raw"!=this.$route.query.mode&&this.$router.push({name:"Menus",params:{alerts:this.alerts}}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},jc=Sc,Lc=Object(f["a"])(jc,yc,xc,!1,null,null,null),Oc=Lc.exports,Nc=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Mc=[],zc={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/menus/"+this.$route.params.menu_id+"/logs/",page_title:"Menu logs"}}},Tc=zc,Pc=Object(f["a"])(Tc,Nc,Mc,!1,null,null,null),Dc=Pc.exports,Ic=function(){var t=this,e=t._self._c;return e("ObjectLocks",{attrs:{object_api:t.object_api,object_id:t.object_id,page_title:t.page_title,addNewClass:t.addNewClass}})},Ec=[],Fc={components:{ObjectLocks:ta},data(){return{addNewClass:"MenuLockNew",object_api:"/api/editorial-board/menus/"+this.$route.params.menu_id+"/",object_id:this.$route.params.menu_id,page_title:"Menu locks"}}},Rc=Fc,Wc=Object(f["a"])(Rc,Ic,Ec,!1,null,null,null),Bc=Wc.exports,Ac=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Xc=[],Hc={data(){return{alerts:[],menu_id:this.$route.params.menu_id,form:{},form_source:"/api/editorial-board/users/form/"}},methods:{retrieveObject(){let t="/api/editorial-board/menus/"+this.menu_id+"/";this.axios.get(t).then(t=>{this.content_type=t.data.object_content_type}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/locks/"+this.content_type+"/"+this.menu_id+"/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"lock added successfully",dismissable:!0}),this.$router.push({name:"MenuLocks",params:{menu_id:this.menu_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},mounted(){this.retrieveObject()}},qc=Hc,Yc=Object(f["a"])(qc,Ac,Xc,!1,null,null,null),Vc=Yc.exports,Gc=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("div",{staticClass:"text-right mb-3"},[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"MenuItemNew",params:{menu_id:t.menu_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)],1),e("div",{staticClass:"row pt-3"},[e("div",{staticClass:"col col-12 col-sm"},[e("b-form-input",{staticClass:"mb-3",attrs:{placeholder:"Search...",type:"search"},on:{input:function(e){return t.filterTable()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),e("b-table",{ref:"table",attrs:{id:"my-table",striped:"",hover:"",responsive:"",busy:t.isBusy,fields:t.fields,filter:t.filter,"filter-included-fields":t.filterOn,items:t.items},scopedSlots:t._u([{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center text-danger my-2"},[e("b-spinner",{staticClass:"align-middle mr-3",attrs:{small:"",type:"grow"}}),e("strong",[t._v("loading data...")])],1)]},proxy:!0},{key:"cell(parent_name)",fn:function(e){return[t._v(" "+t._s(e.value||"-")+" ")]}},{key:"cell(is_active)",fn:function(a){return[a.value?e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"check-circle-fill",variant:"success"},on:{click:function(e){return t.changeStatus(a.item.id)}}}):e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"dash-circle-fill",variant:"danger"},on:{click:function(e){return t.changeStatus(a.item.id)}}})]}},{key:"cell(related)",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"MenuItemLocalizations",params:{menu_id:t.menu_id,menu_item_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1)]}},{key:"cell(actions)",fn:function(a){return[e("router-link",{staticClass:"btn mr-1 btn-sm btn-info",attrs:{to:{name:"MenuItemEdit",params:{menu_id:t.menu_id,menu_item_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1),e("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.deleteModal(a.item)}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)]}}])}),t.prev?e("b-button",{staticClass:"float-left",attrs:{variant:"outline-secondary"},on:{click:function(e){return t.callApi(t.prev)}}},[t._v(" Previous page ")]):t._e(),t.next?e("b-button",{staticClass:"float-right",attrs:{variant:"outline-secondary"},on:{click:function(e){return t.callApi(t.next)}}},[t._v(" Next page ")]):t._e()],1)],1)],1)])],1)])},Uc=[],Jc={components:{OrderingFilter:pe},data(){return{alerts:this.$route.params.alerts||[],menu_id:this.$route.params.menu_id,fields:["id","name",{key:"parent_name",label:"Parent"},"order",{key:"is_active",label:"Active"},{key:"related",label:"Related"},"actions"],filter:null,filterOn:["name","parent_name"],isBusy:!0,items:[],page_title:"",search:"",sortDesc:"",ordering:"id",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"Parent",value:"parent_name"},{text:"Order",value:"order"},{text:"State",value:"is_active"}]}},methods:{get_childs(t){t.name="– ".repeat(t.level)+t.name,t.level>1&&(t.name="┊  "+t.name),this.items.push(t),t.childs&&t.childs.forEach(t=>this.get_childs(t))},callApi(t){let e="/api/editorial-board/menus/"+this.menu_id+"/items/";t&&(e=t),this.axios.get(e).then(t=>{t.data.childs.forEach(t=>this.get_childs(t)),this.page_title=t.data.name+" items",this.isBusy=!1})},changeStatus(t){let e=this.items.find(e=>e.id===t);this.axios.patch("/api/editorial-board/menus/"+this.menu_id+"/items/"+e.id+"/",{is_active:!e.is_active},{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{e.is_active=t.data.is_active,this.alerts.push({variant:"success",message:t.data.name+" status changed successfully",dismissable:!0})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},remove(t){this.axios.delete("/api/editorial-board/menus/"+this.menu_id+"/items/"+t+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(e=>{this.items.splice(this.items.findIndex(e=>e.id===t),1),this.alerts.push({variant:"success",message:"menu item removed successfully",dismissable:!0})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(t){this.$bvModal.msgBoxConfirm("Do you want really delete menu item?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(e=>{e&&this.remove(t.id)})},filterTable(){let t=document.getElementById("my-table");for(let e,a=0;e=t.rows[a];a++)if(""==this.search)e.hidden=!1;else{let t=this.search.toLowerCase(),a=e.cells[1].textContent.toLowerCase();a.includes(t)?e.hidden=!1:e.hidden=!0}}},mounted(){this.callApi()}},Qc=Jc,Kc=Object(f["a"])(Qc,Gc,Uc,!1,null,null,null),Zc=Kc.exports,tu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"MenuItemLogs",params:{menu_id:t.menu_id,menu_item_id:t.menu_item_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"MenuItemLocalizations",params:{menu_id:t.menu_id,menu_item_id:t.menu_item_id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},eu=[],au={data(){return{alerts:[],menu_id:this.$route.params.menu_id,menu_item_id:this.$route.params.menu_item_id,form:{},form_source:"/api/editorial-board/menus/"+this.$route.params.menu_id+"/items/form/",files:{},page_title:"",add_modal_fields:{inherited_content:this.$router.resolve({name:"PublicationNew"}).href,publication:this.$router.resolve({name:"PublicationNew"}).href},redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"webpath"==e||"inherited_content"==e||"publication"==e?a&&this.$set(this.form,e,a.id):this.$set(this.form,e,a);this.page_title=t.name,t.webpath&&this.$refs.form.getOptionsFromParent("webpath",[{text:t.webpath.name,value:t.webpath.id}]),t.inherited_content&&this.$refs.form.getOptionsFromParent("inherited_content",[{text:t.inherited_content.full_name,value:t.inherited_content.id}]),t.publication&&this.$refs.form.getOptionsFromParent("publication",[{text:t.publication.full_name,value:t.publication.id}])},getItem(){let t="/api/editorial-board/menus/"+this.menu_id+"/items/"+this.menu_item_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.menu_item_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.menu_item_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/menus/"+this.menu_id+"/items/"+this.menu_item_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"menu item edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/menus/"+this.menu_id+"/items/"+this.menu_item_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"menu item removed successfully",dismissable:!0}),this.$router.push({name:"MenuItems",params:{menu_id:this.menu_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete menu item?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},su=au,iu=Object(f["a"])(su,tu,eu,!1,null,null,null),ru=iu.exports,ou=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},nu=[],lu={data(){return{alerts:[],menu_id:this.$route.params.menu_id,form:{menu:parseInt(this.$route.params.menu_id)},form_source:"/api/editorial-board/menus/"+this.$route.params.menu_id+"/items/form/",add_modal_fields:{inherited_content:this.$router.resolve({name:"PublicationNew"}).href,publication:this.$router.resolve({name:"PublicationNew"}).href}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/menus/"+this.menu_id+"/items/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"menu item added successfully",dismissable:!0}),this.$router.push({name:"MenuItems",params:{menu_id:this.menu_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},du=lu,cu=Object(f["a"])(du,ou,nu,!1,null,null,null),uu=cu.exports,mu=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},hu=[],pu={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/menus/"+this.$route.params.menu_id+"/items/"+this.$route.params.menu_item_id+"/logs/",page_title:"Menu item logs"}}},_u=pu,bu=Object(f["a"])(_u,mu,hu,!1,null,null,null),fu=bu.exports,gu=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"MenuItemLocalizationNew",params:{menu_id:t.menu_id,menu_item_id:t.menu_item_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"MenuItemLocalizationEdit",params:{menu_id:t.menu_id,menu_item_id:t.menu_item_id,menu_item_localization_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},vu=[],wu={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/menus/"+this.$route.params.menu_id+"/items/"+this.$route.params.menu_item_id+"/localizations/",menu_id:this.$route.params.menu_id,menu_item_id:this.$route.params.menu_item_id,fields:["id","language","name",{key:"is_active",label:"Active"},"actions"],ordering:"language",ordering_list:[{text:"Id",value:"id"},{text:"Language",value:"language"},{text:"Name",value:"name"},{text:"State",value:"is_active"}],page_title:"Menu item localizations"}}},ku=wu,Cu=Object(f["a"])(ku,gu,vu,!1,null,null,null),$u=Cu.exports,yu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"MenuItemLocalizationLogs",params:{menu_id:t.menu_id,menu_item_id:t.menu_item_id,menu_item_localization_id:t.menu_item_localization_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},xu=[],Su={data(){return{alerts:[],menu_id:this.$route.params.menu_id,menu_item_id:this.$route.params.menu_item_id,menu_item_localization_id:this.$route.params.menu_item_localization_id,form:{},form_source:"/api/editorial-board/menus/"+this.$route.params.menu_id+"/items/"+this.$route.params.menu_item_id+"/localizations/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.name},getItem(){let t="/api/editorial-board/menus/"+this.$route.params.menu_id+"/items/"+this.$route.params.menu_item_id+"/localizations/"+this.menu_item_localization_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.menu_item_localization_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.menu_item_localization_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/menus/"+this.$route.params.menu_id+"/items/"+this.$route.params.menu_item_id+"/localizations/"+this.menu_item_localization_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"menu item localization edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/carousels/"+this.menu_id+"/items/"+this.menu_item_id+"/localizations/"+this.menu_item_localization_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"menu item localization removed successfully",dismissable:!0}),this.$router.push({name:"MenuItemLocalizations",params:{carousel_id:this.menu_id,carousel_item_id:this.menu_item_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete menu item localization?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},ju=Su,Lu=Object(f["a"])(ju,yu,xu,!1,null,null,null),Ou=Lu.exports,Nu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"Edit"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Mu=[],zu={data(){return{alerts:[],menu_id:this.$route.params.menu_id,menu_item_id:this.$route.params.menu_item_id,form:{item:parseInt(this.$route.params.menu_item_id)},form_source:"/api/editorial-board/menus/"+this.$route.params.menu_id+"/items/"+this.$route.params.menu_item_id+"/localizations/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/menus/"+this.menu_id+"/items/"+this.menu_item_id+"/localizations/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"menu item localization added successfully",dismissable:!0}),this.$router.push({name:"MenuItemLocalizations",params:{menu_id:this.menu_id,menu_item_id:this.menu_item_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Tu=zu,Pu=Object(f["a"])(Tu,Nu,Mu,!1,null,null,null),Du=Pu.exports,Iu=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Eu=[],Fu={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/menus/"+this.$route.params.menu_id+"/items/"+this.$route.params.menu_item_id+"/localizations/"+this.$route.params.menu_item_localization_id+"/logs/",page_title:"Menu item localization logs"}}},Ru=Fu,Wu=Object(f["a"])(Ru,Iu,Eu,!1,null,null,null),Bu=Wu.exports,Au=function(){var t=this,e=t._self._c;return e("CompleteTable",{ref:"completeTable",attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"NewsletterNew"}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"childs",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"NewsletterMessages",params:{newsletter_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"chat-left-text",variant:"secondary"}}),t._v(" Messages ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"NewsletterSubscriptions",params:{newsletter_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"person-check",variant:"secondary"}}),t._v(" Subscriptions ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"NewsletterTestSubscriptions",params:{newsletter_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"person",variant:"secondary"}}),t._v(" Test Subscriptions ")],1)]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"NewsletterEdit",params:{newsletter_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-secondary",attrs:{to:{name:"NewsletterLocks",params:{newsletter_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"lock",variant:"white"}}),t._v(" Allowed users ")],1)]}}])})},Xu=[],Hu={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/newsletters/",fields:["id","name",{key:"is_active",label:"Active"},{key:"childs",label:"Related"},"actions"],ordering:"name",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"State",value:"is_active"}],page_title:"Newsletters"}}},qu=Hu,Yu=Object(f["a"])(qu,Au,Xu,!1,null,null,null),Vu=Yu.exports,Gu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"NewsletterLogs",params:{newsletter_id:t.newsletter_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-sm btn-outline-secondary",attrs:{to:{name:"NewsletterMessages",params:{newsletter_id:t.newsletter_id}}}},[e("b-icon",{attrs:{icon:"chat-left-text",variant:"secondary"}}),t._v(" Messages ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-sm btn-outline-secondary",attrs:{to:{name:"NewsletterSubscriptions",params:{newsletter_id:t.newsletter_id}}}},[e("b-icon",{attrs:{icon:"person-check",variant:"secondary"}}),t._v(" Subscriptions ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-sm btn-outline-secondary",attrs:{to:{name:"NewsletterTestSubscriptions",params:{newsletter_id:t.newsletter_id}}}},[e("b-icon",{attrs:{icon:"person",variant:"secondary"}}),t._v(" Test Subscriptions ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:this.form,submit:t.onSubmit,form_source:this.form_source}})],1)],1)],1)])],1)])},Uu=[],Ju={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,form:{},form_source:"/api/editorial-board/newsletters/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.name},getItem(){let t="/api/editorial-board/newsletters/"+this.newsletter_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.newsletter_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.newsletter_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"newsletter edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/newsletters/"+this.newsletter_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"newsletter removed successfully",dismissable:!0}),this.$router.push({name:"Newsletters",params:{alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete newsletter?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Qu=Ju,Ku=Object(f["a"])(Qu,Gu,Uu,!1,null,null,null),Zu=Ku.exports,tm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},["raw"!=t.$route.query.mode?e("Breadcrumbs"):t._e(),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New newsletter"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},em=[],am={data(){return{alerts:[],form:{},form_source:"/api/editorial-board/newsletters/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"menu added successfully",dismissable:!0}),"raw"!=this.$route.query.mode&&this.$router.push({name:"Newsletters",params:{alerts:this.alerts}}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},sm=am,im=Object(f["a"])(sm,tm,em,!1,null,null,null),rm=im.exports,om=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},nm=[],lm={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/logs/",page_title:"Newsletter logs"}}},dm=lm,cm=Object(f["a"])(dm,om,nm,!1,null,null,null),um=cm.exports,mm=function(){var t=this,e=t._self._c;return e("ObjectLocks",{attrs:{object_api:t.object_api,object_id:t.object_id,page_title:t.page_title,addNewClass:t.addNewClass}})},hm=[],pm={components:{ObjectLocks:ta},data(){return{addNewClass:"NewsletterLockNew",object_api:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/",object_id:this.$route.params.newsletter_id,page_title:"Newsletter locks"}}},_m=pm,bm=Object(f["a"])(_m,mm,hm,!1,null,null,null),fm=bm.exports,gm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},vm=[],wm={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,form:{},form_source:"/api/editorial-board/users/form/"}},methods:{retrieveObject(){let t="/api/editorial-board/newsletters/"+this.newsletter_id+"/";this.axios.get(t).then(t=>{this.content_type=t.data.object_content_type}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/locks/"+this.content_type+"/"+this.newsletter_id+"/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"lock added successfully",dismissable:!0}),this.$router.push({name:"NewsletterLocks",params:{newsletter_id:this.newsletter_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},mounted(){this.retrieveObject()}},km=wm,Cm=Object(f["a"])(km,gm,vm,!1,null,null,null),$m=Cm.exports,ym=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,dates:t.dates,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"NewsletterSubscriptionNew",params:{newsletter_id:t.newsletter_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"html",fn:function(t){return[t.data.value?e("b-icon",{attrs:{icon:"check-circle-fill",variant:"success"}}):e("b-icon",{attrs:{icon:"x-circle-fill",variant:"danger"}})]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"NewsletterSubscriptionEdit",params:{newsletter_id:t.newsletter_id,subscription_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},xm=[],Sm={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/subscriptions/",newsletter_id:this.$route.params.newsletter_id,fields:["id","email",{key:"first_name",label:"Name"},{key:"last_name",label:"Surname"},"html",{key:"date_subscription",label:"Subscription"},{key:"date_unsubscription",label:"Unsubscription"},{key:"is_active",label:"Active"},"actions"],dates:["date_subscription","date_unsubscription"],ordering:"email",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"first_name"},{text:"Surname",value:"last_name"},{text:"Email",value:"email"},{text:"HTML",value:"html"},{text:"State",value:"is_active"}],page_title:"Newsletter subscriptions"}}},jm=Sm,Lm=Object(f["a"])(jm,ym,xm,!1,null,null,null),Om=Lm.exports,Nm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},Mm=[],zm={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,subscription_id:this.$route.params.subscription_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/subscriptions/form/",files:{},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a)},getItem(){let t="/api/editorial-board/newsletters/"+this.newsletter_id+"/subscriptions/"+this.subscription_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.subscription_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.subscription_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/subscriptions/"+this.subscription_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"newsletter subscription edited successfully",dismissable:!0}),this.page_title=t.data.email,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/newsletters/"+this.newsletter_id+"/subscriptions/"+this.subscription_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"newsletter subscription removed successfully",dismissable:!0}),this.$router.push({name:"NewsletterSubscriptions",params:{newsletter_id:this.newsletter_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete subscription?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Tm=zm,Pm=Object(f["a"])(Tm,Nm,Mm,!1,null,null,null),Dm=Pm.exports,Im=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},Em=[],Fm={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,form:{newsletter:parseInt(this.$route.params.newsletter_id)},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/subscriptions/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/subscriptions/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"newsletter subscription added successfully",dismissable:!0}),this.$router.push({name:"NewsletterSubscriptions",params:{newsletter_id:this.newsletter_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Rm=Fm,Wm=Object(f["a"])(Rm,Im,Em,!1,null,null,null),Bm=Wm.exports,Am=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"NewsletterTestSubscriptionNew",params:{newsletter_id:t.newsletter_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"html",fn:function(t){return[t.data.value?e("b-icon",{attrs:{icon:"check-circle-fill",variant:"success"}}):e("b-icon",{attrs:{icon:"x-circle-fill",variant:"danger"}})]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"NewsletterTestSubscriptionEdit",params:{newsletter_id:t.newsletter_id,subscription_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Xm=[],Hm={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/test-subscriptions/",newsletter_id:this.$route.params.newsletter_id,fields:["id","email",{key:"first_name",label:"Name"},{key:"last_name",label:"Surname"},"html",{key:"is_active",label:"Active"},"actions"],ordering:"email",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"first_name"},{text:"Surname",value:"last_name"},{text:"Email",value:"email"},{text:"HTML",value:"html"},{text:"State",value:"is_active"}],page_title:"Newsletter test subscriptions"}}},qm=Hm,Ym=Object(f["a"])(qm,Am,Xm,!1,null,null,null),Vm=Ym.exports,Gm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},Um=[],Jm={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,subscription_id:this.$route.params.subscription_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/test-subscriptions/form/",files:{},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a)},getItem(){let t="/api/editorial-board/newsletters/"+this.newsletter_id+"/test-subscriptions/"+this.subscription_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.subscription_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.subscription_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/test-subscriptions/"+this.subscription_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"newsletter test subscription edited successfully",dismissable:!0}),this.page_title=t.data.email,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/newsletters/"+this.newsletter_id+"/test-subscriptions/"+this.subscription_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"newsletter test subscription removed successfully",dismissable:!0}),this.$router.push({name:"NewsletterTestSubscriptions",params:{newsletter_id:this.newsletter_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete test subscription?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Qm=Jm,Km=Object(f["a"])(Qm,Gm,Um,!1,null,null,null),Zm=Km.exports,th=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},eh=[],ah={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,form:{newsletter:parseInt(this.$route.params.newsletter_id)},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/test-subscriptions/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/test-subscriptions/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"newsletter test subscription added successfully",dismissable:!0}),this.$router.push({name:"NewsletterTestSubscriptions",params:{newsletter_id:this.newsletter_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},sh=ah,ih=Object(f["a"])(sh,th,eh,!1,null,null,null),rh=ih.exports,oh=function(){var t=this,e=t._self._c;return e("CompleteTable",{ref:"completeTable",attrs:{api_source:t.api_source,dates:t.dates,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"group_by_categories",fn:function(t){return[t.data.value?e("b-icon",{attrs:{icon:"check-circle-fill",variant:"success"}}):e("b-icon",{attrs:{icon:"x-circle-fill",variant:"danger"}})]}},{key:"discard_sent_news",fn:function(t){return[t.data.value?e("b-icon",{attrs:{icon:"check-circle-fill",variant:"success"}}):e("b-icon",{attrs:{icon:"x-circle-fill",variant:"danger"}})]}},{key:"sending",fn:function(t){return[t.data.value?e("b-icon",{attrs:{icon:"circle-fill",animation:"throb",variant:"success"}}):e("b-icon",{attrs:{icon:"x-circle-fill",variant:"danger"}})]}},{key:"queued",fn:function(t){return[t.data.value?e("b-icon",{attrs:{icon:"clock-fill",variant:"warning"}}):e("b-icon",{attrs:{icon:"clock-fill",variant:"danger"}})]}},{key:"sending_test",fn:function(t){return[t.data.value?e("b-icon",{attrs:{icon:"circle-fill",animation:"throb",variant:"success"}}):e("b-icon",{attrs:{icon:"x-circle-fill",variant:"danger"}})]}},{key:"queued_test",fn:function(t){return[t.data.value?e("b-icon",{attrs:{icon:"clock-fill",variant:"warning"}}):e("b-icon",{attrs:{icon:"clock-fill",variant:"danger"}})]}},{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"NewsletterMessageNew",params:{newsletter_id:t.newsletter_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"childs",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"NewsletterMessageAttachments",params:{newsletter_id:t.newsletter_id,message_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"files",variant:"secondary"}}),t._v(" Attachments ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"NewsletterMessageCalendars",params:{newsletter_id:t.newsletter_id,message_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"calendar2-date",variant:"secondary"}}),t._v(" Calendars ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"NewsletterMessageCategories",params:{newsletter_id:t.newsletter_id,message_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"folder2-open",variant:"secondary"}}),t._v(" Categories ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"NewsletterMessagePublicationCtx",params:{newsletter_id:t.newsletter_id,message_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"newspaper",variant:"secondary"}}),t._v(" News ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"NewsletterMessagePublications",params:{newsletter_id:t.newsletter_id,message_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"file-earmark-text",variant:"secondary"}}),t._v(" Publications ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"NewsletterMessageSendings",params:{newsletter_id:t.newsletter_id,message_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"truck",variant:"secondary"}}),t._v(" Sendings ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"NewsletterMessageWebpaths",params:{newsletter_id:t.newsletter_id,message_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"diagram3",variant:"secondary"}}),t._v(" Webpaths ")],1)]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"NewsletterMessageEdit",params:{newsletter_id:t.newsletter_id,message_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1),e("a",{staticClass:"btn btn-block btn-sm btn-warning text-white",attrs:{href:a.item.preview,target:"_blank"}},[e("b-icon",{attrs:{icon:"eye",variant:"white"}}),t._v(" Preview ")],1),e("b-button",{staticClass:"btn btn-block btn-sm btn-secondary",on:{click:function(e){return t.sendModal(a.item.id,1)}}},[e("b-icon",{attrs:{icon:"patch-check",variant:"white"}}),t._v(" Test ")],1),e("b-button",{staticClass:"btn btn-block btn-sm btn-success",on:{click:function(e){return t.sendModal(a.item.id,0)}}},[e("b-icon",{attrs:{icon:"truck",variant:"white"}}),t._v(" Send ")],1)]}}])})},nh=[],lh={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/",newsletter_id:this.$route.params.newsletter_id,fields:["id","name",{key:"date_start",label:"Start"},{key:"date_end",label:"End"},{key:"is_active",label:"Active"},{key:"queued"},{key:"queued_test",label:"Queued TEST"},{key:"sending"},{key:"sending_test",label:"Sending TEST"},{key:"childs",label:"Related"},"actions"],dates:["date_start","date_end"],ordering:"name",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"Start",value:"date_start"},{text:"End",value:"date_end"},{text:"State",value:"is_active"}],page_title:"Newsletter messages",check_interval:null}},methods:{send(t,e=1){this.axios.post(this.api_source+t+"/send/",{test:e},{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.$refs.completeTable.alerts.push({variant:"success",message:t.data,dismissable:!0}),this.$router.push({name:"NewsletterMessages",params:{newsletter_id:this.newsletter_id}}).catch(()=>{})}).catch(t=>{this.$refs.completeTable.alerts.push({variant:"warning",message:t.response.data.detail,dismissable:!0})})},sendModal(t,e=1){let a="Do you want really send message?",s="success";1==e&&(a="Do you want really send test message?",s="warning"),this.$bvModal.msgBoxConfirm(a,{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:s,okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(a=>{a&&this.send(t,e)})}},mounted(){this.check_interval=setInterval(()=>this.$refs.completeTable.callApi(),3e3)},beforeDestroy(){clearInterval(this.check_interval)}},dh=lh,ch=Object(f["a"])(dh,oh,nh,!1,null,null,null),uh=ch.exports,mh=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix"},[e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1),e("a",{staticClass:"btn btn-sm btn-warning text-white mx-md-1",attrs:{href:t.preview,target:"_blank"}},[e("b-icon",{attrs:{icon:"eye",variant:"white"}}),t._v(" Preview ")],1),e("b-button",{staticClass:"btn btn-sm btn-secondary mx-md-1",on:{click:function(e){return t.sendModal(t.message_id,1)}}},[e("b-icon",{attrs:{icon:"patch-check",variant:"white"}}),t._v(" Test ")],1),e("b-button",{staticClass:"btn btn-sm btn-success mx-md-1",on:{click:function(e){return t.sendModal(t.message_id,0)}}},[e("b-icon",{attrs:{icon:"truck",variant:"white"}}),t._v(" Send ")],1)],1)]),e("hr"),e("div",{staticClass:"clearfix mb-5"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"NewsletterMessageAttachments",params:{newsletter_id:t.newsletter_id,message_id:t.message_id}}}},[e("b-icon",{attrs:{icon:"files",variant:"secondary"}}),t._v(" Attachments ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"NewsletterMessageCalendars",params:{newsletter_id:t.newsletter_id,message_id:t.message_id}}}},[e("b-icon",{attrs:{icon:"calendar2-date",variant:"secondary"}}),t._v(" Calendars ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"NewsletterMessageCategories",params:{newsletter_id:t.newsletter_id,message_id:t.message_id}}}},[e("b-icon",{attrs:{icon:"folder2-open",variant:"secondary"}}),t._v(" Categories ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"NewsletterMessagePublicationCtx",params:{newsletter_id:t.newsletter_id,message_id:t.message_id}}}},[e("b-icon",{attrs:{icon:"newspaper",variant:"secondary"}}),t._v(" News ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"NewsletterMessagePublications",params:{newsletter_id:t.newsletter_id,message_id:t.message_id}}}},[e("b-icon",{attrs:{icon:"file-earmark-text",variant:"secondary"}}),t._v(" Publications ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"NewsletterMessageSendings",params:{newsletter_id:t.newsletter_id,message_id:t.message_id}}}},[e("b-icon",{attrs:{icon:"truck",variant:"secondary"}}),t._v(" Sendings ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"NewsletterMessageWebpaths",params:{newsletter_id:t.newsletter_id,message_id:t.message_id}}}},[e("b-icon",{attrs:{icon:"diagram3",variant:"secondary"}}),t._v(" Webpaths ")],1)],1),e("b-card-title",[t._v(" "+t._s(t.page_title)+" "),t.queued?e("small",[e("br"),t._v(" - queued: "),e("b-icon",{attrs:{icon:"clock-fill",variant:"warning"}})],1):t._e(),t.queued_test?e("small",[e("br"),t._v(" - test queued: "),e("b-icon",{attrs:{icon:"clock-fill",variant:"warning"}})],1):t._e(),t.sending?e("small",[e("br"),t._v(" - sending: "),e("b-icon",{attrs:{icon:"circle-fill",animation:"throb",variant:"success"}})],1):t._e(),t.sending_test?e("small",[e("br"),t._v(" - test sending: "),e("b-icon",{attrs:{icon:"circle-fill",animation:"throb",variant:"success"}})],1):t._e()]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files,rich_text_fields:t.rich_text_fields}})],1)],1)],1)])],1)])},hh=[],ph={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/form/",files:{},page_title:"",preview:"",redis_alert:null,sending:!1,sending_test:!1,queued:!1,queued_test:!1,interval:null,check_status:null,rich_text_fields:["content","intro_text","footer_text"],date_fields:["date_start","date_end"]}},methods:{setData(t){for(const[e,a]of Object.entries(t))"sending"==e?this.sending=t.sending:this.date_fields.includes(e)&&a?this.$set(this.form,e,a.substr(0,16).replace("T"," ")):"week_day"==e&&a?this.$set(this.form,e,a.split(",")):this.$set(this.form,e,a),this.preview=t.preview,this.page_title=t.name,this.$set(this.files,"banner",t.banner),this.$delete(this.form,"banner")},getItem(){let t="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.message_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.message_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl),this.check_status=setInterval(()=>{this.axios.get(t).then(t=>{this.queued=t.data.queued,this.queued_test=t.data.queued_test,this.sending=t.data.sending,this.sending_test=t.data.sending_test})},2e3)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/";t.preventDefault();const a=new FormData;for(var s in this.form)this.form[s]||0==this.form[s]?a.append(s,this.form[s]):a.append(s,"");this.axios.patch(e,a,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"newsletter message edited successfully",dismissable:!0}),this.page_title=t.data.name,this.$refs.form.loading=!1,this.$set(this.files,"banner",t.data.banner)}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"newsletter message removed successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessages",params:{newsletter_id:this.newsletter_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete message?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})},send(t,e=1){this.axios.post("/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/send/",{test:e},{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:t.data,dismissable:!0}),this.$router.push({name:"NewsletterMessageEdit",params:{newsletter_id:this.newsletter_id,message_id:this.message_id,alerts:this.alerts}}).catch(()=>{})}).catch(t=>{this.alerts.push({variant:"warning",message:t.response.data.detail,dismissable:!0})})},sendModal(t,e=1){let a="Do you want really send message?",s="success";1==e&&(a="Do you want really send test message?",s="warning"),this.$bvModal.msgBoxConfirm(a,{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:s,okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(a=>{a&&this.send(t,e)})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval),clearInterval(this.check_status)}},_h=ph,bh=Object(f["a"])(_h,mh,hh,!1,null,null,null),fh=bh.exports,gh=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,rich_text_fields:t.rich_text_fields}})],1)],1)],1)])],1)])},vh=[],wh={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,form:{newsletter:parseInt(this.$route.params.newsletter_id)},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/form/",rich_text_fields:["content","intro_text","footer_text"]}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/";t.preventDefault();const a=new FormData;for(var s in this.form)this.form[s]||0==this.form[s]?a.append(s,this.form[s]):a.append(s,"");this.axios.post(e,a,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"message added successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessages",params:{newsletter_id:this.newsletter_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},kh=wh,Ch=Object(f["a"])(kh,gh,vh,!1,null,null,null),$h=Ch.exports,yh=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"NewsletterMessageAttachmentNew",params:{newsletter_id:t.newsletter_id,message_id:t.message_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"attachment",fn:function(t){return[e("a",{attrs:{href:t.data.value,target:"_blank",title:t.data.value}},[e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"file-text"}})],1)]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"NewsletterMessageAttachmentEdit",params:{newsletter_id:t.newsletter_id,message_id:t.message_id,attachment_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},xh=[],Sh={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/attachments/",newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,fields:["id","attachment","order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Attachment",value:"attachment"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Newsletter message attachments"}}},jh=Sh,Lh=Object(f["a"])(jh,yh,xh,!1,null,null,null),Oh=Lh.exports,Nh=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},Mh=[],zh={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,attachment_id:this.$route.params.attachment_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/attachments/form/",files:{},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.$set(this.files,"attachment",t.attachment),this.$delete(this.form,"attachment")},getItem(){let t="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/attachments/"+this.attachment_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.attachment_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.attachment_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/attachments/"+this.attachment_id+"/";t.preventDefault();const a=new FormData;for(var s in this.form)this.form[s]||0==this.form[s]?a.append(s,this.form[s]):a.append(s,"");this.axios.patch(e,a,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"attachment edited successfully",dismissable:!0}),this.page_title=t.data.email,this.$set(this.files,"attachment",t.data.attachment),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/attachments/"+this.attachment_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"attachment removed successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessageAttachments",params:{newsletter_id:this.newsletter_id,message_id:this.message_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete attachment?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Th=zh,Ph=Object(f["a"])(Th,Nh,Mh,!1,null,null,null),Dh=Ph.exports,Ih=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},Eh=[],Fh={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/attachments/form/",files:{}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/attachments/";t.preventDefault();const a=new FormData;for(var s in this.form)this.form[s]||0==this.form[s]?a.append(s,this.form[s]):a.append(s,"");this.axios.post(e,a,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"attachment added successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessageAttachments",params:{newsletter_id:this.newsletter_id,message_id:this.message_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Rh=Fh,Wh=Object(f["a"])(Rh,Ih,Eh,!1,null,null,null),Bh=Wh.exports,Ah=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"NewsletterMessageCategoryNew",params:{newsletter_id:t.newsletter_id,message_id:t.message_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"NewsletterMessageCategoryEdit",params:{newsletter_id:t.newsletter_id,message_id:t.message_id,category_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Xh=[],Hh={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/categories/",newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,fields:["id",{key:"category_data.name",label:"Category"},"order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Category",value:"category_data.name"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Newsletter message categories"}}},qh=Hh,Yh=Object(f["a"])(qh,Ah,Xh,!1,null,null,null),Vh=Yh.exports,Gh=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},Uh=[],Jh={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,category_id:this.$route.params.category_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/categories/form/",files:{},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a)},getItem(){let t="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/categories/"+this.category_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.category_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.category_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/categories/"+this.category_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"category edited successfully",dismissable:!0}),this.page_title=t.data.email,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/categories/"+this.category_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"category removed successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessageCategories",params:{newsletter_id:this.newsletter_id,message_id:this.message_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete category?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Qh=Jh,Kh=Object(f["a"])(Qh,Gh,Uh,!1,null,null,null),Zh=Kh.exports,tp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},ep=[],ap={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/categories/form/",files:{}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/categories/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"category added successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessageCategories",params:{newsletter_id:this.newsletter_id,message_id:this.message_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},sp=ap,ip=Object(f["a"])(sp,tp,ep,!1,null,null,null),rp=ip.exports,op=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"NewsletterMessagePublicationNew",params:{newsletter_id:t.newsletter_id,message_id:t.message_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"NewsletterMessagePublicationEdit",params:{newsletter_id:t.newsletter_id,message_id:t.message_id,publication_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},np=[],lp={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/publications/",newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,fields:["id",{key:"publication_data.title",label:"Publication"},"order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Publication",value:"publication_data.title"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Newsletter message publications"}}},dp=lp,cp=Object(f["a"])(dp,op,np,!1,null,null,null),up=cp.exports,mp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},hp=[],pp={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,publication_id:this.$route.params.publication_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/publications/form/",files:{},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.$refs.form.getOptionsFromParent("publication",[{text:t.publication_data.title,value:t.publication_data.id}])},getItem(){let t="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/publications/"+this.publication_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.publication_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.publication_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/publications/"+this.publication_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"publication edited successfully",dismissable:!0}),this.page_title=t.data.email,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/publications/"+this.publication_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"publication removed successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessagePublications",params:{newsletter_id:this.newsletter_id,message_id:this.message_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete publication?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},_p=pp,bp=Object(f["a"])(_p,mp,hp,!1,null,null,null),fp=bp.exports,gp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},vp=[],wp={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/publications/form/",files:{},add_modal_fields:{publication:this.$router.resolve({name:"PublicationNew"}).href}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/publications/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"publication added successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessagePublications",params:{newsletter_id:this.newsletter_id,message_id:this.message_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},kp=wp,Cp=Object(f["a"])(kp,gp,vp,!1,null,null,null),$p=Cp.exports,yp=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"NewsletterMessagePublicationCtxNew",params:{newsletter_id:t.newsletter_id,message_id:t.message_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"NewsletterMessagePublicationCtxEdit",params:{newsletter_id:t.newsletter_id,message_id:t.message_id,publication_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},xp=[],Sp={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/publication-contexts/",newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,fields:["id",{key:"publication_data",label:"Publication"},"order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Publication",value:"publication_data"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Newsletter message news"}}},jp=Sp,Lp=Object(f["a"])(jp,yp,xp,!1,null,null,null),Op=Lp.exports,Np=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},Mp=[],zp={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,publication_id:this.$route.params.publication_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/publication-contexts/form/",files:{},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.$refs.form.getOptionsFromParent("publication",[{text:t.publication_data,value:t.publication}])},getItem(){let t="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/publication-contexts/"+this.publication_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.publication_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.publication_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/publication-contexts/"+this.publication_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"news edited successfully",dismissable:!0}),this.page_title=t.data.email,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/publication-contexts/"+this.publication_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"news removed successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessagePublicationCtx",params:{newsletter_id:this.newsletter_id,message_id:this.message_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete news?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Tp=zp,Pp=Object(f["a"])(Tp,Np,Mp,!1,null,null,null),Dp=Pp.exports,Ip=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},Ep=[],Fp={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/publication-contexts/form/",files:{}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/publication-contexts/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"news added successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessagePublicationCtx",params:{newsletter_id:this.newsletter_id,message_id:this.message_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Rp=Fp,Wp=Object(f["a"])(Rp,Ip,Ep,!1,null,null,null),Bp=Wp.exports,Ap=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,dates:t.dates,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"NewsletterMessageWebpathNew",params:{newsletter_id:t.newsletter_id,message_id:t.message_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"NewsletterMessageWebpathEdit",params:{newsletter_id:t.newsletter_id,message_id:t.message_id,webpath_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Xp=[],Hp={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/webpaths/",newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,fields:["id",{key:"webpath_data",label:"Webpath"},{key:"news_from",label:"News from"},{key:"news_to",label:"News to"},"order",{key:"is_active",label:"Active"},"actions"],dates:["news_from","news_to"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Webpath",value:"webpath_data"},{text:"News from",value:"news_from"},{text:"News to",value:"news_to"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Newsletter message webpaths"}}},qp=Hp,Yp=Object(f["a"])(qp,Ap,Xp,!1,null,null,null),Vp=Yp.exports,Gp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},Up=[],Jp={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,webpath_id:this.$route.params.webpath_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/webpaths/form/",files:{},page_title:"",redis_alert:null,interval:null,date_fields:["news_from","news_to"]}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.date_fields.includes(e)&&a?this.$set(this.form,e,a.substr(0,16).replace("T"," ")):this.$set(this.form,e,a);this.$refs.form.getOptionsFromParent("webpath",[{text:t.webpath_data,value:t.webpath}])},getItem(){let t="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/webpaths/"+this.webpath_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.webpath_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.webpath_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/webpaths/"+this.webpath_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"webpath edited successfully",dismissable:!0}),this.page_title=t.data.email,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/webpaths/"+this.webpath_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"webpath removed successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessageWebpaths",params:{newsletter_id:this.newsletter_id,message_id:this.message_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete webpath?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Qp=Jp,Kp=Object(f["a"])(Qp,Gp,Up,!1,null,null,null),Zp=Kp.exports,t_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},e_=[],a_={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/webpaths/form/",files:{}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/webpaths/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"webpath added successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessageWebpaths",params:{newsletter_id:this.newsletter_id,message_id:this.message_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},s_=a_,i_=Object(f["a"])(s_,t_,e_,!1,null,null,null),r_=i_.exports,o_=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,dates:t.dates,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"NewsletterMessageCalendarNew",params:{newsletter_id:t.newsletter_id,message_id:t.message_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"NewsletterMessageCalendarEdit",params:{newsletter_id:t.newsletter_id,message_id:t.message_id,calendar_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},n_=[],l_={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/calendars/",newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,fields:["id",{key:"calendar_data",label:"Calendar"},{key:"news_from",label:"Events from"},{key:"news_to",label:"Events to"},"order",{key:"is_active",label:"Active"},"actions"],dates:["news_from","news_to"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Calendar",value:"calendar_data"},{text:"Events from",value:"events_from"},{text:"Events to",value:"events_to"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Newsletter message calendars"}}},d_=l_,c_=Object(f["a"])(d_,o_,n_,!1,null,null,null),u_=c_.exports,m_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},h_=[],p_={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,calendar_id:this.$route.params.calendar_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/calendars/form/",files:{},page_title:"",redis_alert:null,interval:null,date_fields:["events_from","events_to"]}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.date_fields.includes(e)&&a?this.$set(this.form,e,a.substr(0,16).replace("T"," ")):this.$set(this.form,e,a);this.$refs.form.getOptionsFromParent("calendar_context",[{text:t.calendar_data,value:t.calendar_context}])},getItem(){let t="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/calendars/"+this.calendar_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.calendar_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.calendar_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/calendars/"+this.calendar_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"calendar edited successfully",dismissable:!0}),this.page_title=t.data.email,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/calendars/"+this.calendar_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"calendar removed successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessageCalendars",params:{newsletter_id:this.newsletter_id,message_id:this.message_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete calendar?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},__=p_,b_=Object(f["a"])(__,m_,h_,!1,null,null,null),f_=b_.exports,g_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},v_=[],w_={data(){return{alerts:[],newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,form:{},form_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/calendars/form/",files:{}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/newsletters/"+this.newsletter_id+"/messages/"+this.message_id+"/calendars/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"calendar added successfully",dismissable:!0}),this.$router.push({name:"NewsletterMessageCalendars",params:{newsletter_id:this.newsletter_id,message_id:this.message_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},k_=w_,C_=Object(f["a"])(k_,g_,v_,!1,null,null,null),$_=C_.exports,y_=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,dates:t.dates,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1,showIsActive:!1,sortDesc:t.sortDesc},scopedSlots:t._u([{key:"html_file",fn:function(t){return[e("a",{attrs:{href:t.data.value,target:"_blank",title:t.data.value}},[e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"file-text"}})],1)]}}])})},x_=[],S_={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/newsletters/"+this.$route.params.newsletter_id+"/messages/"+this.$route.params.message_id+"/sendings/",newsletter_id:this.$route.params.newsletter_id,message_id:this.$route.params.message_id,fields:["id","date",{key:"html_file",label:"HTML"},"recipients"],dates:["date"],sortDesc:"-",ordering:"date",ordering_list:[{text:"Date",value:"date"}],page_title:"Newsletter message sendings"}}},j_=S_,L_=Object(f["a"])(j_,y_,x_,!1,null,null,null),O_=L_.exports,N_=function(){var t=this,e=t._self._c;return e("CompleteTable",{ref:"completeTable",attrs:{api_source:t.api_source,fields:t.fields,files:t.files,arrays:t.arrays,arrays_map:t.arrays_map,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title},scopedSlots:t._u([{key:"activation",fn:function(a){return[a.data.value?e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"check-circle-fill",variant:"success"},on:{click:function(e){return t.changeStatus(a.data.item)}}}):e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"dash-circle-fill",variant:"danger"},on:{click:function(e){return t.changeStatus(a.data.item)}}})]}},{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"PublicationNew"}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"childs",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"PublicationAttachments",params:{publication_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"file-text",variant:"secondary"}}),t._v(" Attachments ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"PublicationMediaCollections",params:{publication_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"folder-check",variant:"secondary"}}),t._v(" Media collections ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"PublicationLinks",params:{publication_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"link45deg",variant:"secondary"}}),t._v(" Links ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"PublicationLocalizations",params:{publication_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"PublicationRelated",params:{publication_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"share",variant:"secondary"}}),t._v(" Related publications ")],1)]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"PublicationEdit",params:{publication_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-secondary",attrs:{to:{name:"PublicationLocks",params:{publication_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"lock",variant:"white"}}),t._v(" Allowed users ")],1)]}}])})},M_=[],z_={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/publications/",fields:["id","name","title",{key:"category_data",label:"Category"},"relevance",{key:"is_active",label:"Active"},{key:"childs",label:"Related"},"actions"],arrays:["category_data"],arrays_map:[{category_data:"name"}],files:["presentation_image"],ordering:"name",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"Title",value:"title"},{text:"Relevance",value:"relevance"},{text:"State",value:"is_active"}],page_title:"Publications"}},methods:{changeStatus(t){this.axios.get("/api/editorial-board/publications/"+t.id+"/change-status/").then(e=>{t.is_active=e.data.is_active,this.$refs.completeTable.alerts.push({variant:"success",message:"status changed successfully",dismissable:!0})}).catch(t=>{this.$refs.completeTable.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})}}},T_=z_,P_=Object(f["a"])(T_,N_,M_,!1,null,null,null),D_=P_.exports,I_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},["raw"!=t.$route.query.mode?e("Breadcrumbs"):t._e(),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("b-card-title",[t._v("New publication")]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files,add_modal_fields:t.add_modal_fields,rich_text_fields:t.rich_text_fields,tag_fields:t.tag_fields}})],1)],1)],1)])],1)])},E_=[],F_={data(){return{alerts:[],form:{},form_source:"/api/editorial-board/publications/form/",files:{presentation_image:"",preview_image:""},add_modal_fields:{presentation_image:this.$router.resolve({name:"MediaNew"}).href,preview_image:this.$router.resolve({name:"MediaNew"}).href},rich_text_fields:["content"],tag_fields:["tags"]}},methods:{updateMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.$set(this.files,"presentation_image",t.data.file)})},updateMediaPreview(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.$set(this.files,"preview_image",t.data.file)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/publications/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"publication addedd successfully",dismissable:!0}),"raw"!=this.$route.query.mode&&this.$router.push({name:"Publications",params:{alerts:this.alerts}}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},watch:{"form.preview_image":function(t,e){this.updateMediaPreview(t)},"form.presentation_image":function(t,e){this.updateMedia(t)}}},R_=F_,W_=Object(f["a"])(R_,I_,E_,!1,null,null,null),B_=W_.exports,A_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"PublicationLogs",params:{publication_id:t.publication_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-outline-secondary btn-sm",attrs:{to:{name:"PublicationAttachments",params:{publication_id:t.publication_id}}}},[e("b-icon",{attrs:{icon:"file-text",variant:"secondary"}}),t._v(" Attachments ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-outline-secondary btn-sm",attrs:{to:{name:"PublicationMediaCollections",params:{publication_id:t.publication_id}}}},[e("b-icon",{attrs:{icon:"folder-check",variant:"secondary"}}),t._v(" Media collections ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-outline-secondary btn-sm",attrs:{to:{name:"PublicationLinks",params:{publication_id:t.publication_id}}}},[e("b-icon",{attrs:{icon:"link45deg",variant:"secondary"}}),t._v(" Links ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-outline-secondary btn-sm",attrs:{to:{name:"PublicationLocalizations",params:{publication_id:t.publication_id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-outline-secondary btn-sm",attrs:{to:{name:"PublicationRelated",params:{publication_id:t.publication_id}}}},[e("b-icon",{attrs:{icon:"share",variant:"secondary"}}),t._v(" Related publications ")],1)],1),e("div",{staticClass:"pull-right"},[t.is_active?e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger",size:"sm"},on:{click:function(e){return t.toggleIsActiveModal()}}},[e("b-icon",{attrs:{icon:"x-circle"}}),t._v(" Deactivate ")],1):e("b-button",{staticClass:"mx-md-1",attrs:{variant:"success",size:"sm"},on:{click:function(e){return t.toggleIsActiveModal()}}},[e("b-icon",{attrs:{icon:"check-circle"}}),t._v(" Activate ")],1),e("b-button",{staticClass:"mx-md-1",attrs:{variant:"danger",size:"sm"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("p",[e("b",[t._v("Activation status: ")]),t.is_active?e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.8",variant:"success"}}):e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.8",variant:"danger"}})],1),e("hr"),e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files,add_modal_fields:t.add_modal_fields,rich_text_fields:t.rich_text_fields,tag_fields:t.tag_fields}})],1)],1)],1)])],1)])},X_=[],H_={data(){return{alerts:[],publication_id:this.$route.params.publication_id,form:{},form_source:"/api/editorial-board/publications/edit-form/",files:{presentation_image:"",preview_image:""},add_modal_fields:{presentation_image:this.$router.resolve({name:"MediaNew"}).href,preview_image:this.$router.resolve({name:"MediaNew"}).href},rich_text_fields:["content"],tag_fields:["tags"],page_title:"",is_active:!1,redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))if("categories_data"==e){let t=[];a.forEach(e=>{t.push(e.id)}),this.$set(this.form,e,t)}else"presentation_image"==e&&a?(this.$set(this.form,e,a.id),this.$set(this.files,"presentation_image",t.presentation_image.file)):"preview_image"==e&&a?(this.$set(this.form,e,a.id),this.$set(this.files,"preview_image",t.preview_image.file)):this.$set(this.form,e,a);this.page_title=t.full_name,this.is_active=t.is_active,t.presentation_image&&this.$refs.form.getOptionsFromParent("presentation_image",[{text:t.presentation_image.title,value:t.presentation_image.id}]),t.preview_image&&this.$refs.form.getOptionsFromParent("preview_image",[{text:t.preview_image.title,value:t.preview_image.id}])},getItem(){let t="/api/editorial-board/publications/"+this.publication_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.publication_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.publication_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},updateMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.files.presentation_image=t.data.file})},updateMediaPreview(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.files.preview_image=t.data.file})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/publications/"+this.publication_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.full_name,this.alerts.push({variant:"success",message:"publication edited successfully",dismissable:!0}),this.$refs.form.loading=!1,this.$set(this.form,"slug",t.data.slug)}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/publications/"+this.publication_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"publication removed successfully",dismissable:!0}),this.$router.push({name:"Publications",params:{alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},toggleIsActive(){this.axios.get("/api/editorial-board/publications/"+this.publication_id+"/change-status/").then(t=>{this.alerts.push({variant:"success",message:"status updated successfully",dismissable:!0}),this.is_active=t.data.is_active}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},toggleIsActiveModal(){this.$bvModal.msgBoxConfirm("Do you want really change activation status?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"success",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.toggleIsActive()})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete publication?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)},watch:{"form.preview_image":function(t,e){t&&t!=e&&this.updateMediaPreview(t),t||(this.files.preview_image="")},"form.presentation_image":function(t,e){t&&t!=e&&this.updateMedia(t),t||(this.files.presentation_image="")}}},q_=H_,Y_=Object(f["a"])(q_,A_,X_,!1,null,null,null),V_=Y_.exports,G_=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},U_=[],J_={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/logs/",page_title:"Publication logs"}}},Q_=J_,K_=Object(f["a"])(Q_,G_,U_,!1,null,null,null),Z_=K_.exports,tb=function(){var t=this,e=t._self._c;return e("ObjectLocks",{attrs:{object_api:t.object_api,object_id:t.object_id,page_title:t.page_title,addNewClass:t.addNewClass}})},eb=[],ab={components:{ObjectLocks:ta},data(){return{addNewClass:"PublicationLockNew",object_api:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/",object_id:this.$route.params.publication_id,page_title:"Publication locks"}}},sb=ab,ib=Object(f["a"])(sb,tb,eb,!1,null,null,null),rb=ib.exports,ob=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},nb=[],lb={data(){return{alerts:[],publication_id:this.$route.params.publication_id,form:{},form_source:"/api/editorial-board/users/form/"}},methods:{retrieveObject(){let t="/api/editorial-board/publications/"+this.publication_id+"/";this.axios.get(t).then(t=>{this.content_type=t.data.object_content_type}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/locks/"+this.content_type+"/"+this.publication_id+"/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"lock added successfully",dismissable:!0}),this.$router.push({name:"PublicationLocks",params:{publication_id:this.publication_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},mounted(){this.retrieveObject()}},db=lb,cb=Object(f["a"])(db,ob,nb,!1,null,null,null),ub=cb.exports,mb=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"PublicationAttachmentNew",params:{publication_id:t.publication_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"PublicationAttachmentEdit",params:{publication_id:t.publication_id,attachment_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},hb=[],pb={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/attachments/",fields:["id","name","file","file_type","file_size","description","order",{key:"is_active",label:"Active"},"actions"],files:["file"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"File type",value:"file_type"},{text:"File size",value:"file_size"},{text:"Description",value:"description"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Publication attachments",publication_id:this.$route.params.publication_id}}},_b=pb,bb=Object(f["a"])(_b,mb,hb,!1,null,null,null),fb=bb.exports,gb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},vb=[],wb={data(){return{alerts:[],publication_id:this.$route.params.publication_id,form:{publication:parseInt(this.$route.params.publication_id)},form_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/attachments/form/",files:{}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/publications/"+this.publication_id+"/attachments/";t.preventDefault();const a=new FormData;for(var s in this.form)this.form[s]||0==this.form[s]?a.append(s,this.form[s]):a.append(s,"");this.axios.post(e,a,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"publication attachment added successfully",dismissable:!0}),this.$router.push({name:"PublicationAttachments",params:{publication_id:this.publication_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},kb=wb,Cb=Object(f["a"])(kb,gb,vb,!1,null,null,null),$b=Cb.exports,yb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"PublicationAttachmentLogs",params:{publication_id:t.publication_id,attachment_id:t.attachment_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},xb=[],Sb={data(){return{alerts:[],publication_id:this.$route.params.publication_id,attachment_id:this.$route.params.attachment_id,form:{},form_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/attachments/form/",files:{},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.$set(this.files,"file",t.file),this.$delete(this.form,"file"),this.page_title=t.name},getItem(){let t="/api/editorial-board/publications/"+this.publication_id+"/attachments/"+this.attachment_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.attachment_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.attachment_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/publications/"+this.publication_id+"/attachments/"+this.attachment_id+"/";t.preventDefault();const a=new FormData;for(var s in this.form)this.form[s]||0==this.form[s]?a.append(s,this.form[s]):a.append(s,"");this.axios.patch(e,a,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"publication attachment edited successfully",dismissable:!0}),this.$refs.form.loading=!1,this.$set(this.files,"file",t.data.file)}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/publications/"+this.publication_id+"/attachments/"+this.attachment_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"publication attachment removed successfully",dismissable:!0}),this.$router.push({name:"PublicationAttachments",params:{publication_id:this.publication_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete publication attachment?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},jb=Sb,Lb=Object(f["a"])(jb,yb,xb,!1,null,null,null),Ob=Lb.exports,Nb=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Mb=[],zb={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/attachments/"+this.$route.params.attachment_id+"/logs/",page_title:"Publication attachment logs"}}},Tb=zb,Pb=Object(f["a"])(Tb,Nb,Mb,!1,null,null,null),Db=Pb.exports,Ib=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"PublicationMediaCollectionNew",params:{publication_id:t.publication_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"MediaCollectionEdit",params:{collection_id:a.item.collection.id}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to media collection ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"PublicationMediaCollectionEdit",params:{publication_id:t.publication_id,collection_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Eb=[],Fb={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/media-collections/",fields:["id",{key:"collection.name",label:"Collection"},"order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Collection name",value:"collection.name"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Publication media collections",publication_id:this.$route.params.publication_id}}},Rb=Fb,Wb=Object(f["a"])(Rb,Ib,Eb,!1,null,null,null),Bb=Wb.exports,Ab=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},Xb=[],Hb={data(){return{alerts:[],publication_id:this.$route.params.publication_id,form:{publication:parseInt(this.$route.params.publication_id)},form_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/media-collections/form/",add_modal_fields:{collection:this.$router.resolve({name:"MediaCollectionNew"}).href}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/publications/"+this.publication_id+"/media-collections/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"publication media-collection added successfully",dismissable:!0}),this.$router.push({name:"PublicationMediaCollections",params:{publication_id:this.publication_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},qb=Hb,Yb=Object(f["a"])(qb,Ab,Xb,!1,null,null,null),Vb=Yb.exports,Gb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"PublicationMediaCollectionLogs",params:{publication_id:t.publication_id,collection_id:t.collection_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},Ub=[],Jb={data(){return{alerts:[],publication_id:this.$route.params.publication_id,collection_id:this.$route.params.collection_id,form:{},form_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/media-collections/form/",add_modal_fields:{collection:this.$router.resolve({name:"MediaCollectionNew"}).href},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"collection"==e&&a?this.$set(this.form,e,a.id):this.$set(this.form,e,a);t.collection&&(this.page_title=t.collection.name,this.$refs.form.getOptionsFromParent("collection",[{text:t.collection.name,value:t.collection.id}]))},getItem(){let t="/api/editorial-board/publications/"+this.publication_id+"/media-collections/"+this.collection_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.collection_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.collection_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/publications/"+this.publication_id+"/media-collections/"+this.collection_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.collection.name,this.alerts.push({variant:"success",message:"publication media-collection edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/publications/"+this.publication_id+"/media-collections/"+this.collection_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"publication media-collection removed successfully",dismissable:!0}),this.$router.push({name:"PublicationMediaCollections",params:{publication_id:this.publication_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete publication media-collection?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Qb=Jb,Kb=Object(f["a"])(Qb,Gb,Ub,!1,null,null,null),Zb=Kb.exports,tf=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},ef=[],af={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/media-collections/"+this.$route.params.collection_id+"/logs/",page_title:"Publication media-collection logs"}}},sf=af,rf=Object(f["a"])(sf,tf,ef,!1,null,null,null),of=rf.exports,nf=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1,showIsActive:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"PublicationLinkNew",params:{publication_id:t.publication_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"PublicationLinkEdit",params:{publication_id:t.publication_id,link_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},lf=[],df={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/links/",fields:["id","name","url","actions"],ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"URL",value:"url"}],page_title:"Publication links",publication_id:this.$route.params.publication_id}}},cf=df,uf=Object(f["a"])(cf,nf,lf,!1,null,null,null),mf=uf.exports,hf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("b-card-title",[t._v("New publication link")]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},pf=[],_f={data(){return{alerts:[],form:{publication:parseInt(this.$route.params.publication_id)},publication_id:this.$route.params.publication_id,form_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/links/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/publications/"+this.publication_id+"/links/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"publication addedd successfully",dismissable:!0}),this.$router.push({name:"PublicationLinks",params:{publication_id:this.publication_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},bf=_f,ff=Object(f["a"])(bf,hf,pf,!1,null,null,null),gf=ff.exports,vf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"PublicationLinkLogs",params:{publication_id:t.publication_id,link_id:t.link_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},wf=[],kf={data(){return{alerts:[],publication_id:this.$route.params.publication_id,link_id:this.$route.params.link_id,form:{},form_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/links/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.name},getItem(){let t="/api/editorial-board/publications/"+this.$route.params.publication_id+"/links/"+this.link_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.link_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.link_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/publications/"+this.$route.params.publication_id+"/links/"+this.link_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"publication link edited successfully",dismissable:!0}),this.$router.push({name:"PublicationLinks",params:{publication_id:this.publication_id,alerts:this.alerts}}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/publications/"+this.publication_id+"/links/"+this.link_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"publication link removed successfully",dismissable:!0})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete publication link?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Cf=kf,$f=Object(f["a"])(Cf,vf,wf,!1,null,null,null),yf=$f.exports,xf=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Sf=[],jf={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/links/"+this.$route.params.link_id+"/logs/",page_title:"Publication link logs"}}},Lf=jf,Of=Object(f["a"])(Lf,xf,Sf,!1,null,null,null),Nf=Of.exports,Mf=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"PublicationLocalizationNew",params:{publication_id:t.publication_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"PublicationLocalizationEdit",params:{publication_id:t.publication_id,localization_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},zf=[],Tf={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/localizations/",fields:["id","language","title",{key:"is_active",sortable:!0},"actions"],ordering:"language",ordering_list:[{text:"Id",value:"id"},{text:"Language",value:"language"},{text:"Title",value:"title"},{text:"State",value:"is_active"}],page_title:"Publication localizations",publication_id:this.$route.params.publication_id}}},Pf=Tf,Df=Object(f["a"])(Pf,Mf,zf,!1,null,null,null),If=Df.exports,Ef=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,rich_text_fields:t.rich_text_fields}})],1)],1)],1)])],1)])},Ff=[],Rf={data(){return{alerts:[],publication_id:this.$route.params.publication_id,form:{publication:parseInt(this.$route.params.publication_id)},form_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/localizations/form/",rich_text_fields:["content"]}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/publications/"+this.publication_id+"/localizations/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"publication localization added successfully",dismissable:!0}),this.$router.push({name:"PublicationLocalizations",params:{publication_id:this.publication_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Wf=Rf,Bf=Object(f["a"])(Wf,Ef,Ff,!1,null,null,null),Af=Bf.exports,Xf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"PublicationLocalizationLogs",params:{publication_id:t.publication_id,localization_id:t.localization_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,rich_text_fields:t.rich_text_fields}})],1)],1)],1)])],1)])},Hf=[],qf={data(){return{alerts:[],publication_id:this.$route.params.publication_id,localization_id:this.$route.params.localization_id,form:{},form_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/localizations/form/",rich_text_fields:["content"],page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.title},getItem(){let t="/api/editorial-board/publications/"+this.publication_id+"/localizations/"+this.localization_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.localization_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.localization_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/publications/"+this.publication_id+"/localizations/"+this.localization_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"publication localization edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/publications/"+this.publication_id+"/localizations/"+this.localization_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"publication localization removed successfully",dismissable:!0}),this.$router.push({name:"PublicationLocalizations",params:{publication_id:this.publication_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete publication localization?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Yf=qf,Vf=Object(f["a"])(Yf,Xf,Hf,!1,null,null,null),Gf=Vf.exports,Uf=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Jf=[],Qf={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/localizations/"+this.$route.params.localization_id+"/logs/",page_title:"Publication localization logs"}}},Kf=Qf,Zf=Object(f["a"])(Kf,Uf,Jf,!1,null,null,null),tg=Zf.exports,eg=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,arrays:t.arrays,arrays_map:t.arrays_map,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"PublicationRelatedNew",params:{publication_id:t.publication_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"PublicationEdit",params:{publication_id:a.item.related.id}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to publication ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"PublicationRelatedEdit",params:{publication_id:t.publication_id,related_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},ag=[],sg={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/related/",arrays:["related.category"],arrays_map:[{"related.category":"name"}],fields:["id",{key:"related.name",label:"Name"},{key:"related.title",label:"Title"},{key:"related.category",label:"Category"},{key:"related.relevance",label:"Relevance"},{key:"is_active",sortable:!0},"actions"],ordering:"name",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"related.name"},{text:"Title",value:"related.title"},{text:"Relevance",value:"related.relevance"},{text:"State",value:"is_active"}],page_title:"Publication related",publication_id:this.$route.params.publication_id}}},ig=sg,rg=Object(f["a"])(ig,eg,ag,!1,null,null,null),og=rg.exports,ng=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},lg=[],dg={data(){return{alerts:[],publication_id:this.$route.params.publication_id,form:{publication:parseInt(this.$route.params.publication_id)},form_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/related/form/",add_modal_fields:{related:this.$router.resolve({name:"PublicationNew"}).href}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/publications/"+this.publication_id+"/related/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"related publication added successfully",dismissable:!0}),this.$router.push({name:"PublicationRelated",params:{publication_id:this.publication_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},cg=dg,ug=Object(f["a"])(cg,ng,lg,!1,null,null,null),mg=ug.exports,hg=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"PublicationRelatedLogs",params:{publication_id:t.publication_id,related_id:t.related_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},pg=[],_g={data(){return{alerts:[],publication_id:this.$route.params.publication_id,related_id:this.$route.params.related_id,form:{},form_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/related/form/",add_modal_fields:{related:this.$router.resolve({name:"PublicationNew"}).href},page_title:""}},methods:{setData(t){for(const[e,a]of Object.entries(t))"related"==e?this.$set(this.form,e,a.id):this.$set(this.form,e,a);this.page_title=t.related.full_name,this.$refs.form.getOptionsFromParent("related",[{text:t.related.full_name,value:t.related.id}])},getItem(){let t="/api/editorial-board/publications/"+this.publication_id+"/related/"+this.related_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.related_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.related_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/publications/"+this.publication_id+"/related/"+this.related_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"related publication edited successfully",dismissable:!0}),this.page_title=t.data.related.full_name,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/publications/"+this.publication_id+"/related/"+this.localization_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"related publication removed successfully",dismissable:!0}),this.$router.push({name:"PublicationRelated",params:{publication_id:this.publication_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete related publication?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()}},bg=_g,fg=Object(f["a"])(bg,hg,pg,!1,null,null,null),gg=fg.exports,vg=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},wg=[],kg={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/publications/"+this.$route.params.publication_id+"/related/"+this.$route.params.related_id+"/logs/",page_title:"Publication related logs"}}},Cg=kg,$g=Object(f["a"])(Cg,vg,wg,!1,null,null,null),yg=$g.exports,xg=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("b-table",{ref:"table",attrs:{id:"my-table",striped:"",hover:"",responsive:"",busy:t.isBusy,fields:t.fields,items:t.items},scopedSlots:t._u([{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center text-danger my-2"},[e("b-spinner",{staticClass:"align-middle mr-3",attrs:{small:"",type:"grow"}}),e("strong",[t._v("loading data...")])],1)]},proxy:!0},{key:"cell(actions)",fn:function(a){return[e("router-link",{staticClass:"btn mr-1 btn-sm btn-info",attrs:{to:{name:"Webpaths",params:{site_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Manage ")],1),e("a",{staticClass:"btn mr-1 btn-sm btn-success",attrs:{href:"//"+a.item.domain,target:"_blank"}},[e("b-icon",{attrs:{icon:"link45deg",variant:"white"}}),t._v(" Open URL ")],1)]}}])}),t.prev?e("b-button",{staticClass:"float-left",attrs:{variant:"outline-secondary"},on:{click:function(e){return t.callApi(t.prev)}}},[t._v(" Previous page ")]):t._e(),t.next?e("b-button",{staticClass:"float-right",attrs:{variant:"outline-secondary"},on:{click:function(e){return t.callApi(t.next)}}},[t._v(" Next page ")]):t._e()],1)],1)],1)])],1)])},Sg=[],jg={data(){return{alerts:this.$route.params.alerts||[],fields:["id","name","domain","actions"],filter:null,filterOn:[],isBusy:!0,items:[],page_title:"Websites"}},methods:{callApi(t){let e="/api/editorial-board/sites/";t&&(e=t),this.axios.get(e).then(t=>{this.isBusy=!1,this.items=t.data.results})}},mounted(){this.callApi()}},Lg=jg,Og=Object(f["a"])(Lg,xg,Sg,!1,null,null,null),Ng=Og.exports,Mg=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathNew",params:{site_id:t.site_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"childs",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPages",params:{site_id:t.site_id,webpath_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"display",variant:"secondary"}}),t._v(" Pages ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPublications",params:{site_id:t.site_id,webpath_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"file-text",variant:"secondary"}}),t._v(" News ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathCalendars",params:{site_id:t.site_id,webpath_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"calendar2-date",variant:"secondary"}}),t._v(" Calendars ")],1)]}},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathEdit",params:{site_id:t.site_id,webpath_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-warning text-white",attrs:{to:{name:"WebpathClone",params:{site_id:t.site_id,webpath_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"files",variant:"white"}}),t._v(" Clone ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-secondary",attrs:{to:{name:"WebpathLocks",params:{site_id:t.site_id,webpath_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"lock",variant:"white"}}),t._v(" Allowed users ")],1)]}}])})},zg=[],Tg={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/",fields:["id","name",{key:"get_full_path",label:"Path"},{key:"is_active",label:"Active"},{key:"childs",label:"Related"},"actions"],ordering:"fullpath",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"Path",value:"fullpath"},{text:"State",value:"is_active"}],site_id:this.$route.params.site_id,page_title:"Website webpaths"}}},Pg=Tg,Dg=Object(f["a"])(Pg,Mg,zg,!1,null,null,null),Ig=Dg.exports,Eg=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"Website webpaths"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Fg=[],Rg={data(){return{alerts:[],site_id:this.$route.params.site_id,form:{site:parseInt(this.$route.params.site_id)},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:t.data.name,dismissable:!0}),this.$router.push({name:"Webpaths",params:{site_id:this.site_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Wg=Rg,Bg=Object(f["a"])(Wg,Eg,Fg,!1,null,null,null),Ag=Bg.exports,Xg=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPages",params:{site_id:t.site_id,webpath_id:t.webpath_id}}}},[e("b-icon",{attrs:{icon:"display",variant:"secondary"}}),t._v(" Pages ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPublications",params:{site_id:t.site_id,webpath_id:t.webpath_id}}}},[e("b-icon",{attrs:{icon:"file-text",variant:"secondary"}}),t._v(" News ")],1)],1),e("div",{staticClass:"pull-right"},[e("router-link",{staticClass:"mx-md-1 btn btn-sm btn-warning text-white",attrs:{to:{name:"WebpathClone",params:{site_id:t.site_id,webpath_id:t.webpath_id}}}},[e("b-icon",{attrs:{icon:"files",variant:"white"}}),t._v(" Clone ")],1),e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Hg=[],qg={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,form:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"parent"==e||"alias"==e?a&&this.$set(this.form,e,a.id):this.$set(this.form,e,a);this.page_title=t.full_name,t.alias&&this.$refs.form.getOptionsFromParent("alias",[{text:t.alias.full_name,value:t.alias.id}]),t.parent&&this.$refs.form.getOptionsFromParent("parent",[{text:t.parent.full_name,value:t.parent.id}])},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.webpath_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.webpath_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:t.data.name+" edited successfully",dismissable:!0}),this.page_title=t.data.full_name,this.form.path=t.data.path,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"webpath removed successfully",dismissable:!0}),this.$router.push({name:"Webpaths",params:{site_id:this.site_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete webpath?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Yg=qg,Vg=Object(f["a"])(Yg,Xg,Hg,!1,null,null,null),Gg=Vg.exports,Ug=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"Webpath clone"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Jg=[],Qg={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,form:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/clone/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/clone/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:t.data,dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Kg=Qg,Zg=Object(f["a"])(Kg,Ug,Jg,!1,null,null,null),tv=Zg.exports,ev=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},av=[],sv={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/logs/",page_title:"Webpath logs"}}},iv=sv,rv=Object(f["a"])(iv,ev,av,!1,null,null,null),ov=rv.exports,nv=function(){var t=this,e=t._self._c;return e("ObjectLocks",{attrs:{object_api:t.object_api,object_id:t.object_id,page_title:t.page_title,addNewClass:t.addNewClass}})},lv=[],dv={components:{ObjectLocks:ta},data(){return{addNewClass:"WebpathLockNew",object_api:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/",object_id:this.$route.params.webpath_id,page_title:"Webpath locks"}}},cv=dv,uv=Object(f["a"])(cv,nv,lv,!1,null,null,null),mv=uv.exports,hv=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},pv=[],_v={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,form:{},form_source:"/api/editorial-board/users/form/"}},methods:{retrieveObject(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/";this.axios.get(t).then(t=>{this.content_type=t.data.object_content_type}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/locks/"+this.content_type+"/"+this.webpath_id+"/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"lock added successfully",dismissable:!0}),this.$router.push({name:"WebpathLocks",params:{site_id:this.site_id,webpath_id:this.webpath_id,alerts:this.alerts}}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},mounted(){this.retrieveObject()}},bv=_v,fv=Object(f["a"])(bv,hv,pv,!1,null,null,null),gv=fv.exports,vv=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,dates:t.dates,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPublicationNew",params:{site_id:t.site_id,webpath_id:t.webpath_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"PublicationEdit",params:{publication_id:a.item.publication.id}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to publication ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPublicationEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,publication_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},wv=[],kv={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/publication-contexts/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,fields:["id",{key:"publication.name",label:"Name"},{key:"publication.title",label:"Title"},"date_start","date_end","in_evidence_start","in_evidence_end","order",{key:"is_active",label:"Active"},"actions"],dates:["date_start","date_end","in_evidence_start","in_evidence_end"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"publication__name"},{text:"Title",value:"publication__title"},{text:"Date start",value:"date_start"},{text:"Date end",value:"date_end"},{text:"In evidence start",value:"in_evidence_start"},{text:"In evidence end",value:"in_evidence_end"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Webpath news"}}},Cv=kv,$v=Object(f["a"])(Cv,vv,wv,!1,null,null,null),yv=$v.exports,xv=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},Sv=[],jv={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,form:{webpath:parseInt(this.$route.params.webpath_id)},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/publication-contexts/form/",add_modal_fields:{publication:this.$router.resolve({name:"PublicationNew"}).href}}},methods:{getWebpath(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/options/"+this.webpath_id+"/";this.axios.get(t).then(t=>{this.$refs.form.getOptionsFromParent("webpath",[{text:t.data.text,value:t.data.value}])})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/publication-contexts/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"webpath publication added successfully",dismissable:!0}),this.$router.push({name:"WebpathPublications",params:{site_id:this.site_id,webpath_id:this.webpath_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},mounted(){this.getWebpath()}},Lv=jv,Ov=Object(f["a"])(Lv,xv,Sv,!1,null,null,null),Nv=Ov.exports,Mv=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPublicationLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,publication_id:t.publication_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-sm btn-outline-secondary",attrs:{to:{name:"PublicationEdit",params:{publication_id:t.publication_pub_ref}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to publication ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},zv=[],Tv={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,publication_id:this.$route.params.publication_id,publication_pub_ref:"",form:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/publication-contexts/form/",page_title:"",date_fields:["date_start","date_end","in_evidence_start","in_evidence_end"],redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"publication"==e&&a||"webpath"==e&&a?this.$set(this.form,e,a.id):this.date_fields.includes(e)&&a?this.$set(this.form,e,a.substr(0,16).replace("T"," ")):this.$set(this.form,e,a);t.publication&&(this.publication_pub_ref=t.publication.id,this.page_title=t.publication.full_name,this.$refs.form.getOptionsFromParent("publication",[{text:t.publication.full_name,value:t.publication.id}])),t.webpath&&this.$refs.form.getOptionsFromParent("webpath",[{text:t.webpath.full_name,value:t.webpath.id}])},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/publication-contexts/"+this.publication_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.publication_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.publication_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/publication-contexts/"+this.publication_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"webpath publication edited successfully",dismissable:!0}),this.webpath_id=t.data.webpath.id,this.$router.push({name:"WebpathPublicationEdit",params:{site_id:this.site_id,webpath_id:this.webpath_id,publication_id:this.publication_id,alerts:this.alerts}}).catch(()=>{}),this.page_title=t.data.publication.full_name,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/publication-contexts/"+this.publication_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"webpath publication removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPublications",params:{site_id:this.site_id,webpath_id:this.webpath_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete webpath publication?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Pv=Tv,Dv=Object(f["a"])(Pv,Mv,zv,!1,null,null,null),Iv=Dv.exports,Ev=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Fv=[],Rv={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/publication-contexts/"+this.$route.params.publication_id+"/logs/",page_title:"Webpath publication logs"}}},Wv=Rv,Bv=Object(f["a"])(Wv,Ev,Fv,!1,null,null,null),Av=Bv.exports,Xv=function(){var t=this,e=t._self._c;return e("CompleteTable",{ref:"completeTable",attrs:{api_source:t.api_source,dates:t.dates,fields:t.fields,files:t.files,arrays:t.arrays,arrays_map:t.arrays_map,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"activation",fn:function(a){return[a.data.value?e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"check-circle-fill",variant:"success"},on:{click:function(e){return t.changeStatus(a.data.item)}}}):e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"dash-circle-fill",variant:"danger"},on:{click:function(e){return t.changeStatus(a.data.item)}}})]}},{key:"state",fn:function(a){return["published"==a.data.value?e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"check-circle-fill",variant:"success"},on:{click:function(e){return t.publishUnpublish(a.data.item)}}}):e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"exclamation-triangle-fill",variant:"warning"},on:{click:function(e){return t.publishUnpublish(a.data.item)}}})]}},{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPageNew",params:{site_id:t.site_id,webpath_id:t.webpath_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"childs",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPageBlocks",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"box-seam",variant:"secondary"}}),t._v(" Blocks ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPageCarousels",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"collection-play",variant:"secondary"}}),t._v(" Carousels ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPageContacts",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"person-lines-fill",variant:"secondary"}}),t._v(" Contacts ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPageHeadings",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"card-heading",variant:"secondary"}}),t._v(" Headings ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPageLinks",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"link45deg",variant:"secondary"}}),t._v(" Links ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPageLocalizations",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPageMedia",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"folder",variant:"secondary"}}),t._v(" Media ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPageMediaCollections",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"folder-check",variant:"secondary"}}),t._v(" Media collections ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPageMenus",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"menu-button-wide-fill",variant:"secondary"}}),t._v(" Menu ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPagePublications",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"file-text",variant:"secondary"}}),t._v(" Publications ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPageRelated",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"share",variant:"secondary"}}),t._v(" Related pages ")],1)]}},{key:"actions",fn:function(a){return[e("b-button",{staticClass:"btn btn-block btn-sm btn-secondary text-white",attrs:{href:a.item.preview_url,target:"_blank"}},[e("b-icon",{attrs:{icon:"eye",variant:"white"}}),t._v(" Preview ")],1),e("b-button",{staticClass:"btn btn-block btn-sm btn-warning text-white",on:{click:function(e){return t.copyAsDraftModal(a.item.id)}}},[e("b-icon",{attrs:{icon:"files",variant:"white"}}),t._v(" Copy as draft ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPageEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-secondary",attrs:{to:{name:"WebpathPageLocks",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"lock",variant:"white"}}),t._v(" Allowed users ")],1)]}}])})},Hv=[],qv={components:{CompleteTable:ge},data(){return{site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/",fields:["id",{key:"name",label:"Name"},{key:"title",label:"Title"},{key:"base_template.name",label:"Template"},{key:"base_template.image",label:"Image"},"date_start","date_end","type",{key:"state",label:"Published"},{key:"is_active",label:"Active"},{key:"childs",label:"Related"},"actions"],dates:["date_start","date_end"],files:["base_template.image"],ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"Title",value:"title"},{text:"Date start",value:"date_start"},{text:"Date end",value:"date_end"},{text:"State",value:"is_active"}],page_title:"Webpath pages"}},methods:{copyAsDraft(t){this.axios.get(this.api_source+t+"/copy-as-draft/").then(t=>{this.$refs.completeTable.alerts.push({variant:"success",message:"webpath page copied as draft successfully",dismissable:!0}),this.$refs.completeTable.callApi()}).catch(t=>{this.$refs.completeTable.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},copyAsDraftModal(t){this.$bvModal.msgBoxConfirm("Do you want really copy webpath page as draft?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"warning",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(e=>{e&&this.copyAsDraft(t)})},changeStatus(t){this.axios.get(this.api_source+t.id+"/change-status/").then(e=>{this.$refs.completeTable.alerts.push({variant:"success",message:"webpath page status changed successfully",dismissable:!0}),t.is_active=e.data.is_active}).catch(t=>{this.$refs.completeTable.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},publishUnpublish(t){this.axios.get(this.api_source+t.id+"/change-publication-status/").then(e=>{let a=this.$refs.completeTable.items.find(e=>e.id===t.draft_of);t.state=e.data.state,t.is_active=e.data.is_active,t.draft_of=e.data.draft_of,a&&(a.is_active=!1),this.$refs.completeTable.alerts.push({variant:"success",message:"webpath page publication status changed successfully",dismissable:!0})}).catch(t=>{this.$refs.completeTable.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})}}},Yv=qv,Vv=Object(f["a"])(Yv,Xv,Hv,!1,null,null,null),Gv=Vv.exports,Uv=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,files:t.files,submit:t.onSubmit,form_source:t.form_source,tag_fields:t.tag_fields}})],1)],1)],1)])],1)])},Jv=[],Qv={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,form:{webpath:parseInt(this.$route.params.webpath_id)},files:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/form/",tag_fields:["tags"]}},methods:{getWebpath(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/options/"+this.webpath_id+"/";this.axios.get(t).then(t=>{this.$refs.form.getOptionsFromParent("webpath",[{text:t.data.text,value:t.data.value}])})},onSubmit(t){let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page added successfully",dismissable:!0}),this.$router.push({name:"WebpathPages",params:{site_id:this.site_id,webpath_id:this.webpath_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},updateMedia(t){let e="/api/editorial-board/page-templates/"+t+"/";this.axios.get(e).then(t=>{this.$set(this.files,"base_template",t.data.image)})}},mounted(){this.getWebpath()},watch:{"form.base_template":function(t,e){this.updateMedia(t)}}},Kv=Qv,Zv=Object(f["a"])(Kv,Uv,Jv,!1,null,null,null),tw=Zv.exports,ew=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-3 text-right"},[t.is_active?e("b-button",{staticClass:"mx-md-1",attrs:{variant:"danger",size:"sm"},on:{click:function(e){return t.toggleIsActiveModal()}}},[e("b-icon",{attrs:{icon:"x-circle"}}),t._v(" Deactivate ")],1):e("b-button",{staticClass:"mx-md-1",attrs:{variant:"success",size:"sm"},on:{click:function(e){return t.toggleIsActiveModal()}}},[e("b-icon",{attrs:{icon:"check-circle"}}),t._v(" Activate ")],1),"draft"===t.published?e("b-button",{staticClass:"mx-md-1",attrs:{variant:"success",size:"sm"},on:{click:function(e){return t.togglePublishModal()}}},[e("b-icon",{attrs:{icon:"check-circle"}}),t._v(" Publish ")],1):"published"===t.published?e("b-button",{staticClass:"mx-md-1",attrs:{variant:"info",size:"sm"},on:{click:function(e){return t.togglePublishModal()}}},[e("b-icon",{attrs:{icon:"x-circle"}}),t._v(" Make it draft ")],1):t._e(),e("b-button",{staticClass:"mx-md-1",attrs:{href:t.preview_url,target:"_blank",variant:"secondary",size:"sm"}},[e("b-icon",{attrs:{icon:"eye"}}),t._v(" Preview ")],1),e("b-button",{staticClass:"mx-md-1",attrs:{variant:"warning text-white",size:"sm"},on:{click:function(e){return t.copyAsDraftModal()}}},[e("b-icon",{attrs:{icon:"files",variant:"white"}}),t._v(" Copy as draft ")],1),e("b-button",{staticClass:"mx-md-1",attrs:{variant:"danger",size:"sm"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1),e("hr"),e("div",{staticClass:"clearfix mb-5"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPageLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn btn-outline-secondary mx-md-1 btn-sm",attrs:{to:{name:"WebpathPageBlocks",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"box-seam",variant:"secondary"}}),t._v(" Blocks ")],1),e("router-link",{staticClass:"btn btn-outline-secondary mx-md-1 btn-sm",attrs:{to:{name:"WebpathPageCarousels",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"collection-play",variant:"secondary"}}),t._v(" Carousels ")],1),e("router-link",{staticClass:"btn btn-outline-secondary mx-md-1 btn-sm",attrs:{to:{name:"WebpathPageContacts",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"person-lines-fill",variant:"secondary"}}),t._v(" Contacts ")],1),e("router-link",{staticClass:"btn btn-outline-secondary mx-md-1 btn-sm",attrs:{to:{name:"WebpathPageHeadings",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"card-heading",variant:"secondary"}}),t._v(" Headings ")],1),e("router-link",{staticClass:"btn btn-outline-secondary mx-md-1 btn-sm",attrs:{to:{name:"WebpathPageLinks",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"link45deg",variant:"secondary"}}),t._v(" Links ")],1),e("router-link",{staticClass:"btn btn-outline-secondary mx-md-1 btn-sm",attrs:{to:{name:"WebpathPageLocalizations",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1),e("router-link",{staticClass:"btn btn-outline-secondary mx-md-1 btn-sm",attrs:{to:{name:"WebpathPageMedia",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"folder",variant:"secondary"}}),t._v(" Media ")],1),e("router-link",{staticClass:"btn btn-outline-secondary mx-md-1 btn-sm",attrs:{to:{name:"WebpathPageMediaCollections",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"folder-check",variant:"secondary"}}),t._v(" Media collections ")],1),e("router-link",{staticClass:"btn btn-outline-secondary mx-md-1 btn-sm",attrs:{to:{name:"WebpathPageMenus",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"menu-button-wide-fill",variant:"secondary"}}),t._v(" Menu ")],1),e("router-link",{staticClass:"btn btn-outline-secondary mx-md-1 btn-sm",attrs:{to:{name:"WebpathPagePublications",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"file-text",variant:"secondary"}}),t._v(" Publications ")],1),e("router-link",{staticClass:"btn btn-outline-secondary mx-md-1 btn-sm",attrs:{to:{name:"WebpathPageRelated",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"share",variant:"secondary"}}),t._v(" Related pages ")],1)],1),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("p",[e("b",[t._v("Activation status: ")]),t.is_active?e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.8",variant:"success"}}):e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.8",variant:"danger"}}),e("br"),e("b",[t._v("Publication status: ")]),"published"===t.published?e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.8",variant:"success"}}):"draft"===t.published?e("b-icon",{attrs:{icon:"circle-fill","font-scale":"0.8",variant:"warning"}}):t._e()],1),e("hr"),e("django-form",{ref:"form",attrs:{form:t.form,files:t.files,submit:t.onSubmit,form_source:t.form_source,tag_fields:t.tag_fields}})],1)],1)],1)])],1)])},aw=[],sw={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,form:{},files:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/pages/form/",tag_fields:["tags"],page_title:"",preview_url:"",is_active:!1,published:"",date_fields:["date_start","date_end"],redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"base_template"==e&&a?(this.$set(this.form,e,a.id),this.$set(this.files,"base_template",t.base_template.image)):"webpath"==e&&a?this.$set(this.form,e,a.id):this.date_fields.includes(e)&&a?this.$set(this.form,e,a.substr(0,16).replace("T"," ")):this.$set(this.form,e,a),this.page_title=t.name,this.preview_url=t.preview_url,this.is_active=t.is_active,this.published=t.state,t.webpath&&this.$refs.form.getOptionsFromParent("webpath",[{text:t.webpath.full_name,value:t.webpath.id}])},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.page_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.page_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page edited successfully",dismissable:!0}),this.webpath_id=t.data.webpath.id,this.$router.push({name:"WebpathPageEdit",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}}).catch(()=>{}),this.page_title=t.data.name,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},copyAsDraft(){this.axios.get("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/copy-as-draft/").then(t=>{this.alerts.push({variant:"success",message:"webpath page copied as draft successfully",dismissable:!0}),this.$router.push({name:"WebpathPages",params:{site_id:this.site_id,webpath_id:this.webpath_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},toggleIsActive(){this.axios.get("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/change-status/").then(t=>{this.alerts.push({variant:"success",message:"status updated successfully",dismissable:!0}),this.is_active=t.data.is_active}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},togglePublish(){this.axios.get("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/change-publication-status/").then(t=>{this.alerts.push({variant:"success",message:"publication status updated successfully",dismissable:!0}),this.published=t.data.state}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPages",params:{site_id:this.site_id,webpath_id:this.webpath_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},copyAsDraftModal(){this.$bvModal.msgBoxConfirm("Do you want really copy webpath page as draft?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"warning",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.copyAsDraft()})},toggleIsActiveModal(){this.$bvModal.msgBoxConfirm("Do you want really change activation status?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"success",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.toggleIsActive()})},togglePublishModal(){this.$bvModal.msgBoxConfirm("Do you want really change publication status?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"success",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.togglePublish()})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete page?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})},updateMedia(t){let e="/api/editorial-board/page-templates/"+t+"/";this.axios.get(e).then(t=>{this.files.base_template=t.data.image})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)},watch:{"form.base_template":function(t,e){t&&t!=e&&this.updateMedia(t),t||(this.files.base_template="")}}},iw=sw,rw=Object(f["a"])(iw,ew,aw,!1,null,null,null),ow=rw.exports,nw=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},lw=[],dw={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/logs/",page_title:"Page logs"}}},cw=dw,uw=Object(f["a"])(cw,nw,lw,!1,null,null,null),mw=uw.exports,hw=function(){var t=this,e=t._self._c;return e("ObjectLocks",{attrs:{object_api:t.object_api,object_id:t.object_id,page_title:t.page_title,addNewClass:t.addNewClass}})},pw=[],_w={components:{ObjectLocks:ta},data(){return{addNewClass:"WebpathPageLockNew",object_api:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/",object_id:this.$route.params.page_id,page_title:"Page locks"}}},bw=_w,fw=Object(f["a"])(bw,hw,pw,!1,null,null,null),gw=fw.exports,vw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},ww=[],kw={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,form:{},form_source:"/api/editorial-board/users/form/"}},methods:{retrieveObject(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/";this.axios.get(t).then(t=>{this.content_type=t.data.object_content_type}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0})})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/locks/"+this.content_type+"/"+this.page_id+"/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"lock added successfully",dismissable:!0}),this.$router.push({name:"WebpathPageLocks",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},mounted(){this.retrieveObject()}},Cw=kw,$w=Object(f["a"])(Cw,vw,ww,!1,null,null,null),yw=$w.exports,xw=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPageCarouselNew",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"CarouselEdit",params:{carousel_id:a.item.carousel.id}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to carousel ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPageCarouselEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,carousel_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Sw=[],jw={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/carousels/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,fields:["id",{key:"carousel.name",label:"Carousel"},"order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"carousel__name"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Page carousels"}}},Lw=jw,Ow=Object(f["a"])(Lw,xw,Sw,!1,null,null,null),Nw=Ow.exports,Mw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},zw=[],Tw={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,form:{page:parseInt(this.$route.params.page_id)},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/carousels/form/",add_modal_fields:{carousel:this.$router.resolve({name:"CarouselNew"}).href}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/carousels/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page carousel added successfully",dismissable:!0}),this.$router.push({name:"WebpathPageCarousels",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Pw=Tw,Dw=Object(f["a"])(Pw,Mw,zw,!1,null,null,null),Iw=Dw.exports,Ew=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPageCarouselLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,carousel_id:t.carousel_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},Fw=[],Rw={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,carousel_id:this.$route.params.carousel_id,form:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/carousels/form/",add_modal_fields:{carousel:this.$router.resolve({name:"CarouselNew"}).href},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"carousel"==e&&a?this.$set(this.form,e,a.id):this.$set(this.form,e,a);t.carousel&&(this.page_title=t.carousel.name,this.$refs.form.getOptionsFromParent("carousel",[{text:t.carousel.name,value:t.carousel.id}]))},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/carousels/"+this.carousel_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.carousel_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.carousel_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/carousels/"+this.carousel_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page carousel edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/carousels/"+this.carousel_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.carousel.name,this.alerts.push({variant:"success",message:"page carousel removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPageCarousels",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete page carousel?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Ww=Rw,Bw=Object(f["a"])(Ww,Ew,Fw,!1,null,null,null),Aw=Bw.exports,Xw=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Hw=[],qw={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/carousels/"+this.$route.params.carousel_id+"/logs/",page_title:"Page carousel logs"}}},Yw=qw,Vw=Object(f["a"])(Yw,Xw,Hw,!1,null,null,null),Gw=Vw.exports,Uw=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPageContactNew",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"ContactEdit",params:{contact_id:a.item.contact.id}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to contact ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPageContactEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,contact_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Jw=[],Qw={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/contacts/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,fields:["id",{key:"contact.name",label:"Contact"},{key:"contact.contact_type",label:"Type"},"order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"contact__name"},{text:"Type",value:"contact__contact_type"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Page contacts"}}},Kw=Qw,Zw=Object(f["a"])(Kw,Uw,Jw,!1,null,null,null),tk=Zw.exports,ek=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},ak=[],sk={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,form:{page:parseInt(this.$route.params.page_id)},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/contacts/form/",add_modal_fields:{contact:this.$router.resolve({name:"ContactNew"}).href}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/contacts/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page contact added successfully",dismissable:!0}),this.$router.push({name:"WebpathPageContacts",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},ik=sk,rk=Object(f["a"])(ik,ek,ak,!1,null,null,null),ok=rk.exports,nk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPageContactLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,contact_id:t.contact_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},lk=[],dk={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,contact_id:this.$route.params.contact_id,form:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/contacts/form/",add_modal_fields:{contact:this.$router.resolve({name:"ContactNew"}).href},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"contact"==e?this.$set(this.form,e,a.id):this.$set(this.form,e,a);this.page_title=t.contact.name,this.$refs.form.getOptionsFromParent("contact",[{text:t.contact.name,value:t.contact.id}])},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/contacts/"+this.contact_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.contact_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.contact_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/contacts/"+this.contact_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page contact edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/contacts/"+this.contact_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.contact.name,this.alerts.push({variant:"success",message:"page contact removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPageContacts",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete page contact?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},ck=dk,uk=Object(f["a"])(ck,nk,lk,!1,null,null,null),mk=uk.exports,hk=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},pk=[],_k={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/contacts/"+this.$route.params.contact_id+"/logs/",page_title:"Page contact logs"}}},bk=_k,fk=Object(f["a"])(bk,hk,pk,!1,null,null,null),gk=fk.exports,vk=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"text",fn:function(){return[e("div",{staticClass:"accordion",attrs:{role:"tablist"}},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-1",modifiers:{"accordion-1":!0}}],attrs:{block:"",variant:"info"}},[t._v(" Template default blocks ")]),e("b-collapse",{attrs:{id:"accordion-1",accordion:"blocks-accordion",role:"tabpanel"}},[e("b-table",{ref:"table",staticClass:"mt-1",attrs:{id:"blocks-table",striped:"",hover:"",responsive:"",busy:t.isBusy2,fields:t.template_blocks_fields,items:t.template_blocks_items},scopedSlots:t._u([{key:"cell(block.image)",fn:function(a){return[a.value?e("b-img",{attrs:{src:a.value.file||a.value,fluid:"",alt:"Responsive image"}}):t._e()]}}])})],1)],1),e("hr",{staticClass:"my-3"})]},proxy:!0},{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPageBlockNew",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPageBlockEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,block_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},wk=[],kk={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/blocks/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,fields:["id",{key:"block.name",label:"Block"},{key:"block.image",label:"Image"},"section",{key:"block.description",label:"Description"},"order",{key:"is_active",label:"Active"},"actions"],files:["block.image"],ordering:"section",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"block__name"},{text:"Section",value:"section"},{text:"Description",value:"block__description"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Page blocks",template_blocks_fields:[{key:"block.name",label:"Block"},{key:"block.image",label:"Image"},{key:"section"},{key:"order"},{key:"block.description",label:"Description"}],isBusy2:!0,template_blocks_items:[]}},methods:{getTemplateBlocks(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/";this.axios.get(t).then(t=>{let e=t.data.base_template.id,a="/api/editorial-board/templates/"+e+"/blocks/";this.axios.get(a).then(t=>{this.template_blocks_items=t.data,this.isBusy2=!1})})}},mounted(){this.getTemplateBlocks()}},Ck=kk,$k=Object(f["a"])(Ck,vk,wk,!1,null,null,null),yk=$k.exports,xk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},Sk=[],jk={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,form:{page:parseInt(this.$route.params.page_id)},files:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/blocks/form/"}},methods:{updateMedia(t){let e="/api/editorial-board/templates/blocks/"+t+"/";this.axios.get(e).then(t=>{this.$set(this.files,"block",t.data.image)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/blocks/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page block added successfully",dismissable:!0}),this.$router.push({name:"WebpathPageBlocks",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},watch:{"form.block":function(t,e){this.updateMedia(t)}}},Lk=jk,Ok=Object(f["a"])(Lk,xk,Sk,!1,null,null,null),Nk=Ok.exports,Mk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPageBlockLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,block_id:t.block_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files}})],1)],1)],1)])],1)])},zk=[],Tk={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,block_id:this.$route.params.block_id,form:{},files:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/blocks/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"block"==e?this.$set(this.form,e,a.id):this.$set(this.form,e,a);this.$set(this.files,"block",t.block.image),this.page_title=t.block.name},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/blocks/"+this.block_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.block_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.block_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},updateMedia(t){let e="/api/editorial-board/templates/blocks/"+t+"/";this.axios.get(e).then(t=>{this.files.block=t.data.image})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/blocks/"+this.block_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.block.name,this.alerts.push({variant:"success",message:"page block edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/blocks/"+this.block_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page block removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPageBlocks",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete page block?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)},watch:{"form.block":function(t,e){t&&t!=e&&this.updateMedia(t),t||(this.files.block="")}}},Pk=Tk,Dk=Object(f["a"])(Pk,Mk,zk,!1,null,null,null),Ik=Dk.exports,Ek=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Fk=[],Rk={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/blocks/"+this.$route.params.block_id+"/logs/",page_title:"Page block logs"}}},Wk=Rk,Bk=Object(f["a"])(Wk,Ek,Fk,!1,null,null,null),Ak=Bk.exports,Xk=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPageHeadingNew",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPageHeadingEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,heading_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Hk=[],qk={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/headings/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,fields:["id","title","description","order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Title",value:"title"},{text:"Description",value:"description"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Page headings"}}},Yk=qk,Vk=Object(f["a"])(Yk,Xk,Hk,!1,null,null,null),Gk=Vk.exports,Uk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Jk=[],Qk={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,form:{page:parseInt(this.$route.params.page_id)},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/headings/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/headings/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page heading added successfully",dismissable:!0}),this.$router.push({name:"WebpathPageHeadings",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Kk=Qk,Zk=Object(f["a"])(Kk,Uk,Jk,!1,null,null,null),tC=Zk.exports,eC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPageHeadingLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,heading_id:t.heading_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPageHeadingLocalizations",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,heading_id:t.heading_id}}}},[e("b-icon",{attrs:{icon:"flag",variant:"secondary"}}),t._v(" Localizations ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},aC=[],sC={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,heading_id:this.$route.params.heading_id,form:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/headings/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.name},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/headings/"+this.heading_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.heading_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.heading_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/headings/"+this.heading_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"page heading edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/headings/"+this.heading_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page heading removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPageHeadings",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete page heading?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},iC=sC,rC=Object(f["a"])(iC,eC,aC,!1,null,null,null),oC=rC.exports,nC=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},lC=[],dC={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/headings/"+this.$route.params.heading_id+"/logs/",page_title:"Page heading logs"}}},cC=dC,uC=Object(f["a"])(cC,nC,lC,!1,null,null,null),mC=uC.exports,hC=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPageHeadingLocalizationNew",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,heading_id:t.heading_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPageHeadingLocalizationEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,heading_id:t.heading_id,localization_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},pC=[],_C={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/headings/"+this.$route.params.heading_id+"/localizations/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,heading_id:this.$route.params.heading_id,fields:["id","language","title","description",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Language",value:"language"},{text:"Title",value:"title"},{text:"Description",value:"description"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Page heading localizations"}}},bC=_C,fC=Object(f["a"])(bC,hC,pC,!1,null,null,null),gC=fC.exports,vC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},wC=[],kC={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,heading_id:this.$route.params.heading_id,form:{heading:parseInt(this.$route.params.heading_id)},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/headings/"+this.$route.params.heading_id+"/localizations/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/headings/"+this.$route.params.heading_id+"/localizations/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page heading localization added successfully",dismissable:!0}),this.$router.push({name:"WebpathPageHeadings",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,heading_id:this.heading_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},CC=kC,$C=Object(f["a"])(CC,vC,wC,!1,null,null,null),yC=$C.exports,xC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPageHeadingLocalizationLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,heading_id:t.heading_id,localization_id:t.localization_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},SC=[],jC={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,heading_id:this.$route.params.heading_id,localization_id:this.$route.params.localization_id,form:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/headings/"+this.$route.params.heading_id+"/localizations/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.name},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/headings/"+this.heading_id+"/localizations/"+this.localization_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.localization_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.localization_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/headings/"+this.heading_id+"/localizations/"+this.localization_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"page heading localization edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/headings/"+this.heading_id+"/localizations/"+this.localization_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page heading localization removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPageHeadingLocalizations",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,heading_id:this.heading_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete page heading localization?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},LC=jC,OC=Object(f["a"])(LC,xC,SC,!1,null,null,null),NC=OC.exports,MC=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},zC=[],TC={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/headings/"+this.$route.params.heading_id+"/localizations/"+this.$route.params.localization_id+"/logs/",page_title:"Page heading localization logs"}}},PC=TC,DC=Object(f["a"])(PC,MC,zC,!1,null,null,null),IC=DC.exports,EC=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1,showIsActive:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPageLinkNew",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPageLinkEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,link_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},FC=[],RC={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/links/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,fields:["id","name","url","order","actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"Order",value:"order"},{text:"URL",value:"url"},{text:"State",value:"is_active"}],page_title:"Page links"}}},WC=RC,BC=Object(f["a"])(WC,EC,FC,!1,null,null,null),AC=BC.exports,XC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},HC=[],qC={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,form:{page:parseInt(this.$route.params.page_id)},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/links/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/links/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page link added successfully",dismissable:!0}),this.$router.push({name:"WebpathPageLinks",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},YC=qC,VC=Object(f["a"])(YC,XC,HC,!1,null,null,null),GC=VC.exports,UC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPageLinkLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,link_id:t.link_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},JC=[],QC={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,link_id:this.$route.params.link_id,form:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/links/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.name},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/links/"+this.link_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.link_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.link_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/links/"+this.link_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.name,this.alerts.push({variant:"success",message:"page link edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/links/"+this.link_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page link removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPageLinks",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete page link?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},KC=QC,ZC=Object(f["a"])(KC,UC,JC,!1,null,null,null),t$=ZC.exports,e$=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},a$=[],s$={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/links/"+this.$route.params.link_id+"/logs/",page_title:"Page link logs"}}},i$=s$,r$=Object(f["a"])(i$,e$,a$,!1,null,null,null),o$=r$.exports,n$=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPageLocalizationNew",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPageLocalizationEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,localization_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},l$=[],d$={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/localizations/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,fields:["id","language","title",{key:"is_active",sortable:!0},"actions"],ordering_list:[{text:"Id",value:"id"},{text:"Language",value:"language"},{text:"Title",value:"title"},{text:"State",value:"is_active"}],page_title:"Page localizations"}}},c$=d$,u$=Object(f["a"])(c$,n$,l$,!1,null,null,null),m$=u$.exports,h$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},p$=[],_$={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,form:{page:parseInt(this.$route.params.page_id)},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/localizations/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/localizations/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page localization added successfully",dismissable:!0}),this.$router.push({name:"WebpathPageLocalizations",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},b$=_$,f$=Object(f["a"])(b$,h$,p$,!1,null,null,null),g$=f$.exports,v$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPageLocalizationLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,localization_id:t.localization_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,rich_text_fields:t.rich_text_fields}})],1)],1)],1)])],1)])},w$=[],k$={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,localization_id:this.$route.params.localization_id,form:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/localizations/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))this.$set(this.form,e,a);this.page_title=t.localization.title},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/localizations/"+this.localization_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.localization_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.localization_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/localizations/"+this.localization_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.localization.title,this.alerts.push({variant:"success",message:"page localization edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/localizations/"+this.localization_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page localization removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPageLocalizations",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete page localization?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},C$=k$,$$=Object(f["a"])(C$,v$,w$,!1,null,null,null),y$=$$.exports,x$=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},S$=[],j$={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/localizations/"+this.$route.params.localization_id+"/logs/",page_title:"Page localization logs"}}},L$=j$,O$=Object(f["a"])(L$,x$,S$,!1,null,null,null),N$=O$.exports,M$=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPageMediaNew",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"MediaEdit",params:{media_id:a.item.media.id}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to media ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPageMediaEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,media_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},z$=[],T$={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/medias/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,fields:["id",{key:"media.title",label:"Media"},{key:"media.file",label:"File"},"order",{key:"is_active",label:"Active"},"actions"],files:["media.file"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Title",value:"media__title"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Page media"}}},P$=T$,D$=Object(f["a"])(P$,M$,z$,!1,null,null,null),I$=D$.exports,E$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields,files:t.files}})],1)],1)],1)])],1)])},F$=[],R$={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,form:{page:parseInt(this.$route.params.page_id)},files:{media:""},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/medias/form/",add_modal_fields:{media:this.$router.resolve({name:"MediaNew"}).href}}},methods:{updateMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.$set(this.files,"media",t.data.file)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/medias/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page media added successfully",dismissable:!0}),this.$router.push({name:"WebpathPageMedia",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},watch:{"form.media":function(t,e){this.updateMedia(t)}}},W$=R$,B$=Object(f["a"])(W$,E$,F$,!1,null,null,null),A$=B$.exports,X$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPageMediaLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,media_id:t.media_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields,files:t.files}})],1)],1)],1)])],1)])},H$=[],q$={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,media_id:this.$route.params.media_id,form:{},files:{media:""},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/medias/form/",add_modal_fields:{media:this.$router.resolve({name:"MediaNew"}).href},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"media"==e&&a?(this.$set(this.form,e,a.id),this.$set(this.files,"media",t.media.file)):this.$set(this.form,e,a);t.media&&(this.page_title=t.media.title,this.$refs.form.getOptionsFromParent("media",[{text:t.media.title,value:t.media.id}]))},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/medias/"+this.media_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.media_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.media_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},updateMedia(t){let e="/api/editorial-board/medias/"+t+"/";this.axios.get(e).then(t=>{this.files.media=t.data.file})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/medias/"+this.media_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page media edited successfully",dismissable:!0}),this.page_title=t.data.media.title,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/medias/"+this.media_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page media removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPageMedia",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete page media?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)},watch:{"form.media":function(t,e){t&&t!=e&&this.updateMedia(t),t||(this.files.media="")}}},Y$=q$,V$=Object(f["a"])(Y$,X$,H$,!1,null,null,null),G$=V$.exports,U$=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},J$=[],Q$={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/medias/"+this.$route.params.media_id+"/logs/",page_title:"Page media logs"}}},K$=Q$,Z$=Object(f["a"])(K$,U$,J$,!1,null,null,null),ty=Z$.exports,ey=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPageMediaCollectionNew",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"MediaCollectionEdit",params:{collection_id:a.item.collection.id}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to media collection ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPageMediaCollectionEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,collection_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},ay=[],sy={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/media-collections/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,fields:["id",{key:"collection.name",label:"Collection"},{key:"collection.description",label:"Description"},"order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"collection__name"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Page media collections"}}},iy=sy,ry=Object(f["a"])(iy,ey,ay,!1,null,null,null),oy=ry.exports,ny=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},ly=[],dy={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,form:{page:parseInt(this.$route.params.page_id)},files:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/media-collections/form/",add_modal_fields:{collection:this.$router.resolve({name:"MediaCollectionNew"}).href}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/media-collections/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page media collection added successfully",dismissable:!0}),this.$router.push({name:"WebpathPageMediaCollections",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},cy=dy,uy=Object(f["a"])(cy,ny,ly,!1,null,null,null),my=uy.exports,hy=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPageMediaCollectionLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,collection_id:t.collection_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,files:t.files,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},py=[],_y={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,collection_id:this.$route.params.collection_id,form:{},files:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/media-collections/form/",add_modal_fields:{collection:this.$router.resolve({name:"MediaCollectionNew"}).href},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"collection"==e&&a?this.$set(this.form,e,a.id):this.$set(this.form,e,a);t.collection&&(this.page_title=t.collection.name,this.$refs.form.getOptionsFromParent("collection",[{text:t.collection.name,value:t.collection.id}]))},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/media-collections/"+this.collection_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.collection_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.collection_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/media-collections/"+this.collection_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page media collection edited successfully",dismissable:!0}),this.page_title=t.data.collection.name,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/medias/"+this.media_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page media collection removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPageMediaCollections",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete page media collection?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},by=_y,fy=Object(f["a"])(by,hy,py,!1,null,null,null),gy=fy.exports,vy=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},wy=[],ky={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/media-collections/"+this.$route.params.collection_id+"/logs/",page_title:"Page media collection logs"}}},Cy=ky,$y=Object(f["a"])(Cy,vy,wy,!1,null,null,null),yy=$y.exports,xy=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPageMenuNew",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"MenuEdit",params:{menu_id:a.item.menu.id}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to menu ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPageMenuEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,menu_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Sy=[],jy={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/menus/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,fields:["id",{key:"menu.name",label:"Menu"},"section","order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Menu name",value:"menu__name"},{text:"Section",value:"section"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Page menu"}}},Ly=jy,Oy=Object(f["a"])(Ly,xy,Sy,!1,null,null,null),Ny=Oy.exports,My=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},zy=[],Ty={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,form:{page:parseInt(this.$route.params.page_id)},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/menus/form/",add_modal_fields:{menu:this.$router.resolve({name:"MenuNew"}).href}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/menus/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page menu added successfully",dismissable:!0}),this.$router.push({name:"WebpathPageMenus",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Py=Ty,Dy=Object(f["a"])(Py,My,zy,!1,null,null,null),Iy=Dy.exports,Ey=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPageMenuLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,menu_id:t.menu_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{fields:t.fields,form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},Fy=[],Ry={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,menu_id:this.$route.params.menu_id,form:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/menus/form/",add_modal_fields:{menu:this.$router.resolve({name:"MenuNew"}).href},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"menu"==e?this.$set(this.form,e,a.id):this.$set(this.form,e,a);this.page_title=t.menu.name,this.$refs.form.getOptionsFromParent("menu",[{text:t.menu.name,value:t.menu.id}])},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/menus/"+this.menu_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.menu_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.menu_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/menus/"+this.menu_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.menu.name,this.alerts.push({variant:"success",message:"page menu edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/menus/"+this.menu_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page menu removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPageMenus",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete page menu?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Wy=Ry,By=Object(f["a"])(Wy,Ey,Fy,!1,null,null,null),Ay=By.exports,Xy=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Hy=[],qy={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/menus/"+this.$route.params.menu_id+"/logs/",page_title:"Page menu logs"}}},Yy=qy,Vy=Object(f["a"])(Yy,Xy,Hy,!1,null,null,null),Gy=Vy.exports,Uy=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPagePublicationNew",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"PublicationEdit",params:{publication_id:a.item.publication.id}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to publication ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPagePublicationEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,publication_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Jy=[],Qy={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/publications/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,fields:["id",{key:"publication.name",label:"Name"},{key:"publication.title",label:"Title"},"order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Publication name",value:"publication__name"},{text:"Publication title",value:"publication__title"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Page publications"}}},Ky=Qy,Zy=Object(f["a"])(Ky,Uy,Jy,!1,null,null,null),tx=Zy.exports,ex=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},ax=[],sx={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,form:{page:parseInt(this.$route.params.page_id)},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/publications/form/",add_modal_fields:{publication:this.$router.resolve({name:"PublicationNew"}).href}}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/publications/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page publication added successfully",dismissable:!0}),this.$router.push({name:"WebpathPagePublications",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},ix=sx,rx=Object(f["a"])(ix,ex,ax,!1,null,null,null),ox=rx.exports,nx=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPagePublicationLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,publication_id:t.publication_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1),e("router-link",{staticClass:"btn mx-md-1 btn-sm btn-outline-secondary",attrs:{to:{name:"PublicationEdit",params:{publication_id:t.publication_pub_ref}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to publication ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},lx=[],dx={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,publication_id:this.$route.params.publication_id,publication_pub_ref:"",form:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/publications/form/",add_modal_fields:{publication:this.$router.resolve({name:"PublicationNew"}).href},page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"publication"==e&&a?this.$set(this.form,e,a.id):this.$set(this.form,e,a);t.publication&&(this.publication_pub_ref=t.publication.id,this.page_title=t.publication.full_name,this.$refs.form.getOptionsFromParent("publication",[{text:t.publication.full_name,value:t.publication.id}]))},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/publications/"+this.publication_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.publication_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.publication_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/publications/"+this.publication_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page publication edited successfully",dismissable:!0}),this.page_title=t.data.publication.full_name,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/publications/"+this.publication_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page publication removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPagePublications",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete page publication?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},cx=dx,ux=Object(f["a"])(cx,nx,lx,!1,null,null,null),mx=ux.exports,hx=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},px=[],_x={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/publications/"+this.$route.params.publication_id+"/logs/",page_title:"Page publication logs"}}},bx=_x,fx=Object(f["a"])(bx,hx,px,!1,null,null,null),gx=fx.exports,vx=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathPageRelatedNew",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"WebpathPageEdit",params:{site_id:a.item.related_page.webpath.site,webpath_id:a.item.related_page.webpath.id,page_id:a.item.related_page.id}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to page ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathPageRelatedEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,related_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},wx=[],kx={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/related/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,fields:["id",{key:"related_page.name",label:"Related"},{key:"related_page.title",label:"Title"},"order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Page name",value:"related_page__name"},{text:"Page title",value:"related_page__title"},{text:"Order",value:"order"},{text:"State",value:"is_active"}],page_title:"Page related"}}},Cx=kx,$x=Object(f["a"])(Cx,vx,wx,!1,null,null,null),yx=$x.exports,xx=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},Sx=[],jx={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,form:{page:parseInt(this.$route.params.page_id)},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/related/form/"}},methods:{onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/related/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page related added successfully",dismissable:!0}),this.$router.push({name:"WebpathPageRelated",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}}},Lx=jx,Ox=Object(f["a"])(Lx,xx,Sx,!1,null,null,null),Nx=Ox.exports,Mx=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathPageRelatedLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,page_id:t.page_id,related_id:t.related_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},zx=[],Tx={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,page_id:this.$route.params.page_id,related_id:this.$route.params.related_id,form:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/related/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"related_page"==e&&a?this.$set(this.form,e,a.id):this.$set(this.form,e,a);t.related_page&&(this.page_title=t.related_page.name)},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/related/"+this.related_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.related_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.related_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/related/"+this.related_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.page_title=t.data.related_page.name,this.alerts.push({variant:"success",message:"page related edited successfully",dismissable:!0}),this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/pages/"+this.page_id+"/related/"+this.related_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"page related removed successfully",dismissable:!0}),this.$router.push({name:"WebpathPageRelated",params:{site_id:this.site_id,webpath_id:this.webpath_id,page_id:this.page_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete page related?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},Px=Tx,Dx=Object(f["a"])(Px,Mx,zx,!1,null,null,null),Ix=Dx.exports,Ex=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},Fx=[],Rx={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/pages/"+this.$route.params.page_id+"/related/"+this.$route.params.related_id+"/logs/",page_title:"Page related logs"}}},Wx=Rx,Bx=Object(f["a"])(Wx,Ex,Fx,!1,null,null,null),Ax=Bx.exports,Xx=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1},scopedSlots:t._u([{key:"add_new",fn:function(){return[e("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"WebpathCalendarNew",params:{site_id:t.site_id,webpath_id:t.webpath_id}}}},[e("b-icon",{attrs:{icon:"plus-circle",variant:"white"}}),t._v(" Add new ")],1)]},proxy:!0},{key:"actions",fn:function(a){return[e("router-link",{staticClass:"btn btn-block btn-sm btn-outline-secondary",attrs:{to:{name:"CalendarEdit",params:{calendar_id:a.item.calendar.id}}}},[e("b-icon",{attrs:{icon:"arrow-right-circle",variant:"secondary"}}),t._v(" Go to calendar ")],1),e("router-link",{staticClass:"btn btn-block btn-sm btn-info",attrs:{to:{name:"WebpathCalendarEdit",params:{site_id:t.site_id,webpath_id:t.webpath_id,calendar_id:a.item.id}}}},[e("b-icon",{attrs:{icon:"pencil-square",variant:"white"}}),t._v(" Edit ")],1)]}}])})},Hx=[],qx={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/calendar-contexts/",site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,fields:["id",{key:"calendar.name",label:"Calendar"},"order",{key:"is_active",label:"Active"},"actions"],ordering:"order",ordering_list:[{text:"Id",value:"id"},{text:"Calendar",value:"calendar__name"},{text:"State",value:"is_active"}],page_title:"Webpath calendars"}}},Yx=qx,Vx=Object(f["a"])(Yx,Xx,Hx,!1,null,null,null),Gx=Vx.exports,Ux=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",{attrs:{title:"New"}},[e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source,add_modal_fields:t.add_modal_fields}})],1)],1)],1)])],1)])},Jx=[],Qx={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,form:{webpath:parseInt(this.$route.params.webpath_id)},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/calendar-contexts/form/",add_modal_fields:{calendar:this.$router.resolve({name:"CalendarNew"}).href}}},methods:{getWebpath(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/options/"+this.webpath_id+"/";this.axios.get(t).then(t=>{this.$refs.form.getOptionsFromParent("webpath",[{text:t.data.text,value:t.data.value}])})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/calendar-contexts/";t.preventDefault(),this.axios.post(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"webpath calendar added successfully",dismissable:!0}),this.$router.push({name:"WebpathCalendars",params:{site_id:this.site_id,webpath_id:this.webpath_id,alerts:this.alerts}})}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})}},mounted(){this.getWebpath()}},Kx=Qx,Zx=Object(f["a"])(Kx,Ux,Jx,!1,null,null,null),tS=Zx.exports,eS=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("Breadcrumbs"),e("stacked-alerts",{attrs:{alerts:t.alerts,redis_alert:t.redis_alert}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-card",[e("div",{staticClass:"clearfix mb-5"},[e("div",{staticClass:"pull-left"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mx-md-1",attrs:{to:{name:"WebpathCalendarLogs",params:{site_id:t.site_id,webpath_id:t.webpath_id,calendar_id:t.calendar_id}}}},[e("b-icon",{attrs:{icon:"clock-history",variant:"secondary"}}),t._v(" History ")],1)],1),e("div",{staticClass:"pull-right"},[e("b-button",{staticClass:"mx-md-1 btn-sm",attrs:{variant:"danger"},on:{click:function(e){return t.deleteModal()}}},[e("b-icon",{attrs:{icon:"trash",variant:"white"}}),t._v(" Delete ")],1)],1)]),e("b-card-title",[t._v(t._s(t.page_title))]),e("b-card-text",[e("django-form",{ref:"form",attrs:{form:t.form,submit:t.onSubmit,form_source:t.form_source}})],1)],1)],1)])],1)])},aS=[],sS={data(){return{alerts:[],site_id:this.$route.params.site_id,webpath_id:this.$route.params.webpath_id,calendar_id:this.$route.params.calendar_id,form:{},form_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/calendar-contexts/form/",page_title:"",redis_alert:null,interval:null}},methods:{setData(t){for(const[e,a]of Object.entries(t))"calendar"==e||"webpath"==e?this.$set(this.form,e,a.id):this.$set(this.form,e,a);this.page_title=t.calendar.name,this.$refs.form.getOptionsFromParent("webpath",[{text:t.webpath.full_name,value:t.webpath.id}]),this.$refs.form.getOptionsFromParent("calendar",[{text:t.calendar.name,value:t.calendar.id}])},getItem(){let t="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/calendar-contexts/"+this.calendar_id+"/";this.axios.get(t).then(e=>{this.setData(e.data);let a=e.data.object_content_type,s="/api/editorial-board/redis-lock/set/",i={content_type_id:a,object_id:this.calendar_id};this.axios.post(s,i,{headers:{"X-CSRFToken":this.$csrftoken}}),this.$user_is_active(s,i),this.interval=setInterval(()=>{this.$checkForRedisLocks(a,this.calendar_id),this.redis_alert&&this.axios.get(t).then(t=>{this.setData(t.data)})},this.$redis_ttl)})},onSubmit(t){this.$refs.form.loading=!0;let e="/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/calendar-contexts/"+this.publication_id+"/";t.preventDefault(),this.axios.patch(e,this.form,{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"webpath calendar edited successfully",dismissable:!0}),this.webpath_id=t.data.webpath.id,this.$router.push({name:"WebpathPublicationEdit",params:{site_id:this.site_id,webpath_id:this.webpath_id,calendar_id:this.calendar_id,alerts:this.alerts}}).catch(()=>{}),this.page_title=t.data.calendar.name,this.$refs.form.loading=!1}).catch(t=>{for(var e in t.response.data)this.alerts.push({variant:"danger",message:e+": "+t.response.data[e],dismissable:!0});this.$refs.form.loading=!1})},remove(){this.axios.delete("/api/editorial-board/sites/"+this.site_id+"/webpaths/"+this.webpath_id+"/calendar-contexts/"+this.publication_id+"/",{headers:{"X-CSRFToken":this.$csrftoken}}).then(t=>{this.alerts.push({variant:"success",message:"webpath calendar removed successfully",dismissable:!0}),this.$router.push({name:"WebpathCalendars",params:{site_id:this.site_id,webpath_id:this.webpath_id,alerts:this.alerts}})}).catch(t=>{this.alerts.push({variant:"danger",message:t.response.data.detail,dismissable:!0})})},deleteModal(){this.$bvModal.msgBoxConfirm("Do you want really delete webpath calendar?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1}).then(t=>{t&&this.remove()})}},mounted(){this.getItem()},beforeDestroy(){clearInterval(this.interval)}},iS=sS,rS=Object(f["a"])(iS,eS,aS,!1,null,null,null),oS=rS.exports,nS=function(){var t=this,e=t._self._c;return e("ObjectLogs",{attrs:{api_source:t.api_source,page_title:t.page_title}})},lS=[],dS={components:{ObjectLogs:Ae},data(){return{api_source:"/api/editorial-board/sites/"+this.$route.params.site_id+"/webpaths/"+this.$route.params.webpath_id+"/calendar-contexts/"+this.$route.params.calendar_id+"/logs/",page_title:"Webpath calendar logs"}}},cS=dS,uS=Object(f["a"])(cS,nS,lS,!1,null,null,null),mS=uS.exports,hS=function(){var t=this,e=t._self._c;return e("CompleteTable",{attrs:{api_source:t.api_source,fields:t.fields,files:t.files,ordering:t.ordering,ordering_list:t.ordering_list,page_title:t.page_title,showCreatedBy:!1,showIsActive:!1}})},pS=[],_S={components:{CompleteTable:ge},data(){return{api_source:"/api/editorial-board/templates/blocks/",fields:["id","name",{key:"type_friendly",label:"Type"},"image","description"],files:["image"],ordering:"type",ordering_list:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"Type",value:"type"},{text:"Description",value:"description"}],page_title:"Template blocks"}}},bS=_S,fS=Object(f["a"])(bS,hS,pS,!1,null,null,null),gS=fS.exports;const vS=[{path:"/",component:Et,redirect:"/dashboard",children:[{path:"dashboard",name:"Dashboard",component:gl,meta:{breadcrumb:"Dashboard"}},{path:"websites",name:"Websites",component:Ng,meta:{breadcrumb:{label:"Websites",parent:"Dashboard"}}},{path:"websites/:site_id/webpaths",name:"Webpaths",component:Ig,meta:{breadcrumb:{label:"Webpaths",parent:"Websites"}}},{path:"websites/:site_id/webpaths/new",name:"WebpathNew",component:Ag,meta:{breadcrumb:{label:"New",parent:"Webpaths"}}},{path:"websites/:site_id/webpaths/:webpath_id/edit",name:"WebpathEdit",component:Gg,meta:{breadcrumb(){return{label:this.$route.params.webpath_id.toString(),parent:"Webpaths"}}}},{path:"websites/:site_id/webpaths/:webpath_id/edit/clone",name:"WebpathClone",component:tv,meta:{breadcrumb(){return{label:"Clone",parent:"WebpathEdit"}}}},{path:"websites/:site_id/webpaths/:webpath_id/logs",name:"WebpathLogs",component:ov,meta:{breadcrumb:{label:"Logs",parent:"WebpathEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/locks",name:"WebpathLocks",component:mv,meta:{breadcrumb:{label:"Locks",parent:"WebpathEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/locks/new",name:"WebpathLockNew",component:gv,meta:{breadcrumb:{label:"New",parent:"WebpathLocks"}}},{path:"websites/:site_id/webpaths/:webpath_id/news",name:"WebpathPublications",component:yv,meta:{breadcrumb:{label:"News",parent:"WebpathEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/news/new",name:"WebpathPublicationNew",component:Nv,meta:{breadcrumb:{label:"New",parent:"WebpathPublications"}}},{path:"websites/:site_id/webpaths/:webpath_id/news/:publication_id/edit",name:"WebpathPublicationEdit",component:Iv,meta:{breadcrumb(){return{label:this.$route.params.publication_id.toString(),parent:"WebpathPublications"}}}},{path:"websites/:site_id/webpaths/:webpath_id/news/:publication_id/logs",name:"WebpathPublicationLogs",component:Av,meta:{breadcrumb:{label:"Logs",parent:"WebpathPublicationEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages",name:"WebpathPages",component:Gv,meta:{breadcrumb:{label:"Pages",parent:"WebpathEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/edit",name:"WebpathPageEdit",component:ow,meta:{breadcrumb(){return{label:this.$route.params.page_id.toString(),parent:"WebpathPages"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/new",name:"WebpathPageNew",component:tw,meta:{breadcrumb:{label:"New",parent:"WebpathPages"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/logs",name:"WebpathPageLogs",component:mw,meta:{breadcrumb:{label:"Logs",parent:"WebpathPageEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/locks",name:"WebpathPageLocks",component:gw,meta:{breadcrumb:{label:"Locks",parent:"WebpathPageEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/locks/new",name:"WebpathPageLockNew",component:yw,meta:{breadcrumb:{label:"New",parent:"WebpathPageLocks"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/blocks",name:"WebpathPageBlocks",component:yk,meta:{breadcrumb:{label:"Blocks",parent:"WebpathPageEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/blocks/new",name:"WebpathPageBlockNew",component:Nk,meta:{breadcrumb:{label:"New",parent:"WebpathPageBlocks"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/blocks/:block_id/edit",name:"WebpathPageBlockEdit",component:Ik,meta:{breadcrumb(){return{label:this.$route.params.block_id.toString(),parent:"WebpathPageBlocks"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/blocks/:block_id/logs",name:"WebpathPageBlockLogs",component:Ak,meta:{breadcrumb:{label:"Logs",parent:"WebpathPageBlockEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/carousels",name:"WebpathPageCarousels",component:Nw,meta:{breadcrumb:{label:"Carousels",parent:"WebpathPageEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/carousels/new",name:"WebpathPageCarouselNew",component:Iw,meta:{breadcrumb:{label:"New",parent:"WebpathPageCarousels"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/carousels/:carousel_id/edit",name:"WebpathPageCarouselEdit",component:Aw,meta:{breadcrumb(){return{label:this.$route.params.carousel_id.toString(),parent:"WebpathPageCarousels"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/carousels/:carousel_id/logs",name:"WebpathPageCarouselLogs",component:Gw,meta:{breadcrumb(){return{label:this.$route.params.carousel_id.toString(),parent:"WebpathPageCarousels"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/contacts",name:"WebpathPageContacts",component:tk,meta:{breadcrumb:{label:"Contacts",parent:"WebpathPageEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/contacts/new",name:"WebpathPageContactNew",component:ok,meta:{breadcrumb:{label:"New",parent:"WebpathPageContacts"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/contacts/:contact_id/edit",name:"WebpathPageContactEdit",component:mk,meta:{breadcrumb(){return{label:this.$route.params.contact_id.toString(),parent:"WebpathPageContacts"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/contacts/:contact_id/logs",name:"WebpathPageContactLogs",component:gk,meta:{breadcrumb:{label:"Logs",parent:"WebpathPageContactEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/localizations",name:"WebpathPageLocalizations",component:m$,meta:{breadcrumb:{label:"Localizations",parent:"WebpathPageEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/localizations/new",name:"WebpathPageLocalizationNew",component:g$,meta:{breadcrumb:{label:"New",parent:"WebpathPageLocalizations"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/localizations/:localization_id/edit",name:"WebpathPageLocalizationEdit",component:y$,meta:{breadcrumb(){return{label:this.$route.params.localization_id.toString(),parent:"WebpathPageLocalizations"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/localizations/:localization_id/logs",name:"WebpathPageLocalizationLogs",component:N$,meta:{breadcrumb:{label:"Logs",parent:"WebpathPageLocalizationEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/headings",name:"WebpathPageHeadings",component:Gk,meta:{breadcrumb:{label:"Headings",parent:"WebpathPageEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/headings/new",name:"WebpathPageHeadingNew",component:tC,meta:{breadcrumb:{label:"New",parent:"WebpathPageHeadings"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/headings/:heading_id/edit",name:"WebpathPageHeadingEdit",component:oC,meta:{breadcrumb(){return{label:this.$route.params.heading_id.toString(),parent:"WebpathPageHeadings"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/headings/:heading_id/logs",name:"WebpathPageHeadingLogs",component:mC,meta:{breadcrumb:{label:"Logs",parent:"WebpathPageHeadingEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/headings/:heading_id/localizations",name:"WebpathPageHeadingLocalizations",component:gC,meta:{breadcrumb:{label:"Localizations",parent:"WebpathPageHeadingEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/headings/:heading_id/localizations/new",name:"WebpathPageHeadingLocalizationNew",component:yC,meta:{breadcrumb:{label:"New",parent:"WebpathPageHeadingLocalizations"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/headings/:heading_id/localizations/:localization_id/edit",name:"WebpathPageHeadingLocalizationEdit",component:NC,meta:{breadcrumb(){return{label:this.$route.params.localization_id.toString(),parent:"WebpathPageHeadingLocalizations"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/headings/:heading_id/localizations/:localization_id/logs",name:"WebpathPageHeadingLocalizationLogs",component:IC,meta:{breadcrumb:{label:"Logs",parent:"WebpathPageHeadingLocalizationEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/links",name:"WebpathPageLinks",component:AC,meta:{breadcrumb:{label:"Links",parent:"WebpathPageEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/links/new",name:"WebpathPageLinkNew",component:GC,meta:{breadcrumb:{label:"New",parent:"WebpathPageLinks"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/links/:link_id/edit",name:"WebpathPageLinkEdit",component:t$,meta:{breadcrumb(){return{label:this.$route.params.link_id.toString(),parent:"WebpathPageLinks"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/links/:link_id/logs",name:"WebpathPageLinkLogs",component:o$,meta:{breadcrumb:{label:"Logs",parent:"WebpathPageLinkEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/media",name:"WebpathPageMedia",component:I$,meta:{breadcrumb:{label:"Media",parent:"WebpathPageEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/media/new",name:"WebpathPageMediaNew",component:A$,meta:{breadcrumb:{label:"New",parent:"WebpathPageMedia"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/media/:media_id/edit",name:"WebpathPageMediaEdit",component:G$,meta:{breadcrumb(){return{label:this.$route.params.media_id.toString(),parent:"WebpathPageMedia"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/media/:media_id/logs",name:"WebpathPageMediaLogs",component:ty,meta:{breadcrumb:{label:"Logs",parent:"WebpathPageMediaEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/media-collections",name:"WebpathPageMediaCollections",component:oy,meta:{breadcrumb:{label:"Media Collections",parent:"WebpathPageEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/media-collections/new",name:"WebpathPageMediaCollectionNew",component:my,meta:{breadcrumb:{label:"New",parent:"WebpathPageMediaCollections"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/media-collections/:collection_id/edit",name:"WebpathPageMediaCollectionEdit",component:gy,meta:{breadcrumb(){return{label:this.$route.params.collection_id.toString(),parent:"WebpathPageMediaCollections"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/media-collecitons/:collection_id/logs",name:"WebpathPageMediaCollectionLogs",component:yy,meta:{breadcrumb:{label:"Logs",parent:"WebpathPageMediaCollectionEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/menus",name:"WebpathPageMenus",component:Ny,meta:{breadcrumb:{label:"Menus",parent:"WebpathPageEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/menus/new",name:"WebpathPageMenuNew",component:Iy,meta:{breadcrumb:{label:"New",parent:"WebpathPageMenus"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/menus/:menu_id/edit",name:"WebpathPageMenuEdit",component:Ay,meta:{breadcrumb(){return{label:this.$route.params.menu_id.toString(),parent:"WebpathPageMenus"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/menus/:menu_id/logs",name:"WebpathPageMenuLogs",component:Gy,meta:{breadcrumb:{label:"Logs",parent:"WebpathPageMenuEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/publications",name:"WebpathPagePublications",component:tx,meta:{breadcrumb:{label:"Publications",parent:"WebpathPageEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/publications/new",name:"WebpathPagePublicationNew",component:ox,meta:{breadcrumb:{label:"New",parent:"WebpathPagePublications"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/publications/:publication_id/edit",name:"WebpathPagePublicationEdit",component:mx,meta:{breadcrumb(){return{label:this.$route.params.publication_id.toString(),parent:"WebpathPagePublications"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/publications/:publication_id/logs",name:"WebpathPagePublicationLogs",component:gx,meta:{breadcrumb:{label:"Logs",parent:"WebpathPagePublicationEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/related",name:"WebpathPageRelated",component:yx,meta:{breadcrumb:{label:"Related",parent:"WebpathPageEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/related/new",name:"WebpathPageRelatedNew",component:Nx,meta:{breadcrumb:{label:"New",parent:"WebpathPageRelated"}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/related/:related_id/edit",name:"WebpathPageRelatedEdit",component:Ix,meta:{breadcrumb(){return{label:this.$route.params.related_id.toString(),parent:"WebpathPageRelated"}}}},{path:"websites/:site_id/webpaths/:webpath_id/pages/:page_id/related/:related_id/logs",name:"WebpathPageRelatedLogs",component:Ax,meta:{breadcrumb:{label:"Logs",parent:"WebpathPageRelatedEdit"}}},{path:"media",name:"Media",component:Ol,meta:{breadcrumb:{label:"Media",parent:"Dashboard"}}},{path:"media/new",name:"MediaNew",component:Bl,meta:{breadcrumb:{label:"New",parent:"Media"}}},{path:"media/:media_id/edit",name:"MediaEdit",component:Dl,meta:{breadcrumb(){return{label:this.$route.params.media_id.toString(),parent:"Media"}}}},{path:"media/:media_id/logs",name:"MediaLogs",component:Vl,meta:{breadcrumb:{label:"Logs",parent:"MediaEdit"}}},{path:"media/:media_id/locks",name:"MediaLocks",component:Zl,meta:{breadcrumb:{label:"Locks",parent:"MediaEdit"}}},{path:"media/:media_id/locks/new",name:"MediaLockNew",component:rd,meta:{breadcrumb:{label:"New",parent:"MediaLocks"}}},{path:"media-collections",name:"MediaCollections",component:ud,meta:{breadcrumb:{label:"Media collections",parent:"Dashboard"}}},{path:"media-collections/new",name:"MediaCollectionNew",component:fd,meta:{breadcrumb:{label:"new",parent:"MediaCollections"}}},{path:"media-collections/:collection_id/edit",name:"MediaCollectionEdit",component:$d,meta:{breadcrumb(){return{label:this.$route.params.collection_id.toString(),parent:"MediaCollections"}}}},{path:"media-collections/:collection_id/logs",name:"MediaCollectionLogs",component:Od,meta:{breadcrumb:{label:"Logs",parent:"MediaCollectionEdit"}}},{path:"media-collections/:collection_id/locks",name:"MediaCollectionLocks",component:rc,meta:{breadcrumb:{label:"Locks",parent:"MediaCollectionEdit"}}},{path:"media-collections/:collection_id/locks/new",name:"MediaCollectionLockNew",component:uc,meta:{breadcrumb:{label:"New",parent:"MediaCollectionLocks"}}},{path:"media-collections/:collection_id/items",name:"MediaCollectionItems",component:Dd,meta:{breadcrumb:{label:"Items",parent:"MediaCollectionEdit"}}},{path:"media-collections/:collection_id/items/new",name:"MediaCollectionItemNew",component:Bd,meta:{breadcrumb:{label:"new",parent:"MediaCollectionItems"}}},{path:"media-collections/:collection_id/items/:collection_item_id/edit",name:"MediaCollectionItemEdit",component:Vd,meta:{breadcrumb(){return{label:this.$route.params.collection_item_id.toString(),parent:"MediaCollectionItems"}}}},{path:"media-collections/:collection_id/items/:collection_item_id/logs",name:"MediaCollectionItemLogs",component:Zd,meta:{breadcrumb:{label:"Logs",parent:"MediaCollectionItemEdit"}}},{path:"menus",name:"Menus",component:fc,meta:{breadcrumb:{label:"Menus",parent:"Dashboard"}}},{path:"menus/new",name:"MenuNew",component:Oc,meta:{breadcrumb:{label:"New",parent:"Menus"}}},{path:"menus/:menu_id/edit",name:"MenuEdit",component:$c,meta:{breadcrumb(){return{label:this.$route.params.menu_id.toString(),parent:"Menus"}}}},{path:"menus/:menu_id/logs",name:"MenuLogs",component:Dc,meta:{breadcrumb:{label:"Logs",parent:"MenuEdit"}}},{path:"menus/:menu_id/locks",name:"MenuLocks",component:Bc,meta:{breadcrumb:{label:"Locks",parent:"MenuEdit"}}},{path:"menus/:menu_id/locks/new",name:"MenuLockNew",component:Vc,meta:{breadcrumb:{label:"New",parent:"MenuLocks"}}},{path:"menus/:menu_id/items",name:"MenuItems",component:Zc,meta:{breadcrumb:{label:"Menu items",parent:"MenuEdit"}}},{path:"menus/:menu_id/items/new",name:"MenuItemNew",component:uu,meta:{breadcrumb:{label:"New",parent:"MenuItems"}}},{path:"menus/:menu_id/items/:menu_item_id/edit",name:"MenuItemEdit",component:ru,meta:{breadcrumb(){return{label:this.$route.params.menu_item_id.toString(),parent:"MenuItems"}}}},{path:"menus/:menu_id/items/:menu_item_id/logs",name:"MenuItemLogs",component:fu,meta:{breadcrumb:{label:"Logs",parent:"MenuItemEdit"}}},{path:"menus/:menu_id/items/:menu_item_id/localizations",name:"MenuItemLocalizations",component:$u,meta:{breadcrumb:{label:"Localizations",parent:"MenuItemEdit"}}},{path:"menus/:menu_id/items/:menu_item_id/localizations/new",name:"MenuItemLocalizationNew",component:Du,meta:{breadcrumb:{label:"New",parent:"MenuItemLocalizations"}}},{path:"menus/:menu_id/items/:menu_item_id/localizations/:menu_item_localization_id/edit",name:"MenuItemLocalizationEdit",component:Ou,meta:{breadcrumb(){return{label:this.$route.params.menu_item_localization_id.toString(),parent:"MenuItemLocalizations"}}}},{path:"menus/:menu_id/items/:menu_item_id/localizations/:menu_item_localization_id/logs",name:"MenuItemLocalizationLogs",component:Bu,meta:{breadcrumb:{label:"Logs",parent:"MenuItemLocalizationEdit"}}},{path:"carousels",name:"Carousels",component:Ys,meta:{breadcrumb:{label:"Carousels",parent:"Dashboard"}}},{path:"carousels/new",name:"CarouselNew",component:Ks,meta:{breadcrumb:{label:"New",parent:"Carousels"}}},{path:"carousels/:carousel_id/edit",name:"CarouselEdit",component:ii,meta:{breadcrumb(){return{label:this.$route.params.carousel_id.toString(),parent:"Carousels"}}}},{path:"carousels/:carousel_id/items",name:"CarouselItems",component:bi,meta:{breadcrumb:{label:"Items",parent:"CarouselEdit"}}},{path:"carousels/:carousel_id/items/new",name:"CarouselItemNew",component:Ci,meta:{breadcrumb:{label:"New",parent:"CarouselItems"}}},{path:"carousels/:carousel_id/items/:carousel_item_id/edit",name:"CarouselItemEdit",component:Li,meta:{breadcrumb(){return{label:this.$route.params.carousel_item_id.toString(),parent:"CarouselItems"}}}},{path:"carousels/:carousel_id/items/:carousel_item_id/logs",name:"CarouselItemLogs",component:Pi,meta:{breadcrumb:{label:"Logs",parent:"CarouselItemEdit"}}},{path:"carousels/:carousel_id/items/:carousel_item_id/links",name:"CarouselItemLinks",component:Wi,meta:{breadcrumb:{label:"Links",parent:"CarouselItemEdit"}}},{path:"carousels/:carousel_id/items/:carousel_item_id/links/new",name:"CarouselItemLinkNew",component:Yi,meta:{breadcrumb:{label:"New",parent:"CarouselItemLinks"}}},{path:"carousels/:carousel_id/items/:carousel_item_id/links/:carousel_item_link_id/edit",name:"CarouselItemLinkEdit",component:Ki,meta:{breadcrumb(){return{label:this.$route.params.carousel_item_link_id.toString(),parent:"CarouselItemLinks"}}}},{path:"carousels/:carousel_id/items/:carousel_item_id/links/:carousel_item_link_id/logs",name:"CarouselItemLinkLogs",component:ir,meta:{breadcrumb:{label:"Logs",parent:"CarouselItemLinkEdit"}}},{path:"carousels/:carousel_id/items/:carousel_item_id/localizations",name:"CarouselItemLocalizations",component:cr,meta:{breadcrumb:{label:"Localizations",parent:"CarouselItemEdit"}}},{path:"carousels/:carousel_id/items/:carousel_item_id/localizations/new",name:"CarouselItemLocalizationNew",component:br,meta:{breadcrumb:{label:"New",parent:"CarouselItemLocalizations"}}},{path:"carousels/:carousel_id/items/:carousel_item_id/localizations/:carousel_item_localization_id/edit",name:"CarouselItemLocalizationEdit",component:Cr,meta:{breadcrumb(){return{label:this.$route.params.carousel_item_localization_id.toString(),parent:"CarouselItemLocalizations"}}}},{path:"carousels/:carousel_id/items/:carousel_item_id/localizations/:carousel_item_localization_id/logs",name:"CarouselItemLocalizationLogs",component:Lr,meta:{breadcrumb:{label:"Logs",parent:"CarouselItemLocalizationEdit"}}},{path:"carousels/:carousel_id/items/:carousel_item_id/links/:carousel_item_link_id/localizations",name:"CarouselItemLinkLocalizations",component:Pr,meta:{breadcrumb:{label:"Localizations",parent:"CarouselItemLinkEdit"}}},{path:"carousels/:carousel_id/items/:carousel_item_id/links/:carousel_item_link_id/localizations/new",name:"CarouselItemLinkLocalizationNew",component:Wr,meta:{breadcrumb:{label:"New",parent:"CarouselItemLinkLocalizations"}}},{path:"carousels/:carousel_id/items/:carousel_item_id/links/:carousel_item_link_id/localizations/:carousel_item_link_localization_id/edit",name:"CarouselItemLinkLocalizationEdit",component:Yr,meta:{breadcrumb(){return{label:this.$route.params.carousel_item_link_localization_id.toString(),parent:"CarouselItemLinkLocalizations"}}}},{path:"carousels/:carousel_id/items/:carousel_item_id/links/:carousel_item_link_id/localizations/:carousel_item_link_localization_id/logs",name:"CarouselItemLinkLocalizationLogs",component:Kr,meta:{breadcrumb:{label:"Logs",parent:"CarouselItemLinkLocalizationEdit"}}},{path:"carousels/:carousel_id/logs",name:"CarouselLogs",component:ci,meta:{breadcrumb:{label:"Logs",parent:"CarouselEdit"}}},{path:"carousels/:carousel_id/locks",name:"CarouselLocks",component:io,meta:{breadcrumb:{label:"Locks",parent:"CarouselEdit"}}},{path:"carousels/:carousel_id/locks/new",name:"CarouselLockNew",component:uo,meta:{breadcrumb:{label:"New",parent:"CarouselLocks"}}},{path:"publications",name:"Publications",component:D_,meta:{breadcrumb:{label:"Publications",parent:"Dashboard"}}},{path:"publications/new",name:"PublicationNew",component:B_,meta:{breadcrumb:{label:"New",parent:"Publications"}}},{path:"publications/:publication_id/edit",name:"PublicationEdit",component:V_,meta:{breadcrumb(){return{label:this.$route.params.publication_id.toString(),parent:"Publications"}}}},{path:"publications/:publication_id/logs",name:"PublicationLogs",component:Z_,meta:{breadcrumb:{label:"Logs",parent:"PublicationEdit"}}},{path:"publications/:publication_id/locks",name:"PublicationLocks",component:rb,meta:{breadcrumb:{label:"Locks",parent:"PublicationEdit"}}},{path:"publications/:publication_id/locks/new",name:"PublicationLockNew",component:ub,meta:{breadcrumb:{label:"New",parent:"PublicationLocks"}}},{path:"publications/:publication_id/attachments",name:"PublicationAttachments",component:fb,meta:{breadcrumb:{label:"Attachments",parent:"PublicationEdit"}}},{path:"publications/:publication_id/attachments/new",name:"PublicationAttachmentNew",component:$b,meta:{breadcrumb:{label:"New",parent:"PublicationAttachments"}}},{path:"publications/:publication_id/attachments/:attachment_id/edit",name:"PublicationAttachmentEdit",component:Ob,meta:{breadcrumb(){return{label:this.$route.params.attachment_id.toString(),parent:"PublicationAttachments"}}}},{path:"publications/:publication_id/attachments/:attachment_id/logs",name:"PublicationAttachmentLogs",component:Db,meta:{breadcrumb:{label:"Logs",parent:"PublicationAttachmentEdit"}}},{path:"publications/:publication_id/links",name:"PublicationLinks",component:mf,meta:{breadcrumb:{label:"Links",parent:"PublicationEdit"}}},{path:"publications/:publication_id/links/new",name:"PublicationLinkNew",component:gf,meta:{breadcrumb:{label:"New",parent:"PublicationLinks"}}},{path:"publications/:publication_id/links/:link_id/edit",name:"PublicationLinkEdit",component:yf,meta:{breadcrumb(){return{label:this.$route.params.link_id.toString(),parent:"PublicationLinks"}}}},{path:"publications/:publication_id/links/:link_id/logs",name:"PublicationLinkLogs",component:Nf,meta:{breadcrumb:{label:"Logs",parent:"PublicationLinkEdit"}}},{path:"publications/:publication_id/media-collections",name:"PublicationMediaCollections",component:Bb,meta:{breadcrumb:{label:"Media collections",parent:"PublicationEdit"}}},{path:"publications/:publication_id/media-collections/new",name:"PublicationMediaCollectionNew",component:Vb,meta:{breadcrumb:{label:"New",parent:"PublicationMediaCollections"}}},{path:"publications/:publication_id/media-collections/:collection_id/edit",name:"PublicationMediaCollectionEdit",component:Zb,meta:{breadcrumb(){return{label:this.$route.params.collection_id.toString(),parent:"PublicationMediaCollections"}}}},{path:"publications/:publication_id/media-collections/:collection_id/logs",name:"PublicationMediaCollectionLogs",component:of,meta:{breadcrumb:{label:"Logs",parent:"PublicationMediaCollectionEdit"}}},{path:"publications/:publication_id/localizations",name:"PublicationLocalizations",component:If,meta:{breadcrumb:{label:"Localizations",parent:"PublicationEdit"}}},{path:"publications/:publication_id/localizations/new",name:"PublicationLocalizationNew",component:Af,meta:{breadcrumb:{label:"New",parent:"PublicationLocalizations"}}},{path:"publications/:publication_id/localizations/:localization_id/edit",name:"PublicationLocalizationEdit",component:Gf,meta:{breadcrumb(){return{label:this.$route.params.localization_id.toString(),parent:"PublicationLocalizations"}}}},{path:"publications/:publication_id/localizations/:localization_id/logs",name:"PublicationLocalizationLogs",component:tg,meta:{breadcrumb:{label:"Logs",parent:"PublicationLocalizationEdit"}}},{path:"publications/:publication_id/related",name:"PublicationRelated",component:og,meta:{breadcrumb:{label:"Related",parent:"PublicationEdit"}}},{path:"publications/:publication_id/related/new",name:"PublicationRelatedNew",component:mg,meta:{breadcrumb:{label:"New",parent:"PublicationRelated"}}},{path:"publications/:publication_id/related/:related_id/edit",name:"PublicationRelatedEdit",component:gg,meta:{breadcrumb(){return{label:this.$route.params.related_id.toString(),parent:"PublicationRelated"}}}},{path:"publications/:publication_id/related/:related_id/logs",name:"PublicationRelatedLogs",component:yg,meta:{breadcrumb:{label:"Logs",parent:"PublicationRelatedEdit"}}},{path:"blocks",name:"TemplateBlocks",component:gS,meta:{breadcrumb:{label:"Blocks",parent:"Dashboard"}}},{path:"contacts",name:"Contacts",component:fo,meta:{breadcrumb:{label:"Contacts",parent:"Dashboard"}}},{path:"contacts/new",name:"ContactNew",component:$o,meta:{breadcrumb:{label:"New",parent:"Contacts"}}},{path:"contacts/:contact_id/edit",name:"ContactEdit",component:Oo,meta:{breadcrumb(){return{label:this.$route.params.contact_id.toString(),parent:"Contacts"}}}},{path:"contacts/:contact_id/logs",name:"ContactLogs",component:Do,meta:{breadcrumb:{label:"Logs",parent:"ContactEdit"}}},{path:"contacts/:contact_id/locks",name:"ContactLocks",component:Bo,meta:{breadcrumb:{label:"Locks",parent:"ContactEdit"}}},{path:"contacts/:contact_id/locks/new",name:"ContactLockNew",component:Vo,meta:{breadcrumb:{label:"New",parent:"ContactLocks"}}},{path:"contacts/:contact_id/infos",name:"ContactInfos",component:Zo,meta:{breadcrumb:{label:"Contact Informations",parent:"ContactEdit"}}},{path:"contacts/:contact_id/infos/new",name:"ContactInfoNew",component:on,meta:{breadcrumb:{label:"New",parent:"ContactInfos"}}},{path:"contacts/:contact_id/infos/:contact_info_id/edit",name:"ContactInfoEdit",component:mn,meta:{breadcrumb(){return{label:this.$route.params.contact_info_id.toString(),parent:"ContactInfos"}}}},{path:"contacts/:contact_id/infos/:contact_info_id/logs",name:"ContactInfoLogs",component:gn,meta:{breadcrumb:{label:"Logs",parent:"ContactInfoEdit"}}},{path:"contacts/:contact_id/localizations",name:"ContactLocalizations",component:yn,meta:{breadcrumb:{label:"Contact Localizations",parent:"ContactEdit"}}},{path:"contacts/:contact_id/localizations/new",name:"ContactLocalizationNew",component:Nn,meta:{breadcrumb:{label:"New",parent:"ContactLocalizations"}}},{path:"contacts/:contact_id/localization/:localization_id/edit",name:"ContactLocalizationEdit",component:In,meta:{breadcrumb(){return{label:this.$route.params.localization_id.toString(),parent:"ContactLocalizations"}}}},{path:"contacts/:contact_id/localizations/:localization_id/logs",name:"ContactLocalizationLogs",component:An,meta:{breadcrumb:{label:"Logs",parent:"ContactLocalizationEdit"}}},{path:"contacts/:contact_id/infos/:contact_info_id/localizations",name:"ContactInfoLocalizations",component:Gn,meta:{breadcrumb:{label:"Contact Localizations",parent:"ContactInfoEdit"}}},{path:"contacts/:contact_id/infos/:contact_info_id/localizations/new",name:"ContactInfoLocalizationNew",component:tl,meta:{breadcrumb:{label:"New",parent:"ContactInfoLocalizations"}}},{path:"contacts/:contact_id/infos/:contact_info_id/localization/:localization_id/edit",name:"ContactInfoLocalizationEdit",component:ol,meta:{breadcrumb(){return{label:this.$route.params.localization_id.toString(),parent:"ContactInfoLocalizations"}}}},{path:"contacts/:contact_id/infos/:contact_info_id/localizations/:localization_id/logs",name:"ContactInfoLocalizationLogs",component:ml,meta:{breadcrumb:{label:"Logs",parent:"ContactInfoLocalizationEdit"}}},{path:"calendars",name:"Calendars",component:Ce,meta:{breadcrumb:{label:"Calendars",parent:"Dashboard"}}},{path:"calendars/new",name:"CalendarNew",component:Le,meta:{breadcrumb:{label:"New",parent:"Calendars"}}},{path:"calendars/:calendar_id/edit",name:"CalendarEdit",component:Pe,meta:{breadcrumb(){return{label:this.$route.params.calendar_id.toString(),parent:"Calendars"}}}},{path:"calendars/:calendar_id/locks",name:"CalendarLocks",component:ia,meta:{breadcrumb:{label:"Locks",parent:"CalendarEdit"}}},{path:"calendars/:calendar_id/locks/new",name:"CalendarLockNew",component:ca,meta:{breadcrumb:{label:"New",parent:"CalendarLocks"}}},{path:"calendars/:calendar_id/logs",name:"CalendarLogs",component:Ye,meta:{breadcrumb:{label:"Logs",parent:"CalendarEdit"}}},{path:"calendars/:calendar_id/events",name:"CalendarEvents",component:ba,meta:{breadcrumb:{label:"Events",parent:"CalendarEdit"}}},{path:"calendars/:calendar_id/items/new",name:"CalendarEventNew",component:Ca,meta:{breadcrumb:{label:"New",parent:"CalendarEvents"}}},{path:"calendars/:calendar_id/events/:calendar_event_id/edit",name:"CalendarEventEdit",component:La,meta:{breadcrumb(){return{label:this.$route.params.calendar_event_id.toString(),parent:"CalendarEvents"}}}},{path:"calendars/:calendar_id/events/:calendar_event_id/logs",name:"CalendarEventLogs",component:Pa,meta:{breadcrumb:{label:"Logs",parent:"CalendarEventEdit"}}},{path:"events",name:"Events",component:cs,meta:{breadcrumb:{label:"Events",parent:"Dashboard"}}},{path:"events/new",name:"EventNew",component:bs,meta:{breadcrumb:{label:"New",parent:"Events"}}},{path:"events/:event_id/edit",name:"EventEdit",component:Cs,meta:{breadcrumb(){return{label:this.$route.params.event_id.toString(),parent:"Events"}}}},{path:"events/:event_id/locks",name:"EventLocks",component:Ws,meta:{breadcrumb:{label:"Locks",parent:"EventEdit"}}},{path:"events/:event_id/locks/new",name:"EventLockNew",component:Ps,meta:{breadcrumb:{label:"New",parent:"EventLocks"}}},{path:"events/:event_id/logs",name:"EventLogs",component:Ls,meta:{breadcrumb:{label:"Logs",parent:"EventEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/calendars",name:"WebpathCalendars",component:Gx,meta:{breadcrumb:{label:"Calendars",parent:"WebpathEdit"}}},{path:"websites/:site_id/webpaths/:webpath_id/calendars/new",name:"WebpathCalendarNew",component:tS,meta:{breadcrumb:{label:"New",parent:"WebpathCalendars"}}},{path:"websites/:site_id/webpaths/:webpath_id/calendars/:calendar_id/edit",name:"WebpathCalendarEdit",component:oS,meta:{breadcrumb(){return{label:this.$route.params.calendar_id.toString(),parent:"WebpathCalendars"}}}},{path:"websites/:site_id/webpaths/:webpath_id/calendars/:calendar_id/logs",name:"WebpathCalendarLogs",component:mS,meta:{breadcrumb:{label:"Logs",parent:"WebpathCalendarEdit"}}},{path:"calendars/:calendar_id/localizations",name:"CalendarLocalizations",component:Wa,meta:{breadcrumb:{label:"Localizations",parent:"CalendarEdit"}}},{path:"calendars/:calendar_id/localizations/new",name:"CalendarLocalizationNew",component:Ya,meta:{breadcrumb:{label:"New",parent:"CalendarLocalizations"}}},{path:"calendars/:calendar_id/localizations/:calendar_localization_id/edit",name:"CalendarLocalizationEdit",component:Ka,meta:{breadcrumb(){return{label:this.$route.params.calendar_localization_id.toString(),parent:"CalendarLocalizations"}}}},{path:"calendars/:calendar_id/localizations/:calendar_localization_id/logs",name:"CalendarLocalizationLogs",component:is,meta:{breadcrumb:{label:"Logs",parent:"CalendarLocalizationEdit"}}},{path:"newsletters",name:"Newsletters",component:Vu,meta:{breadcrumb:{label:"Newsletters",parent:"Dashboard"}}},{path:"newsletters/new",name:"NewsletterNew",component:rm,meta:{breadcrumb:{label:"New",parent:"Newsletters"}}},{path:"newsletters/:newsletter_id/edit",name:"NewsletterEdit",component:Zu,meta:{breadcrumb(){return{label:this.$route.params.newsletter_id.toString(),parent:"Newsletters"}}}},{path:"newsletters/:newsletter_id/logs",name:"NewsletterLogs",component:um,meta:{breadcrumb:{label:"Logs",parent:"NewsletterEdit"}}},{path:"newsletters/:newsletter_id/locks",name:"NewsletterLocks",component:fm,meta:{breadcrumb:{label:"Locks",parent:"NewsletterEdit"}}},{path:"newsletters/:newsletter_id/locks/new",name:"NewsletterLockNew",component:$m,meta:{breadcrumb:{label:"New",parent:"NewsletterLocks"}}},{path:"newsletters/:newsletter_id/subscriptions",name:"NewsletterSubscriptions",component:Om,meta:{breadcrumb:{label:"Subscriptions",parent:"NewsletterEdit"}}},{path:"newsletters/:newsletter_id/subscriptions/new",name:"NewsletterSubscriptionNew",component:Bm,meta:{breadcrumb:{label:"New",parent:"NewsletterSubscriptions"}}},{path:"newsletters/:newsletter_id/subscriptions/:subscription_id/edit",name:"NewsletterSubscriptionEdit",component:Dm,meta:{breadcrumb(){return{label:this.$route.params.subscription_id.toString(),parent:"NewsletterSubscriptions"}}}},{path:"newsletters/:newsletter_id/test-subscriptions",name:"NewsletterTestSubscriptions",component:Vm,meta:{breadcrumb:{label:"Test Subscriptions",parent:"NewsletterEdit"}}},{path:"newsletters/:newsletter_id/test-subscriptions/new",name:"NewsletterTestSubscriptionNew",component:rh,meta:{breadcrumb:{label:"New",parent:"NewsletterTestSubscriptions"}}},{path:"newsletters/:newsletter_id/test-subscriptions/:subscription_id/edit",name:"NewsletterTestSubscriptionEdit",component:Zm,meta:{breadcrumb(){return{label:this.$route.params.subscription_id.toString(),parent:"NewsletterTestSubscriptions"}}}},{path:"newsletters/:newsletter_id/messages",name:"NewsletterMessages",component:uh,meta:{breadcrumb:{label:"Messages",parent:"NewsletterEdit"}}},{path:"newsletters/:newsletter_id/messages/new",name:"NewsletterMessageNew",component:$h,meta:{breadcrumb:{label:"New",parent:"NewsletterMessages"}}},{path:"newsletters/:newsletter_id/messages/:message_id/edit",name:"NewsletterMessageEdit",component:fh,meta:{breadcrumb(){return{label:this.$route.params.message_id.toString(),parent:"NewsletterMessages"}}}},{path:"newsletters/:newsletter_id/messages/:message_id/attachments",name:"NewsletterMessageAttachments",component:Oh,meta:{breadcrumb:{label:"Attachments",parent:"NewsletterMessageEdit"}}},{path:"newsletters/:newsletter_id/messages/:message_id/attachments/new",name:"NewsletterMessageAttachmentNew",component:Bh,meta:{breadcrumb:{label:"New",parent:"NewsletterMessageAttachments"}}},{path:"newsletters/:newsletter_id/messages/:message_id/attachments/:attachment_id/edit",name:"NewsletterMessageAttachmentEdit",component:Dh,meta:{breadcrumb(){return{label:this.$route.params.attachment_id.toString(),parent:"NewsletterMessageAttachments"}}}},{path:"newsletters/:newsletter_id/messages/:message_id/categories",name:"NewsletterMessageCategories",component:Vh,meta:{breadcrumb:{label:"Categories",parent:"NewsletterMessageEdit"}}},{path:"newsletters/:newsletter_id/messages/:message_id/categories/new",name:"NewsletterMessageCategoryNew",component:rp,meta:{breadcrumb:{label:"New",parent:"NewsletterMessageCategories"}}},{path:"newsletters/:newsletter_id/messages/:message_id/categories/:category_id/edit",name:"NewsletterMessageCategoryEdit",component:Zh,meta:{breadcrumb(){return{label:this.$route.params.category_id.toString(),parent:"NewsletterMessageCategories"}}}},{path:"newsletters/:newsletter_id/messages/:message_id/publications",name:"NewsletterMessagePublications",component:up,meta:{breadcrumb:{label:"Publications",parent:"NewsletterMessageEdit"}}},{path:"newsletters/:newsletter_id/messages/:message_id/publications/new",name:"NewsletterMessagePublicationNew",component:$p,meta:{breadcrumb:{label:"New",parent:"NewsletterMessagePublications"}}},{path:"newsletters/:newsletter_id/messages/:message_id/publications/:publication_id/edit",name:"NewsletterMessagePublicationEdit",component:fp,meta:{breadcrumb(){return{label:this.$route.params.publication_id.toString(),parent:"NewsletterMessagePublications"}}}},{path:"newsletters/:newsletter_id/messages/:message_id/publication-contexts",name:"NewsletterMessagePublicationCtx",component:Op,meta:{breadcrumb:{label:"News",parent:"NewsletterMessageEdit"}}},{path:"newsletters/:newsletter_id/messages/:message_id/publication-contexts/new",name:"NewsletterMessagePublicationCtxNew",component:Bp,meta:{breadcrumb:{label:"New",parent:"NewsletterMessagePublicationCtx"}}},{path:"newsletters/:newsletter_id/messages/:message_id/publication-contexts/:publication_id/edit",name:"NewsletterMessagePublicationCtxEdit",component:Dp,meta:{breadcrumb(){return{label:this.$route.params.publication_id.toString(),parent:"NewsletterMessagePublicationCtx"}}}},{path:"newsletters/:newsletter_id/messages/:message_id/webpaths",name:"NewsletterMessageWebpaths",component:Vp,meta:{breadcrumb:{label:"News",parent:"NewsletterMessageEdit"}}},{path:"newsletters/:newsletter_id/messages/:message_id/webpaths/new",name:"NewsletterMessageWebpathNew",component:r_,meta:{breadcrumb:{label:"New",parent:"NewsletterMessageWebpaths"}}},{path:"newsletters/:newsletter_id/messages/:message_id/webpaths/:webpath_id/edit",name:"NewsletterMessageWebpathEdit",component:Zp,meta:{breadcrumb(){return{label:this.$route.params.webpath_id.toString(),parent:"NewsletterMessageWebpaths"}}}},{path:"newsletters/:newsletter_id/messages/:message_id/calendars",name:"NewsletterMessageCalendars",component:u_,meta:{breadcrumb:{label:"Calendars",parent:"NewsletterMessageEdit"}}},{path:"newsletters/:newsletter_id/messages/:message_id/calendars/new",name:"NewsletterMessageCalendarNew",component:$_,meta:{breadcrumb:{label:"New",parent:"NewsletterMessageCalendars"}}},{path:"newsletters/:newsletter_id/messages/:message_id/calendars/:calendar_id/edit",name:"NewsletterMessageCalendarEdit",component:f_,meta:{breadcrumb(){return{label:this.$route.params.calendar_id.toString(),parent:"NewsletterMessageCalendars"}}}},{path:"newsletters/:newsletter_id/messages/:message_id/sendings",name:"NewsletterMessageSendings",component:O_,meta:{breadcrumb:{label:"News",parent:"NewsletterMessageEdit"}}}]},{path:"*",component:At}];var wS=vS,kS=a("9483");Object(kS["a"])("/static/unicms_editorial_board_vue/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});a("6dfc");
/*!

 =========================================================
 * Vue Light Bootstrap Dashboard - v2.0.0 (Bootstrap 4)
 =========================================================

 * Product Page: http://www.creative-tim.com/product/light-bootstrap-dashboard
 * Copyright 2019 Creative Tim (http://www.creative-tim.com)
 * Licensed under MIT (https://github.com/creativetimofficial/light-bootstrap-dashboard/blob/master/LICENSE.md)

 =========================================================

 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

 */s["default"].use(r["a"],i["a"]),s["default"].use(u.a),s["default"].use(m["a"]),s["default"].use(o["a"]),s["default"].use(n["a"]),s["default"].use(nt),s["default"].component("v-select",d.a);const CS=new m["a"]({routes:wS,linkActiveClass:"nav-item active",scrollBehavior:t=>t.hash?{selector:t.hash}:{x:0,y:0}});function $S(t){let e=t.file||t;return null!=e.match(/\.(jpeg|jpg|gif|png|webp)$/)}function yS(t){if(!t)return null;let e=new Date(t),a={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};return e.toLocaleDateString(void 0,a)}function xS(t,e){this.axios.get("/api/editorial-board/redis-lock/"+t+"/"+e+"/").then(t=>{0!=Object.entries(t.data).length?null==this.redis_alert&&(this.redis_alert={variant:"warning",message:t.data.message,dismissable:!1}):this.redis_alert=null})}function SS(t,e){let a=this,s=function(){a.axios.post(t,e,{headers:{"X-CSRFToken":a.$csrftoken}})};document.addEventListener("keyup",s,!1),document.addEventListener("mousedown",s,!1)}s["default"].prototype.$is_image=$S,s["default"].prototype.$date_formatter=yS,s["default"].prototype.$csrftoken=csrftoken,s["default"].prototype.$checkForRedisLocks=xS,s["default"].prototype.$user_is_active=SS,s["default"].prototype.$redis_ttl=5e3,new s["default"]({el:"#app",render:t=>t(v),router:CS})},7532:function(t,e,a){},"7d9a":function(t,e,a){"use strict";a("a3cd")},"7f9f":function(t,e,a){"use strict";a("7532")},"815b":function(t,e,a){},a3cd:function(t,e,a){},bb99:function(t,e,a){},c6e3:function(t,e,a){},ca41:function(t,e,a){"use strict";a("815b")},e1b9:function(t,e,a){}});
//# sourceMappingURL=app.73dded92.js.map